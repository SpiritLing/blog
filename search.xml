<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Leetcode é“¾è¡¨ ç®—æ³•ç»ƒä¹ </title>
    <url>/posts/4970029a/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Leetcode é“¾è¡¨ ç®—æ³•ç»ƒä¹ </p></blockquote><a id="more"></a><h2 id="237-åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"><a href="#237-åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹" class="headerlink" title="237 åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹"></a>237 åˆ é™¤é“¾è¡¨ä¸­çš„èŠ‚ç‚¹</h2><p>åœ°å€ï¼š<a href="https://leetcode-cn.com/problems/delete-node-in-a-linked-list/" rel="external nofollow noopener noreferrer" target="_blank">https://leetcode-cn.com/problems/delete-node-in-a-linked-list/</a></p><p>ä»£ç ï¼š<a href="http://suo.im/6diowW" rel="external nofollow noopener noreferrer" target="_blank">http://suo.im/6diowW</a></p><h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>è¯·ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œä½¿å…¶å¯ä»¥åˆ é™¤æŸä¸ªé“¾è¡¨ä¸­ç»™å®šçš„ï¼ˆéæœ«å°¾ï¼‰èŠ‚ç‚¹ï¼Œä½ å°†åªè¢«ç»™å®šè¦æ±‚è¢«åˆ é™¤çš„èŠ‚ç‚¹ã€‚</p><h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>é¦–å…ˆè¿™ä¸ªé¢˜ç›®åˆšå¼€å§‹æœ‰ç‚¹å½±å“äººçš„åˆ¤æ–­ã€‚</p><p>æˆ‘ä»¥ä¸ºå‡½æ•°ä¸­ä¼ å…¥çš„æ˜¯æ•´ä¸ªé“¾è¡¨ç»“æ„ã€‚(âŠ™ï¹âŠ™)</p><p>ç„¶åå°±é”™äº†ã€‚ã€‚ã€‚</p><p>å†æ¬¡çœ‹é¢˜æ—¶ï¼Œå‘ç°ä¼ å…¥çš„æ˜¯åˆ é™¤çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ä¸€éƒ¨åˆ†</p><p>é¦–å…ˆï¼Œè¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼Œå¸¸è§„æ¥è¯´å°±æ˜¯é€šè¿‡æ”¹å˜ä¸Šä¸€èŠ‚ç‚¹çš„æŒ‡å‘æ¥åˆ é™¤èŠ‚ç‚¹ã€‚</p><p>ä½†æ˜¯å¾ˆä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸ªèŠ‚ç‚¹ç»“æ„ä¸­æ˜¯ä¸å­˜åœ¨ <code>prev</code> æŒ‡å‘ï¼Œé‚£ä¹ˆä¹Ÿå°±æ— æ³•é€šè¿‡æ”¹å˜ä¸Šä¸€èŠ‚ç‚¹æ¥åˆ é™¤ã€‚</p><p>æ—¢ç„¶è¿™ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œæœ‰å€¼ï¼Œæœ‰æŒ‡å‘ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥å°†è¿™ä¸ªèŠ‚ç‚¹çš„å€¼æ”¹ä¸ºä¸‹ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œç›¸åº”çš„è¿™ä¸ªèŠ‚ç‚¹çš„å€¼å°±è¢«åˆ é™¤äº†ï¼Œå…¶å®æ˜¯è¦†ç›–äº†ã€‚</p><p>æ”¹å˜äº†å€¼ï¼Œé‚£ä¹ˆåŒæ ·çš„éœ€è¦æ”¹å˜ <code>next</code> çš„æŒ‡å‘ï¼Œå°†å…¶æŒ‡å‘åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªã€‚</p><p>å®é™…å°±æ˜¯å°†ä¸‹ä¸ªèŠ‚ç‚¹å¤åˆ¶åˆ°åˆ é™¤çš„èŠ‚ç‚¹è¿™é‡Œï¼Œè¦†ç›–æ‰éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     public int val;</span></span><br><span class="line"><span class="comment"> *     public ListNode next;</span></span><br><span class="line"><span class="comment"> *     public ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DeleteNode</span>(<span class="params">ListNode node</span>)</span> &#123;</span><br><span class="line">        node.val=node.next.val;</span><br><span class="line">        node.next=node.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1290-äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°"><a href="#1290-äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°" class="headerlink" title="1290. äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°"></a>1290. äºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°</h2><p>åœ°å€ï¼š<a href="https://leetcode-cn.com/problems/convert-binary-number-in-a-linked-list-to-integer/" rel="external nofollow noopener noreferrer" target="_blank">https://leetcode-cn.com/problems/convert-binary-number-in-a-linked-list-to-integer/</a></p><p>ä»£ç ï¼š<a href="http://suo.im/65MbOl" rel="external nofollow noopener noreferrer" target="_blank">http://suo.im/65MbOl</a></p><h3 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>ç»™ä½ ä¸€ä¸ªå•é“¾è¡¨çš„å¼•ç”¨ç»“ç‚¹ headã€‚é“¾è¡¨ä¸­æ¯ä¸ªç»“ç‚¹çš„å€¼ä¸æ˜¯ 0 å°±æ˜¯ 1ã€‚å·²çŸ¥æ­¤é“¾è¡¨æ˜¯ä¸€ä¸ªæ•´æ•°æ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚</p><p>è¯·ä½ è¿”å›è¯¥é“¾è¡¨æ‰€è¡¨ç¤ºæ•°å­—çš„ åè¿›åˆ¶å€¼ ã€‚</p><h3 id="è§£é¢˜æ€è·¯-1"><a href="#è§£é¢˜æ€è·¯-1" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><h4 id="ç¬¬ä¸€ç‰ˆï¼š"><a href="#ç¬¬ä¸€ç‰ˆï¼š" class="headerlink" title="ç¬¬ä¸€ç‰ˆï¼š"></a>ç¬¬ä¸€ç‰ˆï¼š</h4><p>é“¾è¡¨ä¸æ˜¯ 1 å°±æ˜¯ 0ï¼Œæ‰€ä»¥æˆ‘æƒ³çš„æ˜¯ï¼Œç›´æ¥å°†æ‰€æœ‰å€¼æ‹¼æ¥æˆå­—ç¬¦ä¸²ã€‚</p><p>ç„¶åé€šè¿‡ c#è‡ªå¸¦çš„è¿›åˆ¶è½¬æ¢ï¼Œå°†å…¶äºŒè¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¸ºåè¿›åˆ¶ã€‚</p><p>ä½†æ˜¯ç›¸åº”çš„ï¼Œè¿™ä¸ªä¹Ÿæœ‰ç¼ºç‚¹ï¼Œæ„Ÿè§‰æ²¡æœ‰å¯¹æœ€å‰é¢ä¸º 0 çš„é¢å¤–å¤„ç†ã€‚</p><h4 id="ç¬¬äºŒç‰ˆï¼š"><a href="#ç¬¬äºŒç‰ˆï¼š" class="headerlink" title="ç¬¬äºŒç‰ˆï¼š"></a>ç¬¬äºŒç‰ˆï¼š</h4><p>åˆ©ç”¨è¿›åˆ¶è½¬æ¢ç®—æ³•ï¼Œå¯ä»¥ç›´æ¥å°†äºŒè¿›åˆ¶è½¬ä¸ºåè¿›åˆ¶ï¼Œè€Œä¸éœ€è¦å»è°ƒç”¨å…¶ä»–æ–¹æ³•ã€‚</p><p>å¹¶ä¸”ç›´æ¥ä½¿ç”¨ä¼ å…¥è¿›æ¥çš„å‚æ•°æ¥è¿›è¡Œèµ‹å€¼å’Œæ“ä½œã€‚</p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="ç¬¬ä¸€ç‰ˆï¼š-1"><a href="#ç¬¬ä¸€ç‰ˆï¼š-1" class="headerlink" title="ç¬¬ä¸€ç‰ˆï¼š"></a>ç¬¬ä¸€ç‰ˆï¼š</h4><p>æ—¶é—´å¤æ‚åº¦åˆ†æï¼šO(n)</p><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     public int val;</span></span><br><span class="line"><span class="comment"> *     public ListNode next;</span></span><br><span class="line"><span class="comment"> *     public ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">GetDecimalValue</span>(<span class="params">ListNode head</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è¿½åŠ åˆ¤æ–­ï¼Œé¢˜ç›®ä¸­æ˜¯é“¾è¡¨ä¸ä¸ºç©ºï¼Œæ‰€ä»¥å…¶å®å¹¶ä¸éœ€è¦ï¼Œä½†æ˜¯ä¸ºäº†å…»æˆå¥½çš„ä»£ç ä¹ æƒ¯ï¼Œè¿˜æ˜¯åŠ ä¸Šäº†</span></span><br><span class="line">        <span class="keyword">if</span>(head==<span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">string</span> str = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">var</span> current = head;</span><br><span class="line">        <span class="keyword">while</span> (current != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            str += current.val.ToString();</span><br><span class="line">            current = current.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Convert.ToInt32(str,<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬äºŒç‰ˆï¼š-1"><a href="#ç¬¬äºŒç‰ˆï¼š-1" class="headerlink" title="ç¬¬äºŒç‰ˆï¼š"></a>ç¬¬äºŒç‰ˆï¼š</h4><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     public int val;</span></span><br><span class="line"><span class="comment"> *     public ListNode next;</span></span><br><span class="line"><span class="comment"> *     public ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">GetDecimalValue</span>(<span class="params">ListNode head</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(head!=<span class="literal">null</span>)&#123;</span><br><span class="line">            ans = ans * <span class="number">2</span> + head.val;</span><br><span class="line">            head = head.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="206-åè½¬é“¾è¡¨"><a href="#206-åè½¬é“¾è¡¨" class="headerlink" title="206. åè½¬é“¾è¡¨"></a>206. åè½¬é“¾è¡¨</h2><p>åœ°å€ï¼š<a href="https://leetcode-cn.com/problems/reverse-linked-list/" rel="external nofollow noopener noreferrer" target="_blank">https://leetcode-cn.com/problems/reverse-linked-list/</a></p><p>ä»£ç ï¼š<a href="http://suo.im/6e32hZ" rel="external nofollow noopener noreferrer" target="_blank">http://suo.im/6e32hZ</a></p><h3 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>åè½¬ä¸€ä¸ªå•é“¾è¡¨</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL</span><br><span class="line">è¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</span><br></pre></td></tr></table></figure><h3 id="è§£é¢˜æ€è·¯-2"><a href="#è§£é¢˜æ€è·¯-2" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><h4 id="ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆååº”æƒ³åˆ°çš„"><a href="#ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆååº”æƒ³åˆ°çš„" class="headerlink" title="ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆååº”æƒ³åˆ°çš„"></a>ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆååº”æƒ³åˆ°çš„</h4><p>æ—¶é—´å¤æ‚åº¦ï¼š<strong>O(n^2)</strong></p><p>çœ‹åˆ°é¢˜ç›®ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„æ–¹å¼ï¼Œé¦–å…ˆå°†æ¯ä¸ªå€¼æ‹¿å‡ºæ¥ï¼Œç„¶åå†å°†å­˜æ”¾çš„æ•°ç»„åè½¬ä¸‹ï¼Œåœ¨æ„å»ºæ–°çš„é“¾è¡¨ã€‚</p><p>æ–¹å¼æ¯”è¾ƒå·®åŠ²ï¼Œåç»­æ”¹è¿›äº†ä¸‹</p><h4 id="ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼"><a href="#ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼" class="headerlink" title="ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼"></a>ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼</h4><p>é¢˜ç›®æè¿°ä¸­ï¼Œè¯´å¯ä»¥ä½¿ç”¨è¿­ä»£å’Œé€’å½’æ–¹å¼è¿›è¡Œã€‚</p><p>åˆ›å»ºä¸ªå‡½æ•°ï¼Œå¤„ç†æ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹èµ‹å€¼æ–°çš„èŠ‚ç‚¹ï¼Œç„¶åå°†ä¼ é€’è¿›æ¥çš„èŠ‚ç‚¹èµ‹å€¼åˆ°æ–°çš„èŠ‚ç‚¹çš„ next ä¸Šï¼Œå¹¶ä¸”ä¼ é€’ä¸‹ä¸ªé€’å½’ï¼Œå±‚å±‚ä¸‹å»</p><p>å½“æŒ‰é¡ºåºä¼ é€’è¿›å»çš„èŠ‚ç‚¹çš„ next ä¸º null æ—¶ï¼Œè¿”å›æœ€åèŠ‚ç‚¹ã€‚</p><h4 id="ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼"><a href="#ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼" class="headerlink" title="ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼"></a>ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼</h4><p>è¿™ä¸ªæ–¹å¼è·‘äº†ä¸¤éï¼Œç¬¬ä¸€é 120 æ¯«ç§’å·¦å³ï¼Œç¬¬äºŒéè·‘äº† 104 æ¯«ç§’ O(âˆ©_âˆ©)O ğŸ˜„ ã€‚</p><p>è¿­ä»£æ˜¯ä¸€ç§ä¸æ–­ç”¨å˜é‡çš„æ—§å€¼é€’æ¨å‡ºæ–°å€¼çš„è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚</p><p>æ‰€ä»¥åœ¨ while å¾ªç¯é“¾è¡¨æ—¶ï¼Œå°†å½“å‰æ—§å€¼èµ‹å€¼ç»™æ–°çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†æ–°çš„èŠ‚ç‚¹ next æŒ‡å‘ prev</p><p>æœ€ååœ¨åå‘èµ‹å€¼ä¸‹ï¼Œå°†ä¸´æ—¶çš„èµ‹å€¼ç»™ prev</p><p>å°† head èµ‹å€¼ä¸º head.nextï¼Œç»§ç»­å¾ªç¯ï¼Œç›´åˆ°ä¸º null</p><h3 id="ä»£ç -2"><a href="#ä»£ç -2" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><h4 id="ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆæƒ³åˆ°çš„ï¼Œæ¯”è¾ƒå·®"><a href="#ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆæƒ³åˆ°çš„ï¼Œæ¯”è¾ƒå·®" class="headerlink" title="ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆæƒ³åˆ°çš„ï¼Œæ¯”è¾ƒå·®"></a>ç¬¬ä¸€ç‰ˆï¼šé¦–å…ˆæƒ³åˆ°çš„ï¼Œæ¯”è¾ƒå·®</h4><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">ReverseList</span>(<span class="params">ListNode head</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// æ™®é€šæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">if</span> (head==<span class="literal">null</span> || head.next ==<span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> head;</span><br><span class="line">    &#125;</span><br><span class="line">    List&lt;<span class="keyword">int</span>&gt; intList = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        intList.Add(head.val);</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    intList.Reverse();</span><br><span class="line">    <span class="keyword">var</span> newListNode = <span class="keyword">new</span> ListNode(intList[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; intList.Count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> tempNode = <span class="keyword">new</span> ListNode(intList[i])</span><br><span class="line">        &#123;</span><br><span class="line">            next = <span class="literal">null</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">var</span> temp = newListNode;</span><br><span class="line">        <span class="keyword">while</span> (temp.next != <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            temp = temp.next;</span><br><span class="line">        &#125;</span><br><span class="line">        temp.next = tempNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newListNode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼-1"><a href="#ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼-1" class="headerlink" title="ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼"></a>ç¬¬äºŒç‰ˆï¼šé€’å½’æ–¹å¼</h4><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">ReverseList2</span>(<span class="params">ListNode head</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// é€’å½’æ–¹å¼è§£å†³</span></span><br><span class="line">    <span class="keyword">return</span> GetReverse(head, <span class="literal">null</span>);</span><br><span class="line">    <span class="function">ListNode <span class="title">GetReverse</span>(<span class="params">ListNode current,ListNode res</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (current == <span class="literal">null</span>) <span class="keyword">return</span> res;</span><br><span class="line">        ListNode newNode = <span class="keyword">new</span> ListNode(current.val);</span><br><span class="line">        newNode.next = res;</span><br><span class="line">        <span class="keyword">return</span> GetReverse(current.next, newNode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼-1"><a href="#ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼-1" class="headerlink" title="ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼"></a>ç¬¬ä¸‰ç‰ˆï¼šè¿­ä»£æ–¹å¼</h4><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">ReverseList3</span>(<span class="params">ListNode head</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// è¿­ä»£æ–¹å¼è§£å†³</span></span><br><span class="line">    ListNode prev = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="literal">null</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å°†å½“å‰çš„èµ‹å€¼åˆ°temp</span></span><br><span class="line">        <span class="comment">// å°†tempå¼•ç”¨æ”¹ä¸ºprev</span></span><br><span class="line">        <span class="keyword">var</span> temp = <span class="keyword">new</span> ListNode(head.val)</span><br><span class="line">        &#123;</span><br><span class="line">            next = prev</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// å†å°†tempèµ‹å€¼åˆ°prevï¼Œè¦†ç›–æ‰</span></span><br><span class="line">        prev = temp;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>O(âˆ©_âˆ©)O ğŸ˜„ è¿™ä¸ªæ–¹å¼è·‘äº†ä¸¤éï¼Œç¬¬ä¸€é 120 æ¯«ç§’å·¦å³ï¼Œç¬¬äºŒéè·‘äº† 104 æ¯«ç§’ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>leetcode</tag>
      </tags>
  </entry>
  <entry>
    <title>åå¤§ç»å…¸æ’åºç®—æ³•</title>
    <url>/posts/827ca9cd/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>åå¤§ç»å…¸æ’åºç®—æ³•</p></blockquote><a id="more"></a><blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="https://www.cnblogs.com/onepixel/articles/7674659.html" rel="external nofollow noopener noreferrer" target="_blank">https://www.cnblogs.com/onepixel/articles/7674659.html</a></p></blockquote><h2 id="ç®—æ³•æ¦‚è¿°"><a href="#ç®—æ³•æ¦‚è¿°" class="headerlink" title="ç®—æ³•æ¦‚è¿°"></a>ç®—æ³•æ¦‚è¿°</h2><h3 id="ç®—æ³•åˆ†ç±»"><a href="#ç®—æ³•åˆ†ç±»" class="headerlink" title="ç®—æ³•åˆ†ç±»"></a>ç®—æ³•åˆ†ç±»</h3><p>åç§å¸¸è§æ’åºç®—æ³•å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p><ul><li>æ¯”è¾ƒç±»æ’åºï¼šé€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸èƒ½çªç ´ O(nlogn)ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºéçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åºã€‚</li><li>éæ¯”è¾ƒç±»æ’åºï¼šä¸é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œå®ƒå¯ä»¥çªç ´åŸºäºæ¯”è¾ƒæ’åºçš„æ—¶é—´ä¸‹ç•Œï¼Œä»¥çº¿æ€§æ—¶é—´è¿è¡Œï¼Œå› æ­¤ä¹Ÿç§°ä¸ºçº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åºã€‚</li></ul><img src="/posts/827ca9cd/si-wei-dao-tu.png" title="åˆ†ç±»"><h3 id="ç®—æ³•å¤æ‚åº¦"><a href="#ç®—æ³•å¤æ‚åº¦" class="headerlink" title="ç®—æ³•å¤æ‚åº¦"></a>ç®—æ³•å¤æ‚åº¦</h3><table><thead><tr><th>æ’åºæ–¹æ³•</th><th>æ—¶é—´å¤æ‚åº¦(å¹³å‡)</th><th>æ—¶é—´å¤æ‚åº¦(æœ€å)</th><th>æ—¶é—´å¤æ‚åº¦(æœ€å¥½)</th><th>ç©ºé—´å¤æ‚åº¦</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td>å†’æ³¡æ’åº</td><td>O(n<sup>2</sup>)</td><td>O(n<sup>2</sup>)</td><td>O(n)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>æ’å…¥æ’åº</td><td>O(n<sup>2</sup>)</td><td>O(n<sup>2</sup>)</td><td>O(n)</td><td>O(1)</td><td>ç¨³å®š</td></tr><tr><td>é€‰æ‹©æ’åº</td><td>O(n<sup>2</sup>)</td><td>O(n<sup>2</sup>)</td><td>O(n<sup>2</sup>)</td><td>O(1)</td><td>ä¸ç¨³å®š</td></tr></tbody></table><h3 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h3><ul><li>ç¨³å®šæ€§ï¼šå¦‚æœå¾…æ’åºçš„åºåˆ—ä¸­å­˜åœ¨å€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œç»è¿‡æ’åºä¹‹åï¼Œç›¸ç­‰å…ƒç´ ä¹‹é—´åŸæœ‰çš„å…ˆåé¡ºåºä¸å˜ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼šå¯¹æ’åºæ•°æ®çš„æ€»çš„æ“ä½œæ¬¡æ•°ã€‚åæ˜ å½“ n å˜åŒ–æ—¶ï¼Œæ“ä½œæ¬¡æ•°å‘ˆç°ä»€ä¹ˆè§„å¾‹ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šæ˜¯æŒ‡ç®—æ³•åœ¨è®¡ç®—æœºå†…æ‰§è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´çš„åº¦é‡ï¼Œå®ƒä¹Ÿæ˜¯æ•°æ®è§„æ¨¡ n çš„å‡½æ•°ã€‚</li></ul><h2 id="å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h2><p>å†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠå®ƒä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><h3 id="ç®—æ³•æè¿°"><a href="#ç®—æ³•æè¿°" class="headerlink" title="ç®—æ³•æè¿°"></a>ç®—æ³•æè¿°</h3><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢å®ƒä»¬ä¸¤ä¸ªï¼›</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œè¿™æ ·åœ¨æœ€åçš„å…ƒç´ åº”è¯¥ä¼šæ˜¯æœ€å¤§çš„æ•°ï¼›</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼›</li><li>é‡å¤æ­¥éª¤ 1~3ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚</li></ol><h3 id="åŠ¨å›¾æ¼”ç¤º"><a href="#åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="åŠ¨å›¾æ¼”ç¤º"></a>åŠ¨å›¾æ¼”ç¤º</h3><img src="/posts/827ca9cd/BubbleSort.gif" title="å†’æ³¡æ’åºåŠ¨å›¾"><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleSort</span>(<span class="params">numberList</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = numberList.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; len - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (numberList[j] &gt; numberList[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="comment">// ç›¸é‚»å…ƒç´ ä¸¤ä¸¤å¯¹æ¯”</span></span><br><span class="line">                <span class="keyword">const</span> tempSwapSpace = numberList[j + <span class="number">1</span>]; <span class="comment">// å…ƒç´ äº¤æ¢</span></span><br><span class="line">                numberList[j + <span class="number">1</span>] = numberList[j];</span><br><span class="line">                numberList[j] = tempSwapSpace;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numberList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a>é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h2><p>é€‰æ‹©æ’åº(Selection Sort)æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†ï¼šé¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</p><h3 id="ç®—æ³•æè¿°-1"><a href="#ç®—æ³•æè¿°-1" class="headerlink" title="ç®—æ³•æè¿°"></a>ç®—æ³•æè¿°</h3><p>n ä¸ªè®°å½•çš„ç›´æ¥é€‰æ‹©æ’åºå¯ç»è¿‡ n-1 è¶Ÿç›´æ¥é€‰æ‹©æ’åºå¾—åˆ°æœ‰åºç»“æœã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><ul><li>åˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸º R[1..n]ï¼Œæœ‰åºåŒºä¸ºç©ºï¼›</li><li>ç¬¬ i è¶Ÿæ’åº(i=1,2,3â€¦n-1)å¼€å§‹æ—¶ï¼Œå½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸º R[1..i-1]å’Œ R(i..nï¼‰ã€‚è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­-é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R[k]ï¼Œå°†å®ƒä¸æ— åºåŒºçš„ç¬¬ 1 ä¸ªè®°å½• R äº¤æ¢ï¼Œä½¿ R[1..i]å’Œ R[i+1..n)åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ  1 ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘ 1 ä¸ªçš„æ–°æ— åºåŒºï¼›</li><li>n-1 è¶Ÿç»“æŸï¼Œæ•°ç»„æœ‰åºåŒ–äº†ã€‚</li></ul><h3 id="åŠ¨å›¾æ¼”ç¤º-1"><a href="#åŠ¨å›¾æ¼”ç¤º-1" class="headerlink" title="åŠ¨å›¾æ¼”ç¤º"></a>åŠ¨å›¾æ¼”ç¤º</h3><img src="/posts/827ca9cd/SelectionSort.gif" title="é€‰æ‹©æ’åºåŠ¨å›¾"><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectionSort</span>(<span class="params">numberList</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = numberList.length;</span><br><span class="line">    <span class="keyword">let</span> minIndex, tempSwapSpace;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        minIndex = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (numberList[j] &lt; numberList[minIndex]) &#123;</span><br><span class="line">                <span class="comment">// å¯»æ‰¾æœ€å°çš„æ•°</span></span><br><span class="line">                minIndex = j; <span class="comment">// å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        tempSwapSpace = numberList[i];</span><br><span class="line">        numberList[i] = numberList[minIndex];</span><br><span class="line">        numberList[minIndex] = tempSwapSpace;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numberList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç®—æ³•åˆ†æ"><a href="#ç®—æ³•åˆ†æ" class="headerlink" title="ç®—æ³•åˆ†æ"></a>ç®—æ³•åˆ†æ</h3><p>è¡¨ç°æœ€ç¨³å®šçš„æ’åºç®—æ³•ä¹‹ä¸€ï¼Œå› ä¸ºæ— è®ºä»€ä¹ˆæ•°æ®è¿›å»éƒ½æ˜¯ O(n<sup>2</sup>) çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥ç”¨åˆ°å®ƒçš„æ—¶å€™ï¼Œæ•°æ®è§„æ¨¡è¶Šå°è¶Šå¥½ã€‚å”¯ä¸€çš„å¥½å¤„å¯èƒ½å°±æ˜¯ä¸å ç”¨é¢å¤–çš„å†…å­˜ç©ºé—´äº†å§ã€‚ç†è®ºä¸Šè®²ï¼Œé€‰æ‹©æ’åºå¯èƒ½ä¹Ÿæ˜¯å¹³æ—¶æ’åºä¸€èˆ¬äººæƒ³åˆ°çš„æœ€å¤šçš„æ’åºæ–¹æ³•äº†å§ã€‚</p><h2 id="æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a>æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h2><p>æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰çš„ç®—æ³•æè¿°æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚</p><h3 id="ç®—æ³•æè¿°-2"><a href="#ç®—æ³•æè¿°-2" class="headerlink" title="ç®—æ³•æè¿°"></a>ç®—æ³•æè¿°</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æ’åºéƒ½é‡‡ç”¨ in-place åœ¨æ•°ç»„ä¸Šå®ç°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p><ol><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼›</li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼›</li><li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼›</li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼›</li><li>é‡å¤æ­¥éª¤ 2~5ã€‚</li></ol><h3 id="åŠ¨å›¾æ¼”ç¤º-2"><a href="#åŠ¨å›¾æ¼”ç¤º-2" class="headerlink" title="åŠ¨å›¾æ¼”ç¤º"></a>åŠ¨å›¾æ¼”ç¤º</h3><img src="/posts/827ca9cd/InsertionSort.gif" title="æ’å…¥æ’åºåŠ¨å›¾"><h3 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertionSort</span>(<span class="params">numberList</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> len = numberList.length;</span><br><span class="line">    <span class="keyword">let</span> preIndex, current;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">        preIndex = i - <span class="number">1</span>;</span><br><span class="line">        current = numberList[i];</span><br><span class="line">        <span class="keyword">while</span> (preIndex &gt;= <span class="number">0</span> &amp;&amp; numberList[preIndex] &gt; current) &#123;</span><br><span class="line">            numberList[preIndex + <span class="number">1</span>] = numberList[preIndex];</span><br><span class="line">            preIndex--;</span><br><span class="line">        &#125;</span><br><span class="line">        numberList[preIndex + <span class="number">1</span>] = current;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> numberList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç®—æ³•åˆ†æ-1"><a href="#ç®—æ³•åˆ†æ-1" class="headerlink" title="ç®—æ³•åˆ†æ"></a>ç®—æ³•åˆ†æ</h3><p>æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨ in-place æ’åºï¼ˆå³åªéœ€ç”¨åˆ° O(1)çš„é¢å¤–ç©ºé—´çš„æ’åºï¼‰ï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>js å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</title>
    <url>/posts/c0f17b1f/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>JavaScript å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</p></blockquote><a id="more"></a><blockquote><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒæŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚</p></blockquote><h2 id="ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–"></a>ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–ä»ä¸€é“é¢è¯•é¢˜è°ˆè°ˆå‡½æ•°æŸ¯é‡ŒåŒ–</h2><blockquote><p>é¢˜ç›®ï¼šä½¿ç”¨ js å®ç° add(1)(2)(3)(4) è¿”å› 10</p></blockquote><p>å‡½æ•°æŸ¯é‡ŒåŒ–è¦æ±‚å¤šä¸ªå‚æ•°è½¬ä¸ºå•ä¸€å‚æ•°ï¼Œæ‰€ä»¥ç›¸å½“äº</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨ï¼šadd(1, 2, 3, 4) =&gt; [1, 2, 3, 4]</span></span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºä¸‹é¢å½¢å¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCurrying</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è°ƒç”¨ï¼šaddCurrying(1)(2)(3)(4) =&gt; [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure><h2 id="é—­åŒ…æ‹¿å‚æ•°"><a href="#é—­åŒ…æ‹¿å‚æ•°" class="headerlink" title="é—­åŒ…æ‹¿å‚æ•°"></a>é—­åŒ…æ‹¿å‚æ•°</h2><p>é—­åŒ…ï¼šå®šä¹‰åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å‡½æ•°ï¼Œé™æ€ä¿å­˜æ‰€æœ‰äº†çˆ¶çº§ä½œç”¨åŸŸçš„å†…éƒ¨å‡½æ•°ã€‚æ‰€ä»¥æ¯æ¬¡çš„å€¼å¯ä»¥ä¿å­˜ä½ï¼Œåˆ°äº†æœ€åå¯ä»¥å…¨éƒ¨è®¿é—®åˆ°</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆæ¥ä¸€ä¸ªé—­åŒ…æ¥æ‹¿å–åˆ°æ‰€æœ‰å‚æ•°</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    result.push(value);</span><br><span class="line">    <span class="comment">// _add å‡½æ•°å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œæ‹¿å–åˆ°çˆ¶çº§ä½œç”¨åŸŸçš„å€¼ï¼Œå› ä¸º_addå‡½æ•°å·²è·å–åˆ°çˆ¶çº§æ•°æ®ï¼Œæ‰€ä»¥çˆ¶çº§ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰é‡Šæ”¾</span></span><br><span class="line">    <span class="keyword">var</span> _add = <span class="function"><span class="keyword">function</span> (<span class="params">value2</span>) </span>&#123;</span><br><span class="line">        result.push(value);</span><br><span class="line">        <span class="keyword">return</span> _add;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// æ­¤æ–¹æ³•è°ƒç”¨è¿”å›æ•°ç»„</span></span><br><span class="line">    _add.getResult = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> _add;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·é€šè¿‡ä¸Šé¢å‡½æ•°å°±å¯ä»¥å®ç°åŸºæœ¬çš„æŸ¯é‡ŒåŒ–è¦æ±‚</p><p>æ‰§è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// addCurrying(1)(2)(3)(4).getResult =&gt; [1, 2, 3, 4]</span></span><br><span class="line"><span class="comment">// addCurrying(1)(2)(3)(4)</span></span><br><span class="line"><span class="comment">// =&gt;</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Æ’ (value2) &#123;</span></span><br><span class="line"><span class="comment">    result.push(value);</span></span><br><span class="line"><span class="comment">    return _add;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="é‡å†™å†…ç½®å‡½æ•°è¿”å›ç»“æœ"><a href="#é‡å†™å†…ç½®å‡½æ•°è¿”å›ç»“æœ" class="headerlink" title="é‡å†™å†…ç½®å‡½æ•°è¿”å›ç»“æœ"></a>é‡å†™å†…ç½®å‡½æ•°è¿”å›ç»“æœ</h2><p>ä¸Šé¢çš„ä»£ç è™½ç„¶å·²ç»è·å–åˆ°æ‰€æœ‰çš„å‚æ•°ï¼Œä½†æ˜¯è¿”å›ç»“æœå¹¶æ²¡æœ‰è‡ªåŠ¨è¿”å›ï¼Œè€Œæ˜¯éœ€è¦è°ƒç”¨å‡½æ•°æ‰è¿”å›ã€‚</p><p>å¹¶ä¸”ç”±äºä¸çŸ¥é“å‚æ•°é•¿åº¦ï¼Œä¹Ÿå°±æ— æ³•é€šè¿‡å‚æ•°æ•°ç»„é•¿åº¦æ¥åŠæ—¶è¿”å›ç»“æœã€‚</p><p>é‚£ä¹ˆæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è§£å†³å‘¢ï¼ŸğŸ¤”</p><p>å½“ç„¶æœ‰äº†ï¼Œåœ¨ js ä¸­å‡½æ•°æ˜¯æœ‰åŸå‹é“¾çš„ï¼Œæ‰€ä»¥æ¯ä¸ªå‡½æ•°éƒ½ç»§æ‰¿äº†åŸºæœ¬çš„ä¸€äº›æ–¹æ³•ã€‚</p><p>å½“ä½ å®šä¹‰ä¸€ä¸ªå‡½æ•°åï¼Œä½ å¦‚æœæ‰“å°æ—¶åªè¾“å…¥å‡½æ•°åï¼Œå¹¶ä¸æ‰§è¡Œï¼Œåˆ™å‡½æ•°å†…éƒ¨ä¿¡æ¯å°±è¢«æ‰“å°å‡ºæ¥ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œæ¥åœ¨ç»“æŸåæ‰§è¡Œã€‚</p><p>å‡½æ•°çš„ <code>toString</code> æ–¹æ³•å¯ä»¥æ‰“å°å‡½æ•°ä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¹é€ ä¸‹ï¼Œè®© <code>toString</code> è¿”å›ç»“æœ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°è¿›è¡ŒåŸºæœ¬å¤„ç†</span></span><br><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªä¿å­˜æ‰€æœ‰ä¼ å…¥çš„å‚æ•°çš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">var</span> result = [];</span><br><span class="line">    <span class="comment">// å°†ç¬¬ä¸€ä¸ªä¼ å…¥çš„å‚æ•°æ”¾ç½®è¿›å»</span></span><br><span class="line">    result.push(value);</span><br><span class="line">    <span class="comment">// å®šä¹‰å‡½æ•° _add å¼•ç”¨resultå˜é‡ï¼Œä½¿å…¶ä¿æŒä¸è¢«é”€æ¯æ‰</span></span><br><span class="line">    <span class="keyword">var</span> _add = <span class="function"><span class="keyword">function</span> (<span class="params">subValue</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// å°†å‚æ•°pushè¿›å…¥resultä¸­å»</span></span><br><span class="line">        result.push(subValue);</span><br><span class="line">        <span class="comment">// è¿”å›å‡½æ•° _add è¿›è¡Œä¸‹æ¬¡ä¸€è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">return</span> _add;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// å°†åŸç”Ÿè‡ªå¸¦çš„toString è¿›è¡Œé‡å†™</span></span><br><span class="line">    _add.toString = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// è¿”å› _add å‡½æ•°è¿›è¡Œä¸‹æ¬¡è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">return</span> _add;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ</p><ul><li><code>add(1)</code> =&gt; <code>[1]</code></li><li><code>add(1)(2)</code> =&gt; <code>[1,2]</code></li><li><code>add(1)(2)(3)</code> =&gt; <code>[1,2,3]</code></li></ul><img src="/posts/c0f17b1f/screenshot_1535697196480.png" title="å‡½æ•°æ‰§è¡Œæµç¨‹å›¾"><h2 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h2><p>é€šè¿‡ä¸Šé¢çš„ç ”ç©¶ï¼Œè§£å†³ä¸€ä¸ªå‡½æ•°æŸ¯é‡ŒåŒ–é—®é¢˜ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Function</tag>
        <tag>Currying</tag>
      </tags>
  </entry>
  <entry>
    <title>choco å®‰è£… å’Œ mkcert æœ¬åœ°https</title>
    <url>/posts/4cb12659/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>choco å®‰è£… å’Œ mkcert æœ¬åœ° https</p></blockquote><a id="more"></a><h2 id="Choco"><a href="#Choco" class="headerlink" title="Choco"></a>Choco</h2><h3 id="å‘½ä»¤è¡Œå®‰è£…"><a href="#å‘½ä»¤è¡Œå®‰è£…" class="headerlink" title="å‘½ä»¤è¡Œå®‰è£…"></a>å‘½ä»¤è¡Œå®‰è£…</h3><p>ç›´æ¥æ‹·è´æ‰§è¡Œå³å¯ï¼Œæ³¨æ„éœ€è¦<strong>ç®¡ç†å‘˜èº«ä»½</strong>è¿è¡Œ</p><p><code>cmd</code> å®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">@"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" &amp;&amp; SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"</span><br></pre></td></tr></table></figure><p><code>PowerShell</code> å®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))</span><br></pre></td></tr></table></figure><h3 id="æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ"><a href="#æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ" class="headerlink" title="æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ"></a>æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">choco -v</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®å®‰è£…è·¯å¾„"><a href="#è®¾ç½®å®‰è£…è·¯å¾„" class="headerlink" title="è®¾ç½®å®‰è£…è·¯å¾„"></a>è®¾ç½®å®‰è£…è·¯å¾„</h3><img src="/posts/4cb12659/chocolatey-install-path-config.png" title="chocoå®‰è£…è·¯å¾„"><p>ä¿®æ”¹è·¯å¾„åï¼Œéœ€è¦æ·»åŠ å®‰è£…è·¯å¾„ä¸‹çš„<code>bin</code>ç›®å½•åˆ°<code>path</code>ç¯å¢ƒä¸­ã€‚</p><p>æœ‰æ—¶å®‰è£…å®Œæ¯•åï¼Œä¸‹è½½çš„è½¯ä»¶æ— æ³•ä½¿ç”¨ï¼Œæœ‰å¯èƒ½æ˜¯<code>bin</code>ç›®å½•æ²¡æœ‰åœ¨<code>path</code>ç¯å¢ƒä¸­ã€‚</p><h3 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h3><p><a href="https://chocolatey.org/docs/commands-reference" rel="external nofollow noopener noreferrer" target="_blank">Commands</a></p><ul><li>choco list -li æŸ¥çœ‹æœ¬åœ°å®‰è£…çš„è½¯ä»¶</li><li>choco search nodejs æŸ¥æ‰¾å®‰è£…åŒ…</li><li>choco install sublimetext3 ä¸‹è½½</li><li>choco uninstall sublimetext3 å¸è½½</li><li>choco upgrade sublimetext3 æ›´æ–°ï¼ˆupdateï¼‰</li></ul><h2 id="mkcert"><a href="#mkcert" class="headerlink" title="mkcert"></a>mkcert</h2><p>mkcert æ˜¯ä¸€ä¸ªä½¿ç”¨ go è¯­è¨€ç¼–å†™çš„ç”Ÿæˆæœ¬åœ°è‡ªç­¾è¯ä¹¦çš„å°ç¨‹åºï¼Œå…·æœ‰è·¨å¹³å°ï¼Œä½¿ç”¨ç®€å•ï¼Œæ”¯æŒå¤šåŸŸåï¼Œè‡ªåŠ¨ä¿¡ä»» CA ç­‰ä¸€ç³»åˆ—æ–¹ä¾¿çš„ç‰¹æ€§å¯ä¾›æœ¬åœ°å¼€å‘æ—¶å¿«é€Ÿåˆ›å»º https ç¯å¢ƒä½¿ç”¨ã€‚</p><h3 id="å®‰è£…-mkcert"><a href="#å®‰è£…-mkcert" class="headerlink" title="å®‰è£… mkcert"></a>å®‰è£… mkcert</h3><p>å®‰è£…æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼Œç”±äº go è¯­è¨€çš„é™æ€ç¼–è¯‘å’Œè·¨å¹³å°çš„ç‰¹æ€§ï¼Œå®˜æ–¹æä¾›å„å¹³å°é¢„ç¼–è¯‘çš„ç‰ˆæœ¬ï¼Œç›´æ¥ä¸‹è½½åˆ°æœ¬åœ°ï¼Œç»™å¯æ‰§è¡Œæƒé™(Linux/Unix éœ€è¦)å°±å¯ä»¥äº†ã€‚ä¸‹è½½åœ°å€: <a href="https://github.com/FiloSottile/mkcert/releases/latest" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/FiloSottile/mkcert/releases/latest</a></p><p>æ­¤å¤–ï¼Œmkcert å·²ç»æ¨é€è‡³ Homebrew, MacPorts, Linuxbrew, Chocolatey, Scoop ç­‰åŒ…ç®¡ç†å¹³å°ä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å€ŸåŠ©å¯¹åº”çš„åŒ…ç®¡ç†å¹³å°å®‰è£…ã€‚å¦‚:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">choco install mkcert</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸåï¼Œåº”è¯¥å¯ä»¥ä½¿ç”¨ mkcert å‘½ä»¤äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">PS C:\Users\abcfy\projects&gt; mkcert</span><br><span class="line">Using the local CA at &quot;C:\Users\abcfy\AppData\Local\mkcert&quot; âœ¨</span><br><span class="line">Usage of mkcert:</span><br><span class="line"></span><br><span class="line">        $ mkcert -install</span><br><span class="line">        Install the local CA in the system trust store.</span><br><span class="line"></span><br><span class="line">        $ mkcert example.org</span><br><span class="line">        Generate &quot;example.org.pem&quot; and &quot;example.org-key.pem&quot;.</span><br><span class="line"></span><br><span class="line">        $ mkcert example.com myapp.dev localhost 127.0.0.1 ::1</span><br><span class="line">        Generate &quot;example.com+4.pem&quot; and &quot;example.com+4-key.pem&quot;.</span><br><span class="line"></span><br><span class="line">        $ mkcert &quot;*.example.it&quot;</span><br><span class="line">        Generate &quot;_wildcard.example.it.pem&quot; and &quot;_wildcard.example.it-key.pem&quot;.</span><br><span class="line"></span><br><span class="line">        $ mkcert -uninstall</span><br><span class="line">        Uninstall the local CA (but do not delete it).</span><br><span class="line"></span><br><span class="line">For more options, run &quot;mkcert -help&quot;.</span><br></pre></td></tr></table></figure><h3 id="mkcert-åŸºæœ¬ä½¿ç”¨"><a href="#mkcert-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="mkcert åŸºæœ¬ä½¿ç”¨"></a>mkcert åŸºæœ¬ä½¿ç”¨</h3><p>ä»ä¸Šé¢è‡ªå¸¦çš„å¸®åŠ©è¾“å‡ºæ¥çœ‹ï¼Œmkcert å·²ç»ç»™å‡ºäº†ä¸€ä¸ªåŸºæœ¬çš„å·¥ä½œæµï¼Œè§„é¿äº†ç¹æ‚çš„ openssl å‘½ä»¤ï¼Œå‡ ä¸ªç®€å•çš„å‚æ•°å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªæœ¬åœ°å¯ä¿¡çš„ https è¯ä¹¦äº†ã€‚æ›´è¯¦ç»†çš„ç”¨æ³•ç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£å°±å¥½ã€‚</p><h4 id="å°†-CA-è¯ä¹¦åŠ å…¥æœ¬åœ°å¯ä¿¡-CA"><a href="#å°†-CA-è¯ä¹¦åŠ å…¥æœ¬åœ°å¯ä¿¡-CA" class="headerlink" title="å°† CA è¯ä¹¦åŠ å…¥æœ¬åœ°å¯ä¿¡ CA"></a>å°† CA è¯ä¹¦åŠ å…¥æœ¬åœ°å¯ä¿¡ CA</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$ mkcert -install</span><br><span class="line">Using the local CA at &quot;C:\Users\abcfy\AppData\Local\mkcert&quot; âœ¨</span><br></pre></td></tr></table></figure><p>ä»…ä»…è¿™ä¹ˆä¸€æ¡ç®€å•çš„å‘½ä»¤ï¼Œå°±å¸®åŠ©æˆ‘ä»¬å°† mkcert ä½¿ç”¨çš„æ ¹è¯ä¹¦åŠ å…¥äº†æœ¬åœ°å¯ä¿¡ CA ä¸­ï¼Œä»¥åç”±è¯¥ CA ç­¾å‘çš„è¯ä¹¦åœ¨æœ¬åœ°éƒ½æ˜¯å¯ä¿¡çš„ã€‚</p><p>åœ¨ Windows çš„å¯ä¿¡ CA åˆ—è¡¨å¯ä»¥æ‰¾åˆ°è¯¥è¯ä¹¦</p><h4 id="ç”Ÿæˆè‡ªç­¾è¯ä¹¦"><a href="#ç”Ÿæˆè‡ªç­¾è¯ä¹¦" class="headerlink" title="ç”Ÿæˆè‡ªç­¾è¯ä¹¦"></a>ç”Ÿæˆè‡ªç­¾è¯ä¹¦</h4><p>ç”Ÿæˆè‡ªç­¾è¯ä¹¦çš„å‘½ä»¤ååˆ†ç®€å•:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkcert domain1 [domain2 [...]]</span><br></pre></td></tr></table></figure><p>ç›´æ¥è·Ÿå¤šä¸ªè¦ç­¾å‘çš„åŸŸåæˆ– ip å°±è¡Œäº†ï¼Œæ¯”å¦‚ç­¾å‘ä¸€ä¸ªä»…æœ¬æœºè®¿é—®çš„è¯ä¹¦(å¯ä»¥é€šè¿‡ 127.0.0.1 å’Œ localhostï¼Œä»¥åŠ ipv6 åœ°å€::1 è®¿é—®)</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkcert localhost 127.0.0.1 ::1</span><br><span class="line">Using the local CA at &quot;C:\Users\abcfy\AppData\Local\mkcert&quot; âœ¨</span><br><span class="line"></span><br><span class="line">Created a new certificate valid for the following names ğŸ“œ</span><br><span class="line"> - &quot;localhost&quot;</span><br><span class="line"> - &quot;127.0.0.1&quot;</span><br><span class="line"> - &quot;::1&quot;</span><br><span class="line"></span><br><span class="line">The certificate is at &quot;./localhost+2.pem&quot; and the key at &quot;./localhost+2-key.pem&quot; âœ…</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆåŠŸç”Ÿæˆäº† localhost+2.pem è¯ä¹¦æ–‡ä»¶å’Œ localhost+2-key.pem ç§é’¥æ–‡ä»¶ï¼Œåªè¦åœ¨ web server ä¸Šä½¿ç”¨è¿™ä¸¤ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ã€‚</p><p>é»˜è®¤ç”Ÿæˆçš„è¯ä¹¦æ ¼å¼ä¸º PEM(Privacy Enhanced Mail)æ ¼å¼ï¼Œä»»ä½•æ”¯æŒ PEM æ ¼å¼è¯ä¹¦çš„ç¨‹åºéƒ½å¯ä»¥ä½¿ç”¨ã€‚æ¯”å¦‚å¸¸è§çš„ Apache æˆ– Nginx ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•°æŒ‡å®šç”Ÿæˆçš„æ ¼å¼ï¼Œæ¯”å¦‚ windows çš„ pfx æ ¼å¼è¯ä¹¦</p><h4 id="é«˜çº§å‚æ•°"><a href="#é«˜çº§å‚æ•°" class="headerlink" title="é«˜çº§å‚æ•°"></a>é«˜çº§å‚æ•°</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-cert-file FILE, -key-file FILE, -p12-file FILE</span><br><span class="line">	Customize the output paths.</span><br><span class="line"></span><br><span class="line">-client</span><br><span class="line">	Generate a certificate for client authentication.</span><br><span class="line"></span><br><span class="line">-ecdsa</span><br><span class="line">	Generate a certificate with an ECDSA key.</span><br><span class="line"></span><br><span class="line">-pkcs12</span><br><span class="line">	Generate a &quot;.p12&quot; PKCS #12 file, also know as a &quot;.pfx&quot; file,</span><br><span class="line">	containing certificate and key for legacy applications.</span><br><span class="line"></span><br><span class="line">-csr CSR</span><br><span class="line">	Generate a certificate based on the supplied CSR. Conflicts with</span><br><span class="line">	all other flags and arguments except -install and -cert-file.</span><br></pre></td></tr></table></figure><h5 id="pem-è¯ä¹¦ç”Ÿæˆ"><a href="#pem-è¯ä¹¦ç”Ÿæˆ" class="headerlink" title="pem è¯ä¹¦ç”Ÿæˆ"></a>pem è¯ä¹¦ç”Ÿæˆ</h5><p>ä¸éœ€è¦é¢å¤–çš„ä»»ä½•æ“ä½œï¼Œä½¿ç”¨ <code>mkcert domain.com</code>ï¼Œå³å¯ç”Ÿæˆ <code>domain.com.pem</code> å’Œ <code>domain.com-key.pem</code></p><h5 id="pfx-è¯ä¹¦ç”Ÿæˆ"><a href="#pfx-è¯ä¹¦ç”Ÿæˆ" class="headerlink" title="pfx è¯ä¹¦ç”Ÿæˆ"></a>pfx è¯ä¹¦ç”Ÿæˆ</h5><p>å¯†ç ï¼šchangeit</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">C:\Users\albertxiao&gt;mkcert -pkcs12 *.example.com</span><br><span class="line">Using the local CA at &quot;C:\Users\albertxiao\AppData\Local\mkcert&quot; âœ¨</span><br><span class="line"></span><br><span class="line">Created a new certificate valid for the following names ğŸ“œ</span><br><span class="line"> - &quot;*.example.com&quot;</span><br><span class="line"></span><br><span class="line">Reminder: X.509 wildcards only go one level deep, so this won&apos;t match a.b.example.com â„¹ï¸</span><br><span class="line"></span><br><span class="line">The PKCS#12 bundle is at &quot;./_wildcard.example.com.p12&quot; âœ…</span><br><span class="line"></span><br><span class="line">The legacy PKCS#12 encryption password is the often hardcoded default &quot;changeit&quot; â„¹ï¸</span><br></pre></td></tr></table></figure><h5 id="crt-è¯ä¹¦"><a href="#crt-è¯ä¹¦" class="headerlink" title="crt è¯ä¹¦"></a>crt è¯ä¹¦</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkcert -key-file localhost.key -cert-file localhost.crt localhost</span><br></pre></td></tr></table></figure><h2 id="å±€åŸŸç½‘æ„å»º"><a href="#å±€åŸŸç½‘æ„å»º" class="headerlink" title="å±€åŸŸç½‘æ„å»º"></a>å±€åŸŸç½‘æ„å»º</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨å±€åŸŸç½‘å†…æµ‹è¯• https åº”ç”¨ï¼Œè¿™ç§ç¯å¢ƒå¯èƒ½ä¸å¯¹å¤–ï¼Œå› æ­¤ä¹Ÿæ— æ³•ä½¿ç”¨åƒ Letâ€™s encrypt è¿™ç§å…è´¹è¯ä¹¦çš„æ–¹æ¡ˆç»™å±€åŸŸç½‘ç­¾å‘ä¸€ä¸ªå¯ä¿¡çš„è¯ä¹¦ï¼Œè€Œä¸” Letâ€™s encrypt æœ¬èº«ä¹Ÿä¸æ”¯æŒè®¤è¯ Ipã€‚</p><p>å…ˆæ¥å›å¿†ä¸€ä¸‹è¯ä¹¦å¯ä¿¡çš„ä¸‰ä¸ªè¦ç´ :</p><ul><li>ç”±å¯ä¿¡çš„ CA æœºæ„ç­¾å‘</li><li>è®¿é—®çš„åœ°å€è·Ÿè¯ä¹¦è®¤è¯åœ°å€ç›¸ç¬¦</li><li>è¯ä¹¦åœ¨æœ‰æ•ˆæœŸå†…</li></ul><p>å¦‚æœæœŸæœ›æˆ‘ä»¬è‡ªç­¾è¯ä¹¦åœ¨å±€åŸŸç½‘å†…ä½¿ç”¨ï¼Œä»¥ä¸Šä¸‰ä¸ªæ¡ä»¶éƒ½éœ€è¦æ»¡è¶³ã€‚å¾ˆæ˜æ˜¾è‡ªç­¾è¯ä¹¦ä¸€å®šå¯ä»¥æ»¡è¶³è¯ä¹¦åœ¨æœ‰æ•ˆæœŸå†…ï¼Œé‚£ä¹ˆéœ€è¦ä¿è¯åä¸¤æ¡ã€‚æˆ‘ä»¬ç­¾å‘çš„è¯ä¹¦å¿…é¡»åŒ¹é…æµè§ˆå™¨çš„åœ°å€æ ï¼Œæ¯”å¦‚å±€åŸŸç½‘çš„ ip æˆ–è€…åŸŸåï¼Œæ­¤å¤–è¿˜éœ€è¦ä¿¡ä»» CAã€‚</p><p>æˆ‘ä»¬å…ˆé‡æ–°ç­¾å‘ä¸€ä¸‹è¯ä¹¦ï¼ŒåŠ ä¸Šæœ¬æœºçš„å±€åŸŸç½‘ ip è®¤è¯:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkcert localhost 127.0.0.1 ::1 192.168.31.170</span><br><span class="line">Using the local CA at &quot;C:\Users\abcfy\AppData\Local\mkcert&quot; âœ¨</span><br><span class="line"></span><br><span class="line">Created a new certificate valid for the following names ğŸ“œ</span><br><span class="line"> - &quot;localhost&quot;</span><br><span class="line"> - &quot;127.0.0.1&quot;</span><br><span class="line"> - &quot;::1&quot;</span><br><span class="line"> - &quot;192.168.31.170&quot;</span><br><span class="line"></span><br><span class="line">The certificate is at &quot;./localhost+3.pem&quot; and the key at &quot;./localhost+3-key.pem&quot; âœ…</span><br></pre></td></tr></table></figure><p>å†æ¬¡éªŒè¯å‘ç°ä½¿ç”¨<a href="https://192.168.31.170æœ¬æœºè®¿é—®ä¹Ÿæ˜¯å¯ä¿¡çš„ã€‚ç„¶åæˆ‘ä»¬éœ€è¦å°†**CAè¯ä¹¦å‘æ”¾ç»™å±€åŸŸç½‘å†…å…¶ä»–çš„ç”¨æˆ·**ã€‚" rel="external nofollow noopener noreferrer" target="_blank">https://192.168.31.170æœ¬æœºè®¿é—®ä¹Ÿæ˜¯å¯ä¿¡çš„ã€‚ç„¶åæˆ‘ä»¬éœ€è¦å°†**CAè¯ä¹¦å‘æ”¾ç»™å±€åŸŸç½‘å†…å…¶ä»–çš„ç”¨æˆ·**ã€‚</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mkcert -CAROOT</span><br><span class="line">C:\Users\abcfy\AppData\Local\mkcert</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ mkcert -CAROOT å‘½ä»¤å¯ä»¥åˆ—å‡º CA è¯ä¹¦çš„å­˜æ”¾è·¯å¾„</p><p>å¯ä»¥çœ‹åˆ° CA è·¯å¾„ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶ rootCA-key.pem å’Œ rootCA.pem ä¸¤ä¸ªæ–‡ä»¶ï¼Œç”¨æˆ·éœ€è¦ä¿¡ä»» rootCA.pem è¿™ä¸ªæ–‡ä»¶ã€‚å°† rootCA.pem æ‹·è´ä¸€ä¸ªå‰¯æœ¬ï¼Œå¹¶å‘½åä¸º rootCA.crt(å› ä¸º windows å¹¶ä¸è¯†åˆ« pem æ‰©å±•åï¼Œå¹¶ä¸” Ubuntu ä¹Ÿä¸ä¼šå°† pem æ‰©å±•åä½œä¸º CA è¯ä¹¦æ–‡ä»¶å¯¹å¾…)ï¼Œå°† rootCA.crt æ–‡ä»¶åˆ†å‘ç»™å…¶ä»–ç”¨æˆ·ï¼Œæ‰‹å·¥å¯¼å…¥ã€‚</p><p>windows å¯¼å…¥è¯ä¹¦çš„æ–¹æ³•æ˜¯åŒå‡»è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨è¯ä¹¦å¯¼å…¥å‘å¯¼ä¸­å°†è¯ä¹¦å¯¼å…¥å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„:</p><img src="/posts/4cb12659/window-import-mkcert-ca.png" title="å¯¼å…¥è¯ä¹¦"><p>Ubuntu çš„åšæ³•å¯ä»¥å°†è¯ä¹¦æ–‡ä»¶(å¿…é¡»æ˜¯ crt åç¼€)æ”¾å…¥/usr/local/share/ca-certificates/ï¼Œç„¶åæ‰§è¡Œ sudo update-ca-certificates</p><p>Android å’Œ IOS ä¿¡ä»» CA è¯ä¹¦çš„åšæ³•å‚è€ƒ<a href="https://github.com/FiloSottile/mkcert#mobile-devices" rel="external nofollow noopener noreferrer" target="_blank">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>æœ¬åœ°å¼€å‘</category>
      </categories>
      <tags>
        <tag>choco</tag>
        <tag>mkcert</tag>
        <tag>æœ¬åœ°https</tag>
      </tags>
  </entry>
  <entry>
    <title>Jenkins å‡­æ®ä½¿ç”¨</title>
    <url>/posts/6b626a8a/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Jenkins å‡­æ®ä½¿ç”¨</p></blockquote><a id="more"></a><h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><h3 id="jenkinsfile-ä½¿ç”¨ç¯å¢ƒå˜é‡"><a href="#jenkinsfile-ä½¿ç”¨ç¯å¢ƒå˜é‡" class="headerlink" title="jenkinsfile ä½¿ç”¨ç¯å¢ƒå˜é‡"></a>jenkinsfile ä½¿ç”¨ç¯å¢ƒå˜é‡</h3><p>ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    docker &#123;</span><br><span class="line">      image &apos;spiritling/node:10.15.3&apos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(&apos;get&apos;) &#123;</span><br><span class="line">      environment &#123;</span><br><span class="line">        VERSION = sh(script: &apos;node script/auto-versioning.js&apos;, , returnStdout: true)</span><br><span class="line">      &#125;</span><br><span class="line">      steps &#123;</span><br><span class="line">        sh &apos;echo &quot;VERSION: &quot;$VERSION&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°† auto-versioning.js æ‰§è¡Œåè¿”å›çš„æ–‡æœ¬æˆ–æ•°å­—å­˜å…¥åˆ° <code>VERSION</code> ç¯å¢ƒå˜é‡ä¸­å»</p><p>åœ¨ <code>steps</code> ä¸­ä½¿ç”¨ <code>$VERSION</code> æ¥è·å–ç¯å¢ƒå˜é‡</p><h2 id="å‡­æ®"><a href="#å‡­æ®" class="headerlink" title="å‡­æ®"></a>å‡­æ®</h2><h3 id="è´¦å·å¯†ç å‡­æ®ç®¡ç†"><a href="#è´¦å·å¯†ç å‡­æ®ç®¡ç†" class="headerlink" title="è´¦å·å¯†ç å‡­æ®ç®¡ç†"></a>è´¦å·å¯†ç å‡­æ®ç®¡ç†</h3><p>åˆ›å»ºå‡­æ®ï¼Œä»¥ä¸‹ä¸ºä¾‹å­ï¼š</p><p>ç±»å‹ï¼šUsername with password<br>èŒƒå›´ï¼šå…¨å±€<br>ç”¨æˆ·åï¼šroot<br>å¯†ç ï¼šrootxxxx<br>IDï¼šBIRRARY_ID<br>æè¿°ï¼šéšæ„å¡«å†™</p><p>åœ¨ jenkinsfile ä¸­ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    docker &#123;</span><br><span class="line">      image &apos;spiritling/node:10.15.3&apos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(&apos;get&apos;) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        withCredentials([usernamePassword(credentialsId: &apos;BIRRARY_ID&apos;, passwordVariable: &apos;password&apos;, usernameVariable: &apos;username&apos;)]) &#123;</span><br><span class="line">          sh &apos;git remote set-url origin https://$&#123;username&#125;:$&#123;password&#125;@github.com/spiritling/blog.git&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        sh &apos;echo &quot;è·å–å‡­æ®&quot;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ jenkinsfile æ–‡ä»¶çš„æ„å»ºè¿‡ç¨‹ä¸­è·å–åˆ° username å’Œ password çš„å‡­æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åç»­å°†å…¶æ’å…¥è¿›å»</p><h3 id="åŠ å¯†æ–‡æœ¬å‡­æ®ç®¡ç†"><a href="#åŠ å¯†æ–‡æœ¬å‡­æ®ç®¡ç†" class="headerlink" title="åŠ å¯†æ–‡æœ¬å‡­æ®ç®¡ç†"></a>åŠ å¯†æ–‡æœ¬å‡­æ®ç®¡ç†</h3><p>åˆ›å»ºå‡­æ®ï¼Œä»¥ä¸‹ä¸ºä¾‹å­ï¼š</p><p>ç±»å‹ï¼šSecret text<br>èŒƒå›´ï¼šå…¨å±€<br>Secretï¼šrootxxxx<br>IDï¼šBIRRARY_ID<br>æè¿°ï¼šéšæ„å¡«å†™</p><p>åœ¨ jenkinsfile ä¸­ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    docker &#123;</span><br><span class="line">      image &apos;spiritling/node:10.15.3&apos;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(&apos;get&apos;) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        withCredentials([string(credentialsId: &apos;IDï¼šBIRRARY_ID&apos;, variable: &apos;secret&apos;)]) &#123; //set SECRET with the credential content</span><br><span class="line">          sh &apos;echo -e &quot;registry=https://npmjs.org/spiritling/\n_auth = $&#123;secret&#125;\nemail = spirit_ling_cn@163.com\nalways-auth = true\n$PATH&quot; &gt; .npmrc&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        sh &apos;echo &quot;è·å–å‡­æ®&quot;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ jenkinsfile æ–‡ä»¶çš„æ„å»ºè¿‡ç¨‹ä¸­è·å–åˆ° secret çš„å‡­æ®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åç»­å°†å…¶æ’å…¥è¿›å»</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Jenkins</category>
      </categories>
      <tags>
        <tag>Jenkins</tag>
        <tag>å‡­æ®</tag>
      </tags>
  </entry>
  <entry>
    <title>Nodejs ä¸€äº›ç»†èŠ‚</title>
    <url>/posts/15cfe434/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Nodejs ä¸€äº›ç»†èŠ‚</p></blockquote><a id="more"></a><h2 id="nodejs-è·¯å¾„ä»¥åŠ-path-ç›¸å…³"><a href="#nodejs-è·¯å¾„ä»¥åŠ-path-ç›¸å…³" class="headerlink" title="nodejs è·¯å¾„ä»¥åŠ path ç›¸å…³"></a>nodejs è·¯å¾„ä»¥åŠ path ç›¸å…³</h2><h3 id="process-cwd-ã€-dirnameã€-filename"><a href="#process-cwd-ã€-dirnameã€-filename" class="headerlink" title="process.cwd()ã€__dirnameã€__filename"></a><code>process.cwd()</code>ã€<code>__dirname</code>ã€<code>__filename</code></h3><p>ä¸‰è€…çš„åŒºåˆ«æ˜¯</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>process.cwd()</code></td><td>è·å¾—å½“å‰æ‰§è¡Œ node å‘½ä»¤æ—¶å€™çš„æ–‡ä»¶å¤¹ç›®å½•å</td></tr><tr><td><code>__dirname</code></td><td>è·å¾—å½“å‰æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å®Œæ•´ç›®å½•å</td></tr><tr><td><code>__filename</code></td><td>è·å¾—å½“å‰æ‰§è¡Œæ–‡ä»¶çš„å¸¦æœ‰å®Œæ•´ç»å¯¹è·¯å¾„çš„æ–‡ä»¶å</td></tr></tbody></table><p>ä¾‹å­è¯´æ˜ï¼š<br>å‡è®¾æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨å±€çš„ cli</p><p>å®ƒçš„é¡¹ç›®è·¯å¾„åœ¨ <code>D:\MyProject\mycli</code> æ–‡ä»¶å¤¹ä¸­</p><p>è€Œå®ƒçš„ <code>mycli init</code> å‘½ä»¤æ‰§è¡Œçš„å‡½æ•°åœ¨ <code>D:\MyProject\mycli\src\init.js</code> ä¸­</p><p>åœ¨ <code>init.js</code> å­˜åœ¨ä»¥ä¸‹ä»£ç </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(process.cwd());</span><br><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"><span class="built_in">console</span>.log(path.join(<span class="string">"./index.html"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(path.resolve(<span class="string">"./index.html"</span>));</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆåœ¨ <code>D:\MyProject\mycli</code> ä¸‹æ‰§è¡Œå‘½ä»¤è¾“å‡º</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\MyProject\mycli</span><br><span class="line">D:\MyProject\mycli\src</span><br><span class="line">D:\MyProject\mycli\src\init.js</span><br><span class="line">index.html</span><br><span class="line">D:\MyProject\mycli\index.html</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ <code>D:\otherDir</code> ä¸­æ‰§è¡Œå‘½ä»¤è¾“å‡ºä¸º</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">D:\otherDir</span><br><span class="line">D:\MyProject\mycli\src</span><br><span class="line">D:\MyProject\mycli\src\init.js</span><br><span class="line">index.html</span><br><span class="line">D:\otherDir\index.html</span><br></pre></td></tr></table></figure><p>ä¸»è¦åŒºåˆ«å°±æ˜¯ <code>process.cwd()</code> å’Œ <code>path</code> è¿æ¥å‘½ä»¤</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>NodeJS</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>Git å¸¸ç”¨å‘½ä»¤</title>
    <url>/posts/5fddf106/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Git å¸¸ç”¨å‘½ä»¤</p></blockquote><a id="more"></a><h3 id="é…ç½®æ“ä½œ"><a href="#é…ç½®æ“ä½œ" class="headerlink" title="é…ç½®æ“ä½œ"></a>é…ç½®æ“ä½œ</h3><h4 id="å…¨å±€é…ç½®"><a href="#å…¨å±€é…ç½®" class="headerlink" title="å…¨å±€é…ç½®"></a>å…¨å±€é…ç½®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ configÂ --globalÂ user.nameÂ &apos;ä½ çš„åå­—&apos;</span><br><span class="line">gitÂ configÂ --globalÂ user.emailÂ &apos;ä½ çš„é‚®ç®±&apos;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰ä»“åº“é…ç½®"><a href="#å½“å‰ä»“åº“é…ç½®" class="headerlink" title="å½“å‰ä»“åº“é…ç½®"></a>å½“å‰ä»“åº“é…ç½®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ configÂ --localÂ user.nameÂ &apos;ä½ çš„åå­—&apos;</span><br><span class="line">gitÂ configÂ --localÂ user.emailÂ &apos;ä½ çš„é‚®ç®±&apos;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹-global-é…ç½®"><a href="#æŸ¥çœ‹-global-é…ç½®" class="headerlink" title="æŸ¥çœ‹ global é…ç½®"></a>æŸ¥çœ‹ global é…ç½®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ configÂ --globalÂ --list</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®"><a href="#æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®" class="headerlink" title="æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®"></a>æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ configÂ --localÂ --listå¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤-global-é…ç½®"><a href="#åˆ é™¤-global-é…ç½®" class="headerlink" title="åˆ é™¤ global é…ç½®"></a>åˆ é™¤ global é…ç½®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ configÂ -unsetÂ --globalÂ è¦åˆ é™¤çš„é…ç½®é¡¹</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤å½“å‰ä»“åº“é…ç½®"><a href="#åˆ é™¤å½“å‰ä»“åº“é…ç½®" class="headerlink" title="åˆ é™¤å½“å‰ä»“åº“é…ç½®"></a>åˆ é™¤å½“å‰ä»“åº“é…ç½®</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ configÂ --unsetÂ --localÂ è¦åˆ é™¤çš„é…ç½®é¡¹</span><br></pre></td></tr></table></figure><h3 id="æœ¬åœ°æ“ä½œ"><a href="#æœ¬åœ°æ“ä½œ" class="headerlink" title="æœ¬åœ°æ“ä½œ"></a>æœ¬åœ°æ“ä½œ</h3><h4 id="æŸ¥çœ‹å˜æ›´æƒ…å†µ"><a href="#æŸ¥çœ‹å˜æ›´æƒ…å†µ" class="headerlink" title="æŸ¥çœ‹å˜æ›´æƒ…å†µ"></a>æŸ¥çœ‹å˜æ›´æƒ…å†µ</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ status</span><br></pre></td></tr></table></figure><h4 id="å°†å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº"><a href="#å°†å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº" class="headerlink" title="å°†å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº"></a>å°†å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ addÂ .</span><br></pre></td></tr></table></figure><h4 id="å°†ä»“åº“å†…æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº"><a href="#å°†ä»“åº“å†…æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº" class="headerlink" title="å°†ä»“åº“å†…æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº"></a>å°†ä»“åº“å†…æ‰€æœ‰å˜æ›´éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ addÂ -A</span><br></pre></td></tr></table></figure><h4 id="å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº"><a href="#å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº" class="headerlink" title="å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº"></a>å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ addÂ æ–‡ä»¶1Â æ–‡ä»¶2Â æ–‡ä»¶3</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ‰€æœ‰å·®å¼‚"><a href="#æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ‰€æœ‰å·®å¼‚" class="headerlink" title="æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ‰€æœ‰å·®å¼‚"></a>æ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ‰€æœ‰å·®å¼‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ diff</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚"><a href="#æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚" class="headerlink" title="æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚"></a>æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ diffÂ æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒæš‚å­˜åŒºå’Œ-HEAD-çš„æ‰€æœ‰å·®å¼‚"><a href="#æ¯”è¾ƒæš‚å­˜åŒºå’Œ-HEAD-çš„æ‰€æœ‰å·®å¼‚" class="headerlink" title="æ¯”è¾ƒæš‚å­˜åŒºå’Œ HEAD çš„æ‰€æœ‰å·®å¼‚"></a>æ¯”è¾ƒæš‚å­˜åŒºå’Œ HEAD çš„æ‰€æœ‰å·®å¼‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">gitÂ diffÂ --cached</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒæŸæ–‡ä»¶æš‚å­˜åŒºå’Œ-HEAD-çš„å·®å¼‚"><a href="#æ¯”è¾ƒæŸæ–‡ä»¶æš‚å­˜åŒºå’Œ-HEAD-çš„å·®å¼‚" class="headerlink" title="æ¯”è¾ƒæŸæ–‡ä»¶æš‚å­˜åŒºå’Œ HEAD çš„å·®å¼‚"></a>æ¯”è¾ƒæŸæ–‡ä»¶æš‚å­˜åŒºå’Œ HEAD çš„å·®å¼‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git diff -cached æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œ-HEAD-çš„å·®å¼‚"><a href="#æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œ-HEAD-çš„å·®å¼‚" class="headerlink" title="æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œ HEAD çš„å·®å¼‚"></a>æ¯”è¾ƒæŸæ–‡ä»¶å·¥ä½œåŒºå’Œ HEAD çš„å·®å¼‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git diff HEAD æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»º-commit"><a href="#åˆ›å»º-commit" class="headerlink" title="åˆ›å»º commit"></a>åˆ›å»º commit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git commit</span><br></pre></td></tr></table></figure><h4 id="å°†å·¥ä½œåŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œæš‚å­˜åŒºä¸€è‡´"><a href="#å°†å·¥ä½œåŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œæš‚å­˜åŒºä¸€è‡´" class="headerlink" title="å°†å·¥ä½œåŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œæš‚å­˜åŒºä¸€è‡´"></a>å°†å·¥ä½œåŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œæš‚å­˜åŒºä¸€è‡´</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout æ–‡ä»¶1 æ–‡ä»¶2 æ–‡ä»¶3</span><br></pre></td></tr></table></figure><h4 id="å°†æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œ-HEAD-ä¸€è‡´"><a href="#å°†æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œ-HEAD-ä¸€è‡´" class="headerlink" title="å°†æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œ HEAD ä¸€è‡´"></a>å°†æš‚å­˜åŒºæŒ‡å®šæ–‡ä»¶æ¢å¤æˆå’Œ HEAD ä¸€è‡´</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git reset æ–‡ä»¶1 æ–‡ä»¶2 æ–‡ä»¶3</span><br></pre></td></tr></table></figure><h4 id="å°†æš‚å­˜åŒºå’Œå·¥ä½œåŒºæ‰€æœ‰æ–‡ä»¶æ¢å¤æˆå’Œ-HEAD-ä¸€æ ·"><a href="#å°†æš‚å­˜åŒºå’Œå·¥ä½œåŒºæ‰€æœ‰æ–‡ä»¶æ¢å¤æˆå’Œ-HEAD-ä¸€æ ·" class="headerlink" title="å°†æš‚å­˜åŒºå’Œå·¥ä½œåŒºæ‰€æœ‰æ–‡ä»¶æ¢å¤æˆå’Œ HEAD ä¸€æ ·"></a>å°†æš‚å­˜åŒºå’Œå·¥ä½œåŒºæ‰€æœ‰æ–‡ä»¶æ¢å¤æˆå’Œ HEAD ä¸€æ ·</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></table></figure><h4 id="ç”¨-difftool-æ¯”è¾ƒä»»æ„ä¸¤ä¸ª-commit-çš„å·®å¼‚"><a href="#ç”¨-difftool-æ¯”è¾ƒä»»æ„ä¸¤ä¸ª-commit-çš„å·®å¼‚" class="headerlink" title="ç”¨ difftool æ¯”è¾ƒä»»æ„ä¸¤ä¸ª commit çš„å·®å¼‚"></a>ç”¨ difftool æ¯”è¾ƒä»»æ„ä¸¤ä¸ª commit çš„å·®å¼‚</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git difftool æäº¤1 æäº¤2</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹å“ªäº›æ–‡ä»¶æ²¡è¢«-Git-ç®¡æ§"><a href="#æŸ¥çœ‹å“ªäº›æ–‡ä»¶æ²¡è¢«-Git-ç®¡æ§" class="headerlink" title="æŸ¥çœ‹å“ªäº›æ–‡ä»¶æ²¡è¢« Git ç®¡æ§"></a>æŸ¥çœ‹å“ªäº›æ–‡ä»¶æ²¡è¢« Git ç®¡æ§</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git ls-files --others</span><br></pre></td></tr></table></figure><h4 id="å°†æœªå¤„ç†å®Œçš„å˜æ›´å…ˆä¿å­˜åˆ°-stash-ä¸­"><a href="#å°†æœªå¤„ç†å®Œçš„å˜æ›´å…ˆä¿å­˜åˆ°-stash-ä¸­" class="headerlink" title="å°†æœªå¤„ç†å®Œçš„å˜æ›´å…ˆä¿å­˜åˆ° stash ä¸­"></a>å°†æœªå¤„ç†å®Œçš„å˜æ›´å…ˆä¿å­˜åˆ° stash ä¸­</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure><h4 id="ä¸´æ—¶ä»»åŠ¡å¤„ç†å®Œåç»§ç»­ä¹‹å‰çš„å·¥ä½œ"><a href="#ä¸´æ—¶ä»»åŠ¡å¤„ç†å®Œåç»§ç»­ä¹‹å‰çš„å·¥ä½œ" class="headerlink" title="ä¸´æ—¶ä»»åŠ¡å¤„ç†å®Œåç»§ç»­ä¹‹å‰çš„å·¥ä½œ"></a>ä¸´æ—¶ä»»åŠ¡å¤„ç†å®Œåç»§ç»­ä¹‹å‰çš„å·¥ä½œ</h4><ul><li><p>pop ä¸ä¿ç•™ stash</p></li><li><p>apply ä¿ç•™ stash</p></li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ‰€æœ‰-stash"><a href="#æŸ¥çœ‹æ‰€æœ‰-stash" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ stash"></a>æŸ¥çœ‹æ‰€æœ‰ stash</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><h4 id="å–å›æŸæ¬¡-stash-çš„å˜æ›´"><a href="#å–å›æŸæ¬¡-stash-çš„å˜æ›´" class="headerlink" title="å–å›æŸæ¬¡ stash çš„å˜æ›´"></a>å–å›æŸæ¬¡ stash çš„å˜æ›´</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git stash pop stash@&#123;æ•°å­—n&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¼˜é›…ä¿®æ”¹æœ€åä¸€æ¬¡-commit"><a href="#ä¼˜é›…ä¿®æ”¹æœ€åä¸€æ¬¡-commit" class="headerlink" title="ä¼˜é›…ä¿®æ”¹æœ€åä¸€æ¬¡ commit"></a>ä¼˜é›…ä¿®æ”¹æœ€åä¸€æ¬¡ commit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add.</span><br><span class="line">git commit --amend</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ”¯æ“ä½œ"><a href="#åˆ†æ”¯æ“ä½œ" class="headerlink" title="åˆ†æ”¯æ“ä½œ"></a>åˆ†æ”¯æ“ä½œ</h3><h4 id="æŸ¥çœ‹å½“å‰å·¥ä½œåˆ†æ”¯åŠæœ¬åœ°åˆ†æ”¯"><a href="#æŸ¥çœ‹å½“å‰å·¥ä½œåˆ†æ”¯åŠæœ¬åœ°åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹å½“å‰å·¥ä½œåˆ†æ”¯åŠæœ¬åœ°åˆ†æ”¯"></a>æŸ¥çœ‹å½“å‰å·¥ä½œåˆ†æ”¯åŠæœ¬åœ°åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch -v</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æœ¬åœ°å’Œè¿œç«¯åˆ†æ”¯"><a href="#æŸ¥çœ‹æœ¬åœ°å’Œè¿œç«¯åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°å’Œè¿œç«¯åˆ†æ”¯"></a>æŸ¥çœ‹æœ¬åœ°å’Œè¿œç«¯åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch -av</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹è¿œç«¯åˆ†æ”¯"><a href="#æŸ¥çœ‹è¿œç«¯åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹è¿œç«¯åˆ†æ”¯"></a>æŸ¥çœ‹è¿œç«¯åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch -rv</span><br></pre></td></tr></table></figure><h4 id="åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯"><a href="#åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯"></a>åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout æŒ‡å®šåˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯"><a href="#åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯" class="headerlink" title="åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯"></a>åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch æ–°åˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="åŸºäºæŒ‡å®šåˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯"><a href="#åŸºäºæŒ‡å®šåˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯" class="headerlink" title="åŸºäºæŒ‡å®šåˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯"></a>åŸºäºæŒ‡å®šåˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch æ–°åˆ†æ”¯ æŒ‡å®šåˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="åŸºäºæŸä¸ª-commit-åˆ›å»ºåˆ†æ”¯"><a href="#åŸºäºæŸä¸ª-commit-åˆ›å»ºåˆ†æ”¯" class="headerlink" title="åŸºäºæŸä¸ª commit åˆ›å»ºåˆ†æ”¯"></a>åŸºäºæŸä¸ª commit åˆ›å»ºåˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch æ–°åˆ†æ”¯ æŸä¸ª commit çš„ id</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯"><a href="#åˆ›å»ºå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯" class="headerlink" title="åˆ›å»ºå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯"></a>åˆ›å»ºå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout -b æ–°åˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="å®‰å…¨åˆ é™¤æœ¬åœ°æŸåˆ†æ”¯"><a href="#å®‰å…¨åˆ é™¤æœ¬åœ°æŸåˆ†æ”¯" class="headerlink" title="å®‰å…¨åˆ é™¤æœ¬åœ°æŸåˆ†æ”¯"></a>å®‰å…¨åˆ é™¤æœ¬åœ°æŸåˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch -d è¦åˆ é™¤çš„åˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="å¼ºè¡Œåˆ é™¤æœ¬åœ°æŸåˆ†æ”¯"><a href="#å¼ºè¡Œåˆ é™¤æœ¬åœ°æŸåˆ†æ”¯" class="headerlink" title="å¼ºè¡Œåˆ é™¤æœ¬åœ°æŸåˆ†æ”¯"></a>å¼ºè¡Œåˆ é™¤æœ¬åœ°æŸåˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch -D è¦åˆ é™¤çš„åˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤å·²åˆå¹¶åˆ°-master-åˆ†æ”¯çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯"><a href="#åˆ é™¤å·²åˆå¹¶åˆ°-master-åˆ†æ”¯çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯" class="headerlink" title="åˆ é™¤å·²åˆå¹¶åˆ° master åˆ†æ”¯çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯"></a>åˆ é™¤å·²åˆå¹¶åˆ° master åˆ†æ”¯çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git branch --merged master | grep -v &apos;^\*\| master&apos; | xargs -n 1 git branch -d</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è¿œç«¯-origin-å·²ä¸å­˜åœ¨çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯"><a href="#åˆ é™¤è¿œç«¯-origin-å·²ä¸å­˜åœ¨çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç«¯ origin å·²ä¸å­˜åœ¨çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯"></a>åˆ é™¤è¿œç«¯ origin å·²ä¸å­˜åœ¨çš„æ‰€æœ‰æœ¬åœ°åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote prune orign</span><br></pre></td></tr></table></figure><h4 id="å°†-A-åˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯ä¸­ä¸”ä¸º-merge-åˆ›å»º-commit"><a href="#å°†-A-åˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯ä¸­ä¸”ä¸º-merge-åˆ›å»º-commit" class="headerlink" title="å°† A åˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯ä¸­ä¸”ä¸º merge åˆ›å»º commit"></a>å°† A åˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯ä¸­ä¸”ä¸º merge åˆ›å»º commit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git merge Aåˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="å°†-A-åˆ†æ”¯åˆå…¥åˆ°-B-åˆ†æ”¯ä¸­ä¸”ä¸º-merge-åˆ›å»º-commit"><a href="#å°†-A-åˆ†æ”¯åˆå…¥åˆ°-B-åˆ†æ”¯ä¸­ä¸”ä¸º-merge-åˆ›å»º-commit" class="headerlink" title="å°† A åˆ†æ”¯åˆå…¥åˆ° B åˆ†æ”¯ä¸­ä¸”ä¸º merge åˆ›å»º commit"></a>å°† A åˆ†æ”¯åˆå…¥åˆ° B åˆ†æ”¯ä¸­ä¸”ä¸º merge åˆ›å»º commit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git merge Aåˆ†æ”¯ Båˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="å°†å½“å‰åˆ†æ”¯åŸºäº-B-åˆ†æ”¯åš-rebaseï¼Œä»¥ä¾¿å°†Båˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯"><a href="#å°†å½“å‰åˆ†æ”¯åŸºäº-B-åˆ†æ”¯åš-rebaseï¼Œä»¥ä¾¿å°†Båˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯" class="headerlink" title="å°†å½“å‰åˆ†æ”¯åŸºäº B åˆ†æ”¯åš rebaseï¼Œä»¥ä¾¿å°†Båˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯"></a>å°†å½“å‰åˆ†æ”¯åŸºäº B åˆ†æ”¯åš rebaseï¼Œä»¥ä¾¿å°†Båˆ†æ”¯åˆå…¥åˆ°å½“å‰åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git rebase Båˆ†æ”¯</span><br></pre></td></tr></table></figure><h4 id="å°†-A-åˆ†æ”¯åŸºäº-B-åˆ†æ”¯åš-rebaseï¼Œä»¥ä¾¿å°†-B-åˆ†æ”¯åˆå…¥åˆ°-A-åˆ†æ”¯"><a href="#å°†-A-åˆ†æ”¯åŸºäº-B-åˆ†æ”¯åš-rebaseï¼Œä»¥ä¾¿å°†-B-åˆ†æ”¯åˆå…¥åˆ°-A-åˆ†æ”¯" class="headerlink" title="å°† A åˆ†æ”¯åŸºäº B åˆ†æ”¯åš rebaseï¼Œä»¥ä¾¿å°† B åˆ†æ”¯åˆå…¥åˆ° A åˆ†æ”¯"></a>å°† A åˆ†æ”¯åŸºäº B åˆ†æ”¯åš rebaseï¼Œä»¥ä¾¿å°† B åˆ†æ”¯åˆå…¥åˆ° A åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git rebase Båˆ†æ”¯ Aåˆ†æ”¯</span><br></pre></td></tr></table></figure><h3 id="å˜æ›´å†å²"><a href="#å˜æ›´å†å²" class="headerlink" title="å˜æ›´å†å²"></a>å˜æ›´å†å²</h3><h4 id="å½“å‰åˆ†æ”¯å„ä¸ª-commit-ç”¨ä¸€è¡Œæ˜¾ç¤º"><a href="#å½“å‰åˆ†æ”¯å„ä¸ª-commit-ç”¨ä¸€è¡Œæ˜¾ç¤º" class="headerlink" title="å½“å‰åˆ†æ”¯å„ä¸ª commit ç”¨ä¸€è¡Œæ˜¾ç¤º"></a>å½“å‰åˆ†æ”¯å„ä¸ª commit ç”¨ä¸€è¡Œæ˜¾ç¤º</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log --oneline</span><br></pre></td></tr></table></figure><h4 id="æ˜¾ç¤ºå°±è¿‘çš„-n-ä¸ª-commit"><a href="#æ˜¾ç¤ºå°±è¿‘çš„-n-ä¸ª-commit" class="headerlink" title="æ˜¾ç¤ºå°±è¿‘çš„ n ä¸ª commit"></a>æ˜¾ç¤ºå°±è¿‘çš„ n ä¸ª commit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log -n</span><br></pre></td></tr></table></figure><h4 id="ç”¨å›¾ç¤ºæ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯çš„å†å²"><a href="#ç”¨å›¾ç¤ºæ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯çš„å†å²" class="headerlink" title="ç”¨å›¾ç¤ºæ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯çš„å†å²"></a>ç”¨å›¾ç¤ºæ˜¾ç¤ºæ‰€æœ‰åˆ†æ”¯çš„å†å²</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log --oneline --graph --all</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹æ¶‰åŠåˆ°æŸæ–‡ä»¶å˜æ›´çš„æ‰€æœ‰-commit"><a href="#æŸ¥çœ‹æ¶‰åŠåˆ°æŸæ–‡ä»¶å˜æ›´çš„æ‰€æœ‰-commit" class="headerlink" title="æŸ¥çœ‹æ¶‰åŠåˆ°æŸæ–‡ä»¶å˜æ›´çš„æ‰€æœ‰ commit"></a>æŸ¥çœ‹æ¶‰åŠåˆ°æŸæ–‡ä»¶å˜æ›´çš„æ‰€æœ‰ commit</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="æŸæ–‡ä»¶å„è¡Œæœ€åä¿®æ”¹å¯¹åº”çš„-commit-ä»¥åŠä½œè€…"><a href="#æŸæ–‡ä»¶å„è¡Œæœ€åä¿®æ”¹å¯¹åº”çš„-commit-ä»¥åŠä½œè€…" class="headerlink" title="æŸæ–‡ä»¶å„è¡Œæœ€åä¿®æ”¹å¯¹åº”çš„ commit ä»¥åŠä½œè€…"></a>æŸæ–‡ä»¶å„è¡Œæœ€åä¿®æ”¹å¯¹åº”çš„ commit ä»¥åŠä½œè€…</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git blame æ–‡ä»¶</span><br></pre></td></tr></table></figure><h3 id="æ ‡ç­¾æ“ä½œ"><a href="#æ ‡ç­¾æ“ä½œ" class="headerlink" title="æ ‡ç­¾æ“ä½œ"></a>æ ‡ç­¾æ“ä½œ</h3><h4 id="æŸ¥çœ‹å·²æœ‰æ ‡ç­¾"><a href="#æŸ¥çœ‹å·²æœ‰æ ‡ç­¾" class="headerlink" title="æŸ¥çœ‹å·²æœ‰æ ‡ç­¾"></a>æŸ¥çœ‹å·²æœ‰æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºæ ‡ç­¾"><a href="#æ–°å»ºæ ‡ç­¾" class="headerlink" title="æ–°å»ºæ ‡ç­¾"></a>æ–°å»ºæ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag v1.0</span><br></pre></td></tr></table></figure><h4 id="æ–°å»ºå¸¦å¤‡æ³¨æ ‡ç­¾"><a href="#æ–°å»ºå¸¦å¤‡æ³¨æ ‡ç­¾" class="headerlink" title="æ–°å»ºå¸¦å¤‡æ³¨æ ‡ç­¾"></a>æ–°å»ºå¸¦å¤‡æ³¨æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag -a v1.0 -m &apos;å‰ç«¯é£Ÿå ‚&apos;</span><br></pre></td></tr></table></figure><h4 id="ç»™æŒ‡å®šçš„-commit-æ‰“æ ‡ç­¾"><a href="#ç»™æŒ‡å®šçš„-commit-æ‰“æ ‡ç­¾" class="headerlink" title="ç»™æŒ‡å®šçš„ commit æ‰“æ ‡ç­¾"></a>ç»™æŒ‡å®šçš„ commit æ‰“æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag v1.0 commitid</span><br></pre></td></tr></table></figure><h4 id="æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾"><a href="#æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾" class="headerlink" title="æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾"></a>æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin v1.0</span><br></pre></td></tr></table></figure><h4 id="æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾"><a href="#æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾" class="headerlink" title="æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾"></a>æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾"><a href="#åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾" class="headerlink" title="åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾"></a>åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git tag -d v1.0</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤ä¸€ä¸ªè¿œç«¯æ ‡ç­¾"><a href="#åˆ é™¤ä¸€ä¸ªè¿œç«¯æ ‡ç­¾" class="headerlink" title="åˆ é™¤ä¸€ä¸ªè¿œç«¯æ ‡ç­¾"></a>åˆ é™¤ä¸€ä¸ªè¿œç«¯æ ‡ç­¾</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin :refs/tags/v1.0</span><br></pre></td></tr></table></figure><h3 id="è¿œç«¯äº¤äº’"><a href="#è¿œç«¯äº¤äº’" class="headerlink" title="è¿œç«¯äº¤äº’"></a>è¿œç«¯äº¤äº’</h3><h4 id="æŸ¥çœ‹æ‰€æœ‰è¿œç«¯ä»“åº“"><a href="#æŸ¥çœ‹æ‰€æœ‰è¿œç«¯ä»“åº“" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰è¿œç«¯ä»“åº“"></a>æŸ¥çœ‹æ‰€æœ‰è¿œç«¯ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ è¿œç«¯ä»“åº“"><a href="#æ·»åŠ è¿œç«¯ä»“åº“" class="headerlink" title="æ·»åŠ è¿œç«¯ä»“åº“"></a>æ·»åŠ è¿œç«¯ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote add url</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è¿œç«¯ä»“åº“"><a href="#åˆ é™¤è¿œç«¯ä»“åº“" class="headerlink" title="åˆ é™¤è¿œç«¯ä»“åº“"></a>åˆ é™¤è¿œç«¯ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote remove remoteçš„åç§°</span><br></pre></td></tr></table></figure><h4 id="é‡å‘½åè¿œç«¯ä»“åº“"><a href="#é‡å‘½åè¿œç«¯ä»“åº“" class="headerlink" title="é‡å‘½åè¿œç«¯ä»“åº“"></a>é‡å‘½åè¿œç«¯ä»“åº“</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git remote rename æ—§åç§° æ–°åç§°</span><br></pre></td></tr></table></figure><h4 id="å°†è¿œç«¯æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾çš„å˜æ›´éƒ½æ‹‰åˆ°æœ¬åœ°"><a href="#å°†è¿œç«¯æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾çš„å˜æ›´éƒ½æ‹‰åˆ°æœ¬åœ°" class="headerlink" title="å°†è¿œç«¯æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾çš„å˜æ›´éƒ½æ‹‰åˆ°æœ¬åœ°"></a>å°†è¿œç«¯æ‰€æœ‰åˆ†æ”¯å’Œæ ‡ç­¾çš„å˜æ›´éƒ½æ‹‰åˆ°æœ¬åœ°</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git fetch remote</span><br></pre></td></tr></table></figure><h4 id="æŠŠè¿œç«¯åˆ†æ”¯çš„å˜æ›´æ‹‰åˆ°æœ¬åœ°ï¼Œä¸”-merge-åˆ°æœ¬åœ°åˆ†æ”¯"><a href="#æŠŠè¿œç«¯åˆ†æ”¯çš„å˜æ›´æ‹‰åˆ°æœ¬åœ°ï¼Œä¸”-merge-åˆ°æœ¬åœ°åˆ†æ”¯" class="headerlink" title="æŠŠè¿œç«¯åˆ†æ”¯çš„å˜æ›´æ‹‰åˆ°æœ¬åœ°ï¼Œä¸” merge åˆ°æœ¬åœ°åˆ†æ”¯"></a>æŠŠè¿œç«¯åˆ†æ”¯çš„å˜æ›´æ‹‰åˆ°æœ¬åœ°ï¼Œä¸” merge åˆ°æœ¬åœ°åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git pull origin åˆ†æ”¯å</span><br></pre></td></tr></table></figure><h4 id="å°†æœ¬åœ°åˆ†æ”¯-push-åˆ°è¿œç«¯"><a href="#å°†æœ¬åœ°åˆ†æ”¯-push-åˆ°è¿œç«¯" class="headerlink" title="å°†æœ¬åœ°åˆ†æ”¯ push åˆ°è¿œç«¯"></a>å°†æœ¬åœ°åˆ†æ”¯ push åˆ°è¿œç«¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push origin åˆ†æ”¯å</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è¿œç«¯åˆ†æ”¯"><a href="#åˆ é™¤è¿œç«¯åˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç«¯åˆ†æ”¯"></a>åˆ é™¤è¿œç«¯åˆ†æ”¯</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push remote --delete è¿œç«¯åˆ†æ”¯å</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git push remote :è¿œç«¯åˆ†æ”¯å</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>.Net Core + EF + mysql ä»æ•°æ®åº“ç”Ÿæˆå®ä½“</title>
    <url>/posts/daefc0a4/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>.Net Core + EF + mysql ä»æ•°æ®åº“ç”Ÿæˆå®ä½“</p></blockquote><a id="more"></a><p>åŸæ–‡åœ°å€ï¼š<a href="https://www.cnblogs.com/yangjinwang/p/9516988.html" rel="external nofollow noopener noreferrer" target="_blank">https://www.cnblogs.com/yangjinwang/p/9516988.html</a></p><h2 id="å®‰è£…NuGetåŒ…"><a href="#å®‰è£…NuGetåŒ…" class="headerlink" title="å®‰è£…NuGetåŒ…"></a>å®‰è£…NuGetåŒ…</h2><p>ç‚¹å‡» <code>å·¥å…·</code> -&gt; <code>NuGetåŒ…ç®¡ç†å™¨</code> -&gt; <code>ç¨‹åºåŒ…ç®¡ç†å™¨æ§åˆ¶å°</code></p><p>åˆ†åˆ«å®‰è£…ä»¥ä¸‹å‡ ä¸ªåŒ…</p><p>Mysql ç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Install-Package MySql.Data.EntityFrameworkCore -Pre</span><br><span class="line">Install-Package Pomelo.EntityFrameworkCore.MySql</span><br><span class="line">Install-Package Microsoft.EntityFrameworkCore.Tools</span><br><span class="line">Install-Package Microsoft.VisualStudio.Web.CodeGeneration.Design</span><br></pre></td></tr></table></figure><p>Sql server ç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Install-Package Microsoft.EntityFrameworkCore</span><br><span class="line">Install-Package Microsoft.EntityFrameworkCore.SqlServer</span><br><span class="line">Install-Package Microsoft.EntityFrameworkCore.Tools</span><br><span class="line">Install-Package Microsoft.VisualStudio.Web.CodeGeneration.Design</span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œå‘½ä»¤ç”Ÿæˆå®ä½“"><a href="#è¿è¡Œå‘½ä»¤ç”Ÿæˆå®ä½“" class="headerlink" title="è¿è¡Œå‘½ä»¤ç”Ÿæˆå®ä½“"></a>è¿è¡Œå‘½ä»¤ç”Ÿæˆå®ä½“</h2><p>Mysql ç‰ˆæœ¬ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Scaffold-DbContext &quot;server=.;userid=tech5_kj;pwd=xxx;port=3306;database=tech5_kj;sslmode=none;&quot; Pomelo.EntityFrameworkCore.MySql -OutputDir Models -Force</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">Scaffold-DbContext &quot;server=.;userid=tech5_kj;pwd=xxx;port=3306;database=tech5_kj;sslmode=none;&quot; Pomelo.EntityFrameworkCore.MySql -OutputDir Models -UseDatabaseNames -Force</span><br></pre></td></tr></table></figure><p>Sql serverç‰ˆæœ¬:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Scaffold-DbContext &quot;Data Source=.;Initial Catalog=EFCore_dbfirst;User ID=sa;Password=sa.123&quot; Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -Force</span><br></pre></td></tr></table></figure><h2 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-OutputDir *** å®ä½“æ–‡ä»¶æ‰€å­˜æ”¾çš„æ–‡ä»¶ç›®å½•</span><br><span class="line">-ContextDir *** DbContextæ–‡ä»¶å­˜æ”¾çš„ç›®å½•</span><br><span class="line">-Context *** DbContextæ–‡ä»¶å</span><br><span class="line">-Schemas *** éœ€è¦ç”Ÿæˆå®ä½“æ•°æ®çš„æ•°æ®è¡¨æ‰€åœ¨çš„æ¨¡å¼</span><br><span class="line">-Tables *** éœ€è¦ç”Ÿæˆå®ä½“æ•°æ®çš„æ•°æ®è¡¨çš„é›†åˆ</span><br><span class="line">-DataAnnotations</span><br><span class="line">-UseDatabaseNames ç›´æ¥ä½¿ç”¨æ•°æ®åº“ä¸­çš„è¡¨åå’Œåˆ—åï¼ˆæŸäº›ç‰ˆæœ¬ä¸æ”¯æŒï¼‰</span><br><span class="line">-Force å¼ºåˆ¶æ‰§è¡Œï¼Œé‡å†™å·²ç»å­˜åœ¨çš„å®ä½“æ–‡ä»¶</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>dotnet</category>
      </categories>
      <tags>
        <tag>dotNet</tag>
        <tag>EF</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>React ä½¿ç”¨ Proxy ä»£ç†ï¼ˆcreate-react-appï¼‰</title>
    <url>/posts/74e1ae39/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>React ä½¿ç”¨ Proxy ä»£ç†ï¼ˆcreate-react-appï¼‰</p></blockquote><a id="more"></a><h2 id="åœ¨create-react-app-ä¸­é…ç½®proxyä»£ç†"><a href="#åœ¨create-react-app-ä¸­é…ç½®proxyä»£ç†" class="headerlink" title="åœ¨create-react-app ä¸­é…ç½®proxyä»£ç†"></a>åœ¨create-react-app ä¸­é…ç½®proxyä»£ç†</h2><p>proxyï¼Œé»˜è®¤ä¸ºNULLï¼Œç±»å‹ä¸ºURLï¼Œä¸€ä¸ªä¸ºäº†å‘é€httpè¯·æ±‚çš„ä»£ç†<br>åœ¨å¹³æ—¶å¼€å‘æ—¶ï¼Œå°¤å…¶å‰åç«¯åˆ†ç¦»æ—¶ï¼Œéœ€è¦å‡æ•°æ®æ¥è¿›è¡Œæ¨¡æ‹Ÿè¯·æ±‚ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦<code>proxy</code>ä»£ç†æ¥å¤„ç†</p><h3 id="create-react-app-lt-2-0"><a href="#create-react-app-lt-2-0" class="headerlink" title="create-react-app &lt; 2.0"></a>create-react-app &lt; 2.0</h3><p>package.json ä¸­é…ç½®</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"proxy"</span>:&#123;</span><br><span class="line">   <span class="string">"/api/**"</span>:&#123;</span><br><span class="line">      <span class="string">"target"</span>:<span class="string">"https://easymock.spiritling.pub/"</span>,</span><br><span class="line">      <span class="string">"changeOrigin"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="create-react-app-gt-2-0"><a href="#create-react-app-gt-2-0" class="headerlink" title="create-react-app &gt; 2.0"></a>create-react-app &gt; 2.0</h3><h4 id="package-json-ä¸­é…ç½®ï¼ˆä¸æ¨èï¼‰"><a href="#package-json-ä¸­é…ç½®ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="package.json ä¸­é…ç½®ï¼ˆä¸æ¨èï¼‰"></a>package.json ä¸­é…ç½®ï¼ˆä¸æ¨èï¼‰</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"proxy"</span>: <span class="string">"https://easymock.spiritling.pub/"</span>,</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶-src-setupProxy-js-ï¼ˆæ¨èï¼‰"><a href="#é…ç½®æ–‡ä»¶-src-setupProxy-js-ï¼ˆæ¨èï¼‰" class="headerlink" title="é…ç½®æ–‡ä»¶ /src/setupProxy.js ï¼ˆæ¨èï¼‰"></a>é…ç½®æ–‡ä»¶ <code>/src/setupProxy.js</code> ï¼ˆæ¨èï¼‰</h4><p>å°† <code>create-react-app</code> è§£åŒ…åï¼Œå¯ä»¥åœ¨ <code>config</code> æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°é…ç½®</p><p>åœ¨ <code>config/path.js</code> ä¸­å­˜åœ¨ <code>proxySetup: resolveApp(&#39;src/setupProxy.js&#39;),</code></p><p>è€Œ <code>proxySetup</code> æ˜¯åªåœ¨ <code>webpackDevServer.config.js</code> æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´åªåœ¨å¼€å‘æ—¶ä½¿ç”¨</p><p>æ‰€ä»¥ï¼Œå¯ä»¥åœ¨ /src/setupProxy.js ä¸­é…ç½®</p><p>é¦–å…ˆå®‰è£… <code>http-proxy-middleware</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install http-proxy-middleware -D</span><br></pre></td></tr></table></figure><p>ç„¶åæ–‡ä»¶é…ç½®</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(</span><br><span class="line">        <span class="string">'/api/v1/'</span>,</span><br><span class="line">        proxy(&#123;</span><br><span class="line">            target : <span class="string">'https://easymock.spiritling.pub/'</span>,</span><br><span class="line">            changeOrigin : <span class="literal">true</span>,  <span class="comment">// è®¾ç½®è·¨åŸŸè¯·æ±‚</span></span><br><span class="line">            PathRewrite : &#123;</span><br><span class="line">                <span class="string">'^/api/v1'</span> : <span class="string">''</span> <span class="comment">// å°†/api/v1 å˜ä¸º ''</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ä¾‹å­"><a href="#ä½¿ç”¨ä¾‹å­" class="headerlink" title="ä½¿ç”¨ä¾‹å­"></a>ä½¿ç”¨ä¾‹å­</h3><h4 id="01"><a href="#01" class="headerlink" title="01"></a>01</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(</span><br><span class="line">        <span class="string">'/api/v1/'</span>,</span><br><span class="line">        proxy(&#123;</span><br><span class="line">            target : <span class="string">'https://easymock.spiritling.pub/'</span>,</span><br><span class="line">            changeOrigin : <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¸¸è§ˆå™¨ä¸­è¯·æ±‚ä¸º <code>https://example.com/api/v1/login</code></p><p>åˆ™ç»è¿‡ä»£ç†åå¯ä»¥è½¬ä¸º <code>https://easymock.spiritling.pub/api/v1/login</code></p><h4 id="02"><a href="#02" class="headerlink" title="02"></a>02</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(</span><br><span class="line">        <span class="string">'/api/v1/'</span>,</span><br><span class="line">        proxy(&#123;</span><br><span class="line">            target : <span class="string">'https://easymock.spiritling.pub/'</span>,</span><br><span class="line">            changeOrigin : <span class="literal">true</span>,</span><br><span class="line">            PathRewrite : &#123;</span><br><span class="line">                <span class="string">'^/api/v1'</span> : <span class="string">''</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¸¸è§ˆå™¨ä¸­è¯·æ±‚ä¸º <code>https://example.com/api/v1/login</code></p><p>åˆ™ç»è¿‡ä»£ç†åå¯ä»¥è½¬ä¸º <code>https://easymock.spiritling.pub/login</code></p><blockquote><p><a href="https://create-react-app.dev/docs/proxying-api-requests-in-development/" rel="external nofollow noopener noreferrer" target="_blank">create-react-appå®˜æ–¹-Proxying API Requests in Development</a></p></blockquote><h2 id="http-proxy-middleware-æ–°ç‰ˆæœ¬-â‰§-1-0-0"><a href="#http-proxy-middleware-æ–°ç‰ˆæœ¬-â‰§-1-0-0" class="headerlink" title="http-proxy-middleware æ–°ç‰ˆæœ¬ â‰§ 1.0.0"></a><code>http-proxy-middleware</code> æ–°ç‰ˆæœ¬ â‰§ 1.0.0</h2><p>åœ¨æ–°ç‰ˆæœ¬å¤§äºç­‰äº 1.0.0 æ—¶ä½¿ç”¨ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">proxy is not a function</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´ <code>http-proxy-middleware</code> æˆ–è€… <code>setupProxy</code> ä¼šå‡ºç°æŠ¥é”™ <code>proxy is not a function</code></p><p>æ‰€ä»¥éœ€è¦ä½¿ç”¨æ–°ç‰ˆæœ¬çš„å†™æ³•æ‰å¯ä»¥</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="built_in">require</span>(<span class="string">'http-proxy-middleware'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(createProxyMiddleware(<span class="string">'/api/v1'</span>, &#123;</span><br><span class="line">        target : <span class="string">'https://easymock.spiritling.pub'</span>,</span><br><span class="line">        changeOrigin : <span class="literal">true</span>,</span><br><span class="line">        ws: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite : &#123;</span><br><span class="line">            <span class="string">'^/api/v1'</span> : <span class="string">''</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>proxy</tag>
      </tags>
  </entry>
  <entry>
    <title>IISè¿›è¡ŒURLé‡å†™â€”â€”å®ç°httpsé‡å®šå‘ï¼Œæ–‡ä»¶ç±»å‹éšè—è®¿é—®é‡å†™ï¼Œnodejsç­‰æœåŠ¡é‡å†™ç­‰ç­‰</title>
    <url>/posts/82f57ccc/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>IISè¿›è¡ŒURLé‡å†™â€”â€”å®ç°httpsé‡å®šå‘ï¼Œæ–‡ä»¶ç±»å‹éšè—è®¿é—®é‡å†™ï¼Œnodejsç­‰æœåŠ¡é‡å†™ç­‰ç­‰</p></blockquote><a id="more"></a><h2 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h2><h3 id="ä»€ä¹ˆæ˜¯URLé‡å†™"><a href="#ä»€ä¹ˆæ˜¯URLé‡å†™" class="headerlink" title="ä»€ä¹ˆæ˜¯URLé‡å†™"></a>ä»€ä¹ˆæ˜¯URLé‡å†™</h3><p>URLé‡å†™å°±æ˜¯é¦–å…ˆè·å¾—ä¸€ä¸ªè¿›å…¥çš„URLè¯·æ±‚ç„¶åæŠŠå®ƒé‡æ–°å†™æˆç½‘ç«™å¯ä»¥å¤„ç†çš„å¦ä¸€ä¸ªURLçš„è¿‡ç¨‹ã€‚</p><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œå¦‚æœé€šè¿‡æµè§ˆå™¨è¿›æ¥çš„URLæ˜¯â€œUserProfile.aspx?ID=1â€é‚£ä¹ˆå®ƒå¯ä»¥è¢«é‡å†™æˆ â€œUserProfile/1.aspxâ€ï¼Œè¿™æ ·çš„URLï¼Œè¿™æ ·çš„ç½‘å€å¯ä»¥æ›´å¥½çš„è¢«ç½‘ç«™æ‰€é˜…è¯»ã€‚</p><p>æ ¹æ®ä¸åŒçš„æœåŠ¡å™¨å°±ä¼šæœ‰ä¸åŒçš„URLé‡å†™è§„åˆ™ï¼Œæ¯”å¦‚ iis apache nginx è¿™ä¸‰ç§é‡å†™æ–¹å¼éƒ½æ˜¯ä¸åŒçš„ï¼Œå¹¶éå®Œå…¨ä¸€æ ·çš„ã€‚</p><p>ä»Šå¤©åªè¯´ IIS çš„é‡å†™</p><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨</h3><p>é¦–å…ˆæœ‰éœ€æ±‚å°±æœ‰ä½¿ç”¨ï¼Œæ‰€ä»¥ï¼Œæ˜¯æˆ‘çš„éœ€æ±‚è¯ç”Ÿäº†æˆ‘å»ä½¿ç”¨é‡å†™åŠŸèƒ½</p><p>ç¬¬ä¸€æ¬¡æ¥è§¦çš„åç«¯ä¸º Nodejsï¼Œä¸€ä¸ª80æˆ–è€…443ç«¯å£åªèƒ½ç»‘å®šä¸€ä¸ªç¨‹åºã€‚ä½¿ç”¨ windows è‡ªå¸¦çš„iisæœåŠ¡å™¨æ¥ä½¿ç”¨ï¼Œæƒ³è¦ä¸€ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤šä¸ªç«™ç‚¹ç¨‹åºï¼Œåˆ™éœ€è¦ä½¿ç”¨åˆ°åå‘ä»£ç†æ‰è¡Œã€‚</p><p>ä¸ä½¿ç”¨åå‘ä»£ç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p>æ¯”å¦‚æˆ‘çš„ç½‘ç«™æ˜¯ï¼š<a href="https://demo.example.com:4436/posts/82f57ccc" rel="external nofollow noopener noreferrer" target="_blank">https://demo.example.com:4436/posts/82f57ccc</a></p><img src="/posts/82f57ccc/20200119161522.png" title="URLé‡å†™ä¹‹å‰NodeJSçš„URL"><p>æ˜çœ¼ä¸€çœ‹å°±æ˜¯æœ‰ç‚¹ä¸å¤Ÿå‹å¥½ï¼Œæ­£å‡†å¤‡è®°ä¸‹ç½‘å€ï¼Œè¿™ä¸€ç…ï¼Œç›´æ¥æ”¾å¼ƒäº†ï¼Œå¤ªéº»çƒ¦äº†ï¼Œè¿˜æœ‰ç«¯å£</p><p>ä½†æ˜¯ç»è¿‡URLé‡å†™ï¼Œä¹Ÿå°±æ˜¯åå‘ä»£ç†åå°±æ”¹ä¸ºè¿™æ ·çš„ï¼š<a href="https://demo.example.com/4436/posts/82f57ccc" rel="external nofollow noopener noreferrer" target="_blank">https://demo.example.com/4436/posts/82f57ccc</a> ï¼Œåªéœ€è¦è®°åŸŸåå³å¯</p><img src="/posts/82f57ccc/20200119161557.png" title="URLé‡å†™ä¹‹å"><p>åªæœ‰ä½ çš„æœåŠ¡å™¨å¤Ÿå¤§ï¼Œä¸€ä¸ªé€šè¿‡ä¸€ä¸ªæœåŠ¡ä»£ç†æ— æ•°ä¸ªæœ¬åœ°æœåŠ¡ï¼Œå“ªæ€•æœ¬åœ°æ— æ•°ä¸ªnodejsæœåŠ¡å™¨ä» 10000-65535 ç›‘å¬ï¼Œéƒ½å¯ä»¥çš„ï¼Œåªéœ€è¦åšå¥½åå‘ä»£ç†å³å¯</p><h2 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h2><ol><li>é¦–å…ˆéœ€è¦æœ‰ä¸ª IIS æœåŠ¡å™¨</li><li>ç„¶åå»å®˜ç½‘ä¸‹è½½ <a href="https://www.iis.net/downloads/microsoft/web-platform-installer" rel="external nofollow noopener noreferrer" target="_blank">webå¹³å°å®‰è£…å·¥å…·</a></li><li>ç„¶åå®‰è£…å·¥å…·å¹¶æ‰“å¼€</li></ol><img src="/posts/82f57ccc/1076304-20180412200431336-787173232.png" title="webå¹³å°å®‰è£…å·¥å…·"><ol start="4"><li>æœç´¢ Application Request Routing æˆ–è€… åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”± ï¼Œå’Œ url é‡å†™å·¥å…· æˆ–è€… url rewriteï¼›å› ä¸ºæœ‰å¯èƒ½æ˜¯è‹±æ–‡ä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸­æ–‡ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªæœç´¢ä¸åˆ°æ—¶ï¼Œæœç´¢å¦ä¸€ä¸ªè¯­è¨€ï¼Œä¸€å®šè¦åœ¨äº§å“å…¨éƒ¨ä¸­æœç´¢</li></ol><img src="/posts/82f57ccc/1076304-20180412200848094-824241073.png" title="webå¹³å°å®‰è£…å·¥å…·"><ol start="5"><li><p>æœ€è¿‘ï¼ˆ2019åº•2020åˆï¼‰ä¸çŸ¥é“ webå¹³å°å®‰è£…å·¥å…·å‡ºä»€ä¹ˆé—®é¢˜äº†ï¼Œä¸€ç›´å®‰è£…ä¸äº†ï¼Œæœ‰æ—¶å€™ç”šè‡³ä¼šæ‰“ä¸å¼€ï¼Œæ‰€ä»¥è¿™é‡Œç•™ä¸ªå®˜ç½‘ä¸‹è½½å•æ¨¡å—çš„é“¾æ¥ï¼š<a href="https://www.iis.net/downloads/microsoft/url-rewrite" rel="external nofollow noopener noreferrer" target="_blank">url rewrite</a>ï¼Œ<a href="https://www.iis.net/downloads/microsoft/application-request-routing" rel="external nofollow noopener noreferrer" target="_blank">Application Request Routing</a>ï¼Œ<a href="https://www.iis.net/downloads" rel="external nofollow noopener noreferrer" target="_blank">All Modules Downloads</a>ï¼›æ‹‰åˆ°åº•ä¸‹ä¼šæœ‰ä¸‹è½½é“¾æ¥ï¼Œurl rewrite æœ‰å¯¹åº”çš„ä¸­æ–‡ç‰ˆæœ¬ã€‚</p></li><li><p>ä¸‹è½½å®‰è£…å³å¯</p></li></ol><h3 id="ç½‘ç›˜é“¾æ¥"><a href="#ç½‘ç›˜é“¾æ¥" class="headerlink" title="ç½‘ç›˜é“¾æ¥"></a>ç½‘ç›˜é“¾æ¥</h3><ol><li>ç™¾åº¦ç½‘ç›˜ï¼š</li></ol><ul><li>Application Request Routingï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1Wg6u6IJVMqa-DeK5y8Ym6w" rel="external nofollow noopener noreferrer" target="_blank">https://pan.baidu.com/s/1Wg6u6IJVMqa-DeK5y8Ym6w</a> æå–ç ï¼šrcic</li><li>url rewriteï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1ePW6HOkqqyHPqNNWyaQ43w" rel="external nofollow noopener noreferrer" target="_blank">https://pan.baidu.com/s/1ePW6HOkqqyHPqNNWyaQ43w</a> æå–ç ï¼šx27v</li></ul><ol start="2"><li>è…¾è®¯ç½‘ç›˜ï¼š</li></ol><ul><li>Application Request Routingï¼šé“¾æ¥ï¼š<a href="https://share.weiyun.com/5iI6q1W" rel="external nofollow noopener noreferrer" target="_blank">https://share.weiyun.com/5iI6q1W</a> å¯†ç ï¼šu47bv6</li><li>url rewriteï¼šé“¾æ¥ï¼š<a href="https://share.weiyun.com/52XIKfL" rel="external nofollow noopener noreferrer" target="_blank">https://share.weiyun.com/52XIKfL</a> å¯†ç ï¼š57fkan</li></ul><h2 id="åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®"><a href="#åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®" class="headerlink" title="åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®"></a>åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®</h2><ol><li>æ‰“å¼€IISå·¥å…·ï¼Œé€‰æ‹©ä¸Šé¢å®‰è£…çš„è¯·æ±‚è·¯ç”±</li></ol><img src="/posts/82f57ccc/1076304-20180412201157869-978989213.png" title="åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®"><ol start="2"><li>é€‰æ‹© Server Proxy Settings</li></ol><img src="/posts/82f57ccc/1076304-20180412201244421-675549952.png" title="åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®"><ol start="3"><li>åœ¨ä¸­é—´åŒºåŸŸï¼Œé€‰æ‹©å‹¾é€‰Enable proxyï¼Œä¸ç”¨ä¿®æ”¹å†…å®¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå·±ä¿®æ”¹</li></ol><img src="/posts/82f57ccc/1076304-20180412201358722-1759010199.png" title="åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®"><ol start="4"><li>ç‚¹å‡»åº”ç”¨å³å¯ï¼Œå®Œæˆè¯·æ±‚è·¯ç”±çš„è®¾ç½®</li></ol><img src="/posts/82f57ccc/1076304-20180412201437572-1668674268.png" title="åº”ç”¨ç¨‹åºè¯·æ±‚è·¯ç”±è®¾ç½®"><h2 id="urlé‡å†™è®¾ç½®ï¼šè¿™é‡Œè®²åŸºæœ¬å‚æ•°ï¼Œåé¢æ‰ä¼šæ˜¯ä¾‹å­"><a href="#urlé‡å†™è®¾ç½®ï¼šè¿™é‡Œè®²åŸºæœ¬å‚æ•°ï¼Œåé¢æ‰ä¼šæ˜¯ä¾‹å­" class="headerlink" title="urlé‡å†™è®¾ç½®ï¼šè¿™é‡Œè®²åŸºæœ¬å‚æ•°ï¼Œåé¢æ‰ä¼šæ˜¯ä¾‹å­"></a>urlé‡å†™è®¾ç½®ï¼šè¿™é‡Œè®²åŸºæœ¬å‚æ•°ï¼Œåé¢æ‰ä¼šæ˜¯ä¾‹å­</h2><ol><li>æ‰“å¼€ç«™ç‚¹ï¼Œé€‰æ‹©éœ€è¦urlé‡å†™çš„ç«™ç‚¹</li></ol><img src="/posts/82f57ccc/1076304-20180412201808214-1496956504.png" title="urlé‡å†™è®¾ç½®"><ol start="2"><li>å½“å®‰è£…å®Œæˆurlé‡å†™æ—¶ï¼Œä¼šå‡ºç°urlé‡å†™è¿™ä¸ªå·¥å…·ï¼Œé€‰æ‹©å·¥å…·ï¼Œåå­—ä¹Ÿæœ‰å¯èƒ½æ˜¯è‹±æ–‡</li></ol><img src="/posts/82f57ccc/1076304-20180412201916597-1448053593.png" title="urlé‡å†™è®¾ç½®"><ol start="3"><li>æ‰“å¼€å·¥å…·ï¼Œé€‰åœ¨å³ä¾§æ ç¬¬ä¸€è¡Œæ·»åŠ è§„åˆ™ï¼Œæ‰“å¼€å¯¹è¯æ¡†ï¼Œé€‰æ‹©ç©ºç™½è§„åˆ™</li></ol><img src="/posts/82f57ccc/1076304-20180412202043308-320482397.png" title="urlé‡å†™è®¾ç½®"><ol start="4"><li>è¾“å…¥åç§°ï¼Œéšæ„ï¼Œä½†æ˜¯å°½é‡èƒ½è¡¨ç¤ºå‡ºé‡å†™ç›®æ ‡çš„å«ä¹‰</li></ol><img src="/posts/82f57ccc/1076304-20180412203113345-943932106.png" title="urlé‡å†™è®¾ç½®"><ol start="5"><li>åŒ¹é…urlï¼Œè¯·æ±‚çš„url(å­—é¢æ„æ€)ï¼šä¸æ¨¡å¼åŒ¹é…ï¼ˆæ¨èï¼‰ï¼Œä¸æ¨¡å¼ä¸åŒ¹é…ï¼›ä½¿ç”¨(åŒ¹é…ä½¿ç”¨çš„æ–¹å¼)ï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼ˆæ¨èï¼‰ï¼Œé€šé…ç¬¦ï¼Œå®Œå…¨åŒ¹é…ï¼›</li></ol><img src="/posts/82f57ccc/1076304-20180412203336729-93686218.png" title="urlé‡å†™è®¾ç½®"><ol start="6"><li>æ¨¡å¼ï¼šæ¯”å¦‚è¯´hostä»£è¡¨ä¸»æœºåŸŸåï¼Œåˆ™åœ¨è¿™é‡Œé¢å†™çš„å°±æ˜¯hostä¹‹åçš„æ­£åˆ™åŒ¹é…è¡¨è¾¾å¼ï¼Œæ¯”å¦‚åŒ¹é…åœ¨host/blog/ï¼Œä¹‹ä¸‹çš„éƒ½è½¬åˆ°nodejsæ­å»ºçš„æœåŠ¡ä¸Šï¼Œåˆ™è¿™é‡Œå¡«å†™^blog/(.*)ï¼›ç‚¹å‡»æµ‹è¯•æ¨¡å¼ï¼Œæˆ‘ä»¬å¡«å†™ä¸‹é¢å›¾ç‰‡å†…å®¹è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°æµ‹è¯•ç»“æœä¸­æœ‰ä¸ª{R:1}ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶å¯¼å‘è‡³nodejsæ­å»ºçš„æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯é‡å†™ç›®æ ‡</li></ol><img src="/posts/82f57ccc/1076304-20180412203903048-2138965636.png" title="urlé‡å†™è®¾ç½®"><ol start="7"><li><p>å¿½ç•¥å¤§å°å†™ï¼Œè‡ªç„¶å°±æ˜¯å­—é¢æ„æ€</p></li><li><p>ä¸‹é¢ä¾¿æ˜¯æ¡ä»¶ï¼ŒæŒ‰ç…§å›¾ç‰‡æ¥è¿›è¡Œå¡«å†™ï¼Œè¿™é‡Œä¸å…·ä½“ç»†æ•°æ¡ä»¶ç±»å‹å’Œè§„åˆ™æ¨¡å¼å¡«å†™ï¼Œåé¢æœ‰ä¸‰ä¸ªä¾‹å­è¿›è¡Œäº†åŸºæœ¬è®²è¿°ï¼Œå…¶ä½™çš„è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</p></li></ol><img src="/posts/82f57ccc/1076304-20180412204422154-761160361.png" title="urlé‡å†™è®¾ç½®"><ol start="9"><li>æœåŠ¡å™¨å˜é‡å¯ä»¥ä¸å†™ï¼Œæ“ä½œç±»å‹å¯ä»¥å› æƒ…å†µè€Œå®šï¼Œä¸€èˆ¬ä½¿ç”¨ é‡å®šå‘æˆ–è€…é‡å†™ï¼ˆhttpå¼ºåˆ¶è·³è½¬httpsä¸€èˆ¬ä¸ºé‡å®šå‘ï¼Œå…¶ä½™å¤§å¤šæ•°ä¸ºé‡å†™ï¼‰</li></ol><p>é‡å†™URLï¼šæ¯”å¦‚åšå®¢æ˜¯åœ¨nodejsæ­å»ºçš„æœåŠ¡ä¸Šï¼Œå¹¶ä¸”ç›‘å¬æœ¬åœ°3001ç«¯å£æ—¶ï¼Œå¡«å†™<a href="http://127.0.0.1:3001/{R:1}ï¼Œè¿™ä¸ª{R:1}å°±æ˜¯ä¸Šé¢æ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå…¶å®è®¿é—®www.example.com/blog/index.htmlï¼Œå°±æ˜¯ç›¸å½“äºè®¿é—®http://127.0.0.1:3001/index.htmlï¼Œè¿™æ ·ç›‘å¬æœ¬åœ°3001ï¼Œä¸ç”¨å…¬ç½‘3001ï¼Œå¯ä»¥å‡å°‘æœåŠ¡å™¨å±é™©" rel="external nofollow noopener noreferrer" target="_blank">http://127.0.0.1:3001/{R:1}ï¼Œè¿™ä¸ª{R:1}å°±æ˜¯ä¸Šé¢æ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå…¶å®è®¿é—®www.example.com/blog/index.htmlï¼Œå°±æ˜¯ç›¸å½“äºè®¿é—®http://127.0.0.1:3001/index.htmlï¼Œè¿™æ ·ç›‘å¬æœ¬åœ°3001ï¼Œä¸ç”¨å…¬ç½‘3001ï¼Œå¯ä»¥å‡å°‘æœåŠ¡å™¨å±é™©</a></p><p>åœæ­¢åç»­è§„åˆ™ï¼Œè‡ªç„¶å°±æ˜¯å­—é¢æ„æ€ï¼Œä¸€æ—¦å‹¾é€‰åï¼ŒåŒ¹é…å¤„ç†ç»“æŸï¼Œå°†ä¸å†å¤„ç†ä¸‹é¢çš„å…¶ä»–è§„åˆ™</p><img src="/posts/82f57ccc/1076304-20180412204907092-626474199.png" title="urlé‡å†™è®¾ç½®"><ol start="10"><li>ç‚¹å‡»å³ä¾§æ åº”ç”¨å³å¯ï¼Œå½“åº”ç”¨æ˜¾ç¤ºç°è‰²æ—¶ï¼Œè¯æ˜æœ‰å¿…å¡«é¡¹æ²¡æœ‰å¡«å†™ï¼Œæ‰€ä»¥æ— æ³•åº”ç”¨ï¼Œåˆ°è¿™é‡Œä¹Ÿå°±é‡å†™å®Œæ¯•ã€‚</li></ol><h2 id="åå‘ä»£ç†ä¾‹å­"><a href="#åå‘ä»£ç†ä¾‹å­" class="headerlink" title="åå‘ä»£ç†ä¾‹å­"></a>åå‘ä»£ç†ä¾‹å­</h2><p>ç›®å‰å…±æœ‰å››ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>httpå¼ºåˆ¶è·³è½¬httpsä¸Šï¼ˆä¸€èˆ¬ç½‘ç«™éƒ½ä¼šä½¿ç”¨ï¼Œå…¨ç«™httpsæ˜¯è¶‹åŠ¿ï¼‰</li><li>æ‰€æœ‰é¡µé¢éƒ½è¿”å›åŒä¸€ä¸ªé™æ€é¡µï¼ˆé€‚åˆç½‘ç«™è°ƒæ•´ï¼Œæ•´æ”¹ï¼Œä»¥åŠè¯´æ˜æ—¶ï¼‰</li><li>éšè—å…¶ä½™ç«¯å£è®¿é—®ï¼Œä¸€ä¸ªæš´éœ²çš„æœåŠ¡å™¨åé¢éšè—å¤šä¸ªç›‘å¬æœ¬åœ°çš„æœåŠ¡ï¼ˆä»£ç†å¤šä¸ªå†…éƒ¨æœåŠ¡ï¼‰</li><li>éšè—è®¿é—®çš„æ–‡ä»¶ç±»å‹ï¼ˆ*.phpæ–‡ä»¶å¯ä»¥éšè—æˆ–æ›´æ”¹æ–‡ä»¶åç¼€ï¼‰</li></ul><h3 id="httpå¼ºåˆ¶è·³è½¬httpsä¸Š"><a href="#httpå¼ºåˆ¶è·³è½¬httpsä¸Š" class="headerlink" title="httpå¼ºåˆ¶è·³è½¬httpsä¸Š"></a>httpå¼ºåˆ¶è·³è½¬httpsä¸Š</h3><ol><li>é‡å†™è§„åˆ™åç§°ï¼Œä»¥åŠè¯·æ±‚çš„æ­£åˆ™åŒ¹é…</li></ol><img src="/posts/82f57ccc/20200120135333.png" title="httpå¼ºåˆ¶è·³è½¬https"><ol start="2"><li>è¯·æ±‚æ¡ä»¶ç­›é€‰</li></ol><img src="/posts/82f57ccc/20200120135842.png" title="httpå¼ºåˆ¶è·³è½¬https"><p>åŸŸåå’ŒhttpsçŠ¶æ€ä¸€å®šè¦æ ¸å¯¹æ¸…é™¤ï¼Œå¹¶ä¸”åŒ¹é…è¦é€‰æ‹©å…¨éƒ¨åŒ¹é…</p><ol start="3"><li>è¯·æ±‚åŒ¹é…ï¼Œæ¡ä»¶è¿‡æ»¤åå°±æ˜¯è¦é‡å®šå‘çš„åœ°å€</li></ol><img src="/posts/82f57ccc/20200120140954.png" title="httpå¼ºåˆ¶è·³è½¬https"><p>å…¶ä¸­ {R:1} å°±æ˜¯æŒ‡åŸè¯·æ±‚ä¸­çš„è·¯å¾„ï¼Œæ¯”å¦‚ï¼š<a href="http://demo.example.com/blog/posts/dec13d34" rel="external nofollow noopener noreferrer" target="_blank">http://demo.example.com/blog/posts/dec13d34</a> å®ƒçš„è¯·æ±‚è·¯å¾„å°±æ˜¯ blog/posts/dec13d34ï¼Œæ‰€ä»¥åœ¨é‡å®šå‘çš„åŸŸååéœ€è¦æ·»åŠ  <code>/</code></p><p>ç„¶åå°±å¯ä»¥å°† http è¯·æ±‚å¼ºåˆ¶è·³è½¬åˆ° https ä¸Š</p><p>åœ¨æœ€åä¼šé™„æœ‰ <code>web.config</code> é…ç½®æ–‡ä»¶</p><h3 id="æ‰€æœ‰é¡µé¢éƒ½è¿”å›åŒä¸€ä¸ªé™æ€é¡µ"><a href="#æ‰€æœ‰é¡µé¢éƒ½è¿”å›åŒä¸€ä¸ªé™æ€é¡µ" class="headerlink" title="æ‰€æœ‰é¡µé¢éƒ½è¿”å›åŒä¸€ä¸ªé™æ€é¡µ"></a>æ‰€æœ‰é¡µé¢éƒ½è¿”å›åŒä¸€ä¸ªé™æ€é¡µ</h3><p>åœ¨ä¸Šé¢æˆ‘ä»¬å°†æ¯ä¸ªhttpè¯·æ±‚éƒ½é‡å®šå‘åˆ°httpsä¸Šï¼Œç›¸å½“äºä¸€ä¸ªhttpå¯¹åº”ä¸€ä¸ªhttpsï¼Œé€šè¿‡ <code>{R:1}</code> æ¥åŠ¨æ€èµ‹å€¼</p><p>ä½†æ˜¯å¦‚æœæ·±å…¥ä¸€æƒ³ï¼Œå‡è®¾æˆ‘ä»¬å°† <code>{R:1}</code> å›ºå®šæŒ‡å‘ <code>index.html</code>ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè¿”å› <code>index.html</code> å†…å®¹ï¼Œåœ¨å°†é‡å®šå‘æ”¹ä¸ºé‡å†™ï¼Œä¿æŒå®¢æˆ·ç«¯urlä¸å˜ï¼Œä½†æ˜¯å†…å®¹å·²ç»è¢«é‡å†™ä¸º <code>index.html</code> çš„å†…å®¹äº†</p><p>é‡å†™åŸŸåå¯ä»¥ä½¿ç”¨ <code>http://localhost:port/</code> æˆ–è€… <code>http://127.0.0.1:port/</code></p><p>æ‰€ä»¥å®ç°è®¿é—®ä»»ä½•é¡µé¢éƒ½è¿”å›åŒä¸€ä¸ªå†…å®¹æ˜¯å¾ˆè½»æ¾çš„ã€‚</p><p>åœ¨æœ€åä¼šé™„æœ‰ <code>web.config</code> é…ç½®æ–‡ä»¶</p><h3 id="éšè—å…¶ä½™ç«¯å£è®¿é—®ï¼Œä¸€ä¸ªæš´éœ²çš„æœåŠ¡å™¨åé¢éšè—å¤šä¸ªç›‘å¬æœ¬åœ°çš„æœåŠ¡ï¼ˆä»£ç†å¤šä¸ªå†…éƒ¨æœåŠ¡ï¼‰"><a href="#éšè—å…¶ä½™ç«¯å£è®¿é—®ï¼Œä¸€ä¸ªæš´éœ²çš„æœåŠ¡å™¨åé¢éšè—å¤šä¸ªç›‘å¬æœ¬åœ°çš„æœåŠ¡ï¼ˆä»£ç†å¤šä¸ªå†…éƒ¨æœåŠ¡ï¼‰" class="headerlink" title="éšè—å…¶ä½™ç«¯å£è®¿é—®ï¼Œä¸€ä¸ªæš´éœ²çš„æœåŠ¡å™¨åé¢éšè—å¤šä¸ªç›‘å¬æœ¬åœ°çš„æœåŠ¡ï¼ˆä»£ç†å¤šä¸ªå†…éƒ¨æœåŠ¡ï¼‰"></a>éšè—å…¶ä½™ç«¯å£è®¿é—®ï¼Œä¸€ä¸ªæš´éœ²çš„æœåŠ¡å™¨åé¢éšè—å¤šä¸ªç›‘å¬æœ¬åœ°çš„æœåŠ¡ï¼ˆä»£ç†å¤šä¸ªå†…éƒ¨æœåŠ¡ï¼‰</h3><p>åœ¨å¯ä»¥é‡å†™åˆ°æŒ‡å®šçš„å…¶ä»–æœåŠ¡åœ°å€ä¸Šå»ï¼Œé‚£ä¹ˆåŒæ ·ä¹Ÿå¯ä»¥å°†æœ¬åœ°ç›‘å¬é 80 443 ç«¯å£çš„æœåŠ¡è¿›è¡ŒæœåŠ¡å™¨å±‚é¢çš„éšè—</p><p>æ¯”å¦‚åŸæœ¬è®¿é—® <a href="https://demo.example.com:4436/posts/82f57ccc" rel="external nofollow noopener noreferrer" target="_blank">https://demo.example.com:4436/posts/82f57ccc</a> å†…å®¹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨é‡å†™è¿›è¡Œæ”¹å˜</p><p>é‡å†™è¯·æ±‚æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ­£åˆ™åŒ¹é…å†…å®¹ä¸ºï¼š<code>^4436/(.*)</code></p><p>æœåŠ¡å™¨æ¡ä»¶ï¼ŒåŸŸåæ¥æºä¸ºï¼š<code>^demo\.example\.com$</code></p><p>é‡å†™urlå¯ä»¥ä¸ºï¼š<code>https://demo.example.com:4436/{R:1}</code></p><p>é‚£ä¹ˆå¯ä»¥å°†æ˜é¢ä¸Šçš„è¯·æ±‚ <a href="https://demo.example.com/4436/posts/82f57ccc" rel="external nofollow noopener noreferrer" target="_blank">https://demo.example.com/4436/posts/82f57ccc</a> è¿›è¡Œurlé‡å†™</p><p>å…ˆé€šè¿‡è¯·æ±‚åŒ¹é… <code>^4436/(.*)</code> è·å–åˆ° <code>{R:1}</code> ä¸º <code>posts/82f57ccc</code></p><p>ç„¶åå°† <code>{R:1}</code> è½¬å‘åˆ° <code>https://demo.example.com:4436/</code> ä¸Šï¼Œå°±å¯ä»¥å®Œæˆè¯·æ±‚ä»£ç†</p><h3 id="éšè—è®¿é—®çš„æ–‡ä»¶ç±»å‹ï¼ˆ-phpæ–‡ä»¶å¯ä»¥éšè—æˆ–æ›´æ”¹æ–‡ä»¶åç¼€ï¼‰"><a href="#éšè—è®¿é—®çš„æ–‡ä»¶ç±»å‹ï¼ˆ-phpæ–‡ä»¶å¯ä»¥éšè—æˆ–æ›´æ”¹æ–‡ä»¶åç¼€ï¼‰" class="headerlink" title="éšè—è®¿é—®çš„æ–‡ä»¶ç±»å‹ï¼ˆ*.phpæ–‡ä»¶å¯ä»¥éšè—æˆ–æ›´æ”¹æ–‡ä»¶åç¼€ï¼‰"></a>éšè—è®¿é—®çš„æ–‡ä»¶ç±»å‹ï¼ˆ*.phpæ–‡ä»¶å¯ä»¥éšè—æˆ–æ›´æ”¹æ–‡ä»¶åç¼€ï¼‰</h3><p>ç›¸åº”çš„ï¼Œæ—¢ç„¶è¯·æ±‚åŒ¹é…å¯ä»¥åŒ¹é…æŒ‡å®šè·¯å¾„ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥åŒ¹é…æŒ‡å®šæ–‡ä»¶ï¼Œæ¯”å¦‚è¯´ï¼šè¯·æ±‚çš„ä¸º <code>php</code> æ–‡ä»¶</p><p>æ¯”å¦‚åŸæœ¬è®¿é—® <a href="https://demo.example.com/posts/82f57ca2phpf" rel="external nofollow noopener noreferrer" target="_blank">https://demo.example.com/posts/82f57ca2phpf</a> å†…å®¹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨é‡å†™è¿›è¡Œæ”¹å˜</p><p>é‡å†™è¯·æ±‚æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ­£åˆ™åŒ¹é…å†…å®¹ä¸ºï¼š<code>(.*)phpf$</code></p><p>æœåŠ¡å™¨æ¡ä»¶ï¼ŒåŸŸåæ¥æºä¸ºï¼š<code>^demo\.example\.com$</code></p><p>é‡å†™urlå¯ä»¥ä¸ºï¼š<code>https://demo.example.com/{R:1}.php</code></p><p>é‚£ä¹ˆå¯ä»¥å°†æ˜é¢ä¸Šçš„è¯·æ±‚ <a href="https://demo.example.com/posts/82f57ca2phpf" rel="external nofollow noopener noreferrer" target="_blank">https://demo.example.com/posts/82f57ca2phpf</a> è¿›è¡Œurlé‡å†™</p><p>å…ˆé€šè¿‡è¯·æ±‚åŒ¹é… <code>(.*)phpf$</code> è·å–åˆ° <code>{R:1}</code> ä¸º <code>posts/82f57ca2</code></p><p>ç„¶åå°† <code>{R:1}</code> è½¬å‘åˆ° <code>https://demo.example.com/{R:1}.php</code> ä¸Šï¼Œå®é™…è¯·æ±‚ä¸ºï¼š<code>https://demo.example.com/posts/82f57ca2.php</code></p><h2 id="web-configé…ç½®æ–‡ä»¶"><a href="#web-configé…ç½®æ–‡ä»¶" class="headerlink" title="web.configé…ç½®æ–‡ä»¶"></a><code>web.config</code>é…ç½®æ–‡ä»¶</h2><p><code>web.config</code> é…ç½®æ–‡ä»¶æ”¾ç½®åœ¨ iis ç«™ç‚¹çš„æ ¹ç›®å½•</p><p>å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚è¿›è¡Œæ›´æ”¹</p><p>åœ¨çº¿ä»£ç å—ï¼š<a href="https://gist.github.com/SpiritLing/c0f12694158378594991a3084c433df3" rel="external nofollow noopener noreferrer" target="_blank">gist</a>ï¼Œ<a href="https://gitee.com/SpiritLing/codes/jyiepcqdkohrlm56b0axn35" rel="external nofollow noopener noreferrer" target="_blank">gitee</a></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--- Origin Releaseï¼šhttps://blog.spiritling.cn/posts/82f57ccc/ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--- Origin Developï¼šhttps://dev.blog.spiritling.pub/posts/82f57ccc/ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">system.webServer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rewrite</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">rules</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">clear</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- htpt =&gt; https --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">rule</span> <span class="attr">name</span>=<span class="string">"demo-https"</span> <span class="attr">enabled</span>=<span class="string">"true"</span> <span class="attr">stopProcessing</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">match</span> <span class="attr">url</span>=<span class="string">"(.*)"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">conditions</span> <span class="attr">logicalGrouping</span>=<span class="string">"MatchAll"</span> <span class="attr">trackAllCaptures</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">add</span> <span class="attr">input</span>=<span class="string">"&#123;HTTPS&#125;"</span> <span class="attr">pattern</span>=<span class="string">"^OFF$"</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">add</span> <span class="attr">input</span>=<span class="string">"&#123;HTTP_HOST&#125;"</span> <span class="attr">pattern</span>=<span class="string">"^demo\.example\.com$"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">conditions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">action</span> <span class="attr">type</span>=<span class="string">"Redirect"</span> <span class="attr">url</span>=<span class="string">"https://demo.example.com/&#123;R:1&#125;"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">rule</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- https domain/4436 =&gt; https domain:4436 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">rule</span> <span class="attr">name</span>=<span class="string">"demo"</span> <span class="attr">enabled</span>=<span class="string">"true"</span> <span class="attr">stopProcessing</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">match</span> <span class="attr">url</span>=<span class="string">"^4436/(.*)"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">conditions</span> <span class="attr">logicalGrouping</span>=<span class="string">"MatchAll"</span> <span class="attr">trackAllCaptures</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">add</span> <span class="attr">input</span>=<span class="string">"&#123;HTTPS&#125;"</span> <span class="attr">pattern</span>=<span class="string">"^ON$"</span> /&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">add</span> <span class="attr">input</span>=<span class="string">"&#123;HTTP_HOST&#125;"</span> <span class="attr">pattern</span>=<span class="string">"^demo\.example\.com$"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">conditions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">action</span> <span class="attr">type</span>=<span class="string">"Rewrite"</span> <span class="attr">url</span>=<span class="string">"https://demo.example.com:4436/&#123;R:1&#125;"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">rule</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- domain =&gt; https://localhost --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">rule</span> <span class="attr">name</span>=<span class="string">"index"</span> <span class="attr">stopProcessing</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">match</span> <span class="attr">url</span>=<span class="string">"(.*)"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">conditions</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">add</span> <span class="attr">input</span>=<span class="string">"&#123;HTTP_HOST&#125;"</span> <span class="attr">pattern</span>=<span class="string">"^test\.example\.com$"</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">conditions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">action</span> <span class="attr">type</span>=<span class="string">"Rewrite"</span> <span class="attr">url</span>=<span class="string">"https://localhost"</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">rule</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">rules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rewrite</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">caching</span> <span class="attr">enabled</span>=<span class="string">"false"</span> <span class="attr">enableKernelCache</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">system.webServer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>iis</category>
      </categories>
      <tags>
        <tag>iis</tag>
        <tag>åå‘ä»£ç†</tag>
        <tag>urlé‡å†™</tag>
        <tag>url rewrite</tag>
      </tags>
  </entry>
  <entry>
    <title>koa2 ç›¸å…³çš„è®°å½•</title>
    <url>/posts/71d38ff0/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>koa2 ç›¸å…³çš„è®°å½• ç¬¬ä¸€èŠ‚</p></blockquote><a id="more"></a><h2 id="koa-å¦‚ä½•ä¼˜é›…çš„æ‰‹åŠ¨ä¸­æ–­è¯·æ±‚"><a href="#koa-å¦‚ä½•ä¼˜é›…çš„æ‰‹åŠ¨ä¸­æ–­è¯·æ±‚" class="headerlink" title="koa å¦‚ä½•ä¼˜é›…çš„æ‰‹åŠ¨ä¸­æ–­è¯·æ±‚"></a>koa å¦‚ä½•ä¼˜é›…çš„æ‰‹åŠ¨ä¸­æ–­è¯·æ±‚</h2><h3 id="äº‹ä»¶èµ·å› "><a href="#äº‹ä»¶èµ·å› " class="headerlink" title="äº‹ä»¶èµ·å› "></a>äº‹ä»¶èµ·å› </h3><p>åœ¨å¼€å‘è‡ªå·±çš„blogç³»ç»Ÿæ—¶ï¼Œåç«¯é‡‡ç”¨äº†koa2æ¥å¤„ç†ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¯ä»¥ç®—æ˜¯æ¯”è¾ƒå®Œç¾å’Œèˆ’æœäº†ã€‚</p><p>ä½†æ˜¯åœ¨æˆ‘è¿›è¡Œä¸€ä¸ªæœ€åˆçš„ç™»å½•apiæ—¶å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œä»¥ä¸‹æ˜¯è¿™ä¸ªapiå¤„ç†é€»è¾‘ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!username || !password) &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­ä¸è¿‡ï¼Œç›´æ¥ç»“æŸåç»­æ“ä½œï¼Œä¸æƒ³ä½¿ç”¨ if else å°±æ˜¯å› ä¸ºå«Œçœ‹èµ·æ¥å¤ªéº»çƒ¦äº†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> user = <span class="keyword">await</span> db.user.findOne(&#123;</span><br><span class="line">        where : &#123;</span><br><span class="line">            username</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!user) &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ™ä¹Ÿç›´æ¥ç»“æŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœå­˜åœ¨ç›´æ¥è¿”å›ç”¨æˆ·</span></span><br><span class="line">    ctx.body = user;</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    logger.error(err);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘æ— æ³•æå‰ç»“æŸæœ¬æ¬¡çš„è¯·æ±‚ï¼Œä¸è®ºä½¿ç”¨ <code>return;</code> <code>return next()</code> â€¦ ç­‰ç­‰</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>åœ¨æˆ‘è¿›è¡Œå®˜ç½‘æŸ¥è¯¢æ—¶ï¼Œå‘ç°å¯ä»¥ä½¿ç”¨ nodejs åŸç”Ÿçš„ <code>res.end()</code> æ¥ç»“æŸ</p><p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ <a href="https://github.com/koajs/koa/blob/master/docs/api/context.md#ctxres" rel="external nofollow noopener noreferrer" target="_blank">ctx.res æ˜¯ Nodejs çš„ response</a>ï¼Œä½†æ˜¯é—®é¢˜æ˜¯å¹¶ä¸æ”¯æŒ <code>res.end()</code>ï¼Œä¹Ÿå°±æ˜¯ <code>ctx.res.end()</code> å‡½æ•°ã€‚</p><hr><blockquote class="blockquote-center"><p>å®˜æ–¹æ–‡æ¡£</p></blockquote><p>Nodeâ€™s <code>response</code> object.</p><p>Bypassing Koaâ€™s response handling is <strong>not supported</strong>. Avoid using the following node properties:</p><ul><li><code>res.statusCode</code></li><li><code>res.writeHead()</code></li><li><code>res.write()</code></li><li><code>res.end()</code></li></ul><hr><p>koa ä¸å»ºè®®ç›´æ¥ç»“æŸï¼Œäºæ˜¯æˆ‘ç»§ç»­æŸ¥æ‰¾èµ„æ–™ï¼Œå‘ç°äº† <a href="https://github.com/koajs/koa/blob/master/docs/api/context.md#ctxthrowstatus-msg-properties" rel="external nofollow noopener noreferrer" target="_blank"><code>koa.throw</code></a> è¿™ä¸ªå‡½æ•°ï¼Œ</p><hr><blockquote class="blockquote-center"><p>å®˜æ–¹æ–‡æ¡£</p></blockquote><p>ctx.throw([status], [msg], [properties])<br>Helper method to throw an error with a <code>.status</code> property<br>defaulting to <code>500</code> that will allow Koa to respond appropriately.<br>The following combinations are allowed:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ctx.throw(<span class="number">400</span>);</span><br><span class="line">ctx.throw(<span class="number">400</span>, <span class="string">'name required'</span>);</span><br><span class="line">ctx.throw(<span class="number">400</span>, <span class="string">'name required'</span>, &#123; <span class="attr">user</span>: user &#125;);</span><br></pre></td></tr></table></figure><p>For example <code>ctx.throw(400, &#39;name required&#39;)</code> is equivalent to:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> err = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'name required'</span>);</span><br><span class="line">err.status = <span class="number">400</span>;</span><br><span class="line">err.expose = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">throw</span> err;</span><br></pre></td></tr></table></figure><p>Note that these are user-level errors and are flagged with<br><code>err.expose</code> meaning the messages are appropriate for<br>client responses, which is typically not the case for<br>error messages since you do not want to leak failure<br>details.</p><p>You may optionally pass a <code>properties</code> object which is merged into the error as-is, useful for decorating machine-friendly errors which are reported to the requester upstream.</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ctx.throw(<span class="number">401</span>, <span class="string">'access_denied'</span>, &#123; <span class="attr">user</span>: user &#125;);</span><br></pre></td></tr></table></figure><p>Koa uses <a href="https://github.com/jshttp/http-errors" rel="external nofollow noopener noreferrer" target="_blank">http-errors</a> to create errors. <code>status</code> should only be passed as the first parameter.</p><hr><p>è¿™ä¸ªå‡½æ•°å¯ä»¥æŠ›å‡ºé”™è¯¯ï¼Œå¹¶<strong>ç»“æŸæœ¬æ¬¡è¯·æ±‚</strong>ï¼Œè€Œ <code>ctx,throw</code> å…¶å®å°±æ˜¯ä¸€ä¸ªé”™è¯¯ç±»å‹ï¼ŒåŸºäº js æœ€åŸå§‹çš„ Error ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>throw new Error</code> æ¥æ‰‹åŠ¨æŠ›å‡ºè‡ªå®šä¹‰é”™è¯¯ã€‚</p><p>å¹¶ä¸”é€šè¿‡ koa ä¸­çš„ next æ¥ï¼Œå¯ä»¥å°†é”™è¯¯æ‹¦æˆªä½ï¼Œå¹¶è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">next().catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123; </span><br><span class="line">    <span class="comment">// do something </span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥å¼€å§‹å°è¯•æ›´æ”¹å’Œå®šä¹‰</p><h3 id="ä¿®æ”¹ä»£ç "><a href="#ä¿®æ”¹ä»£ç " class="headerlink" title="ä¿®æ”¹ä»£ç "></a>ä¿®æ”¹ä»£ç </h3><p>é¦–å…ˆå®ç°è‡ªå®šä¹‰é”™è¯¯</p><p>å°†è‡ªå®šä¹‰é”™è¯¯ç±»å‹ç»§æ‰¿åˆ°æ ‡å‡† Error ç±»ä¸‹</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CustomError</span>(<span class="params">code, data = null</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">Error</span>.call(<span class="keyword">this</span>, <span class="string">''</span>);</span><br><span class="line">    <span class="keyword">this</span>.code = code;</span><br><span class="line">    <span class="keyword">this</span>.body = data;</span><br><span class="line">    <span class="keyword">this</span>.getInfo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            code : <span class="keyword">this</span>.code,</span><br><span class="line">            body : <span class="keyword">this</span>.body,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// inherits https://nodejs.org/docs/latest/api/util.html#util_util_inherits_constructor_superconstructor</span></span><br><span class="line">util.inherits(CustomError, <span class="built_in">Error</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = CustomError;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ ES6 çš„ç±»ç»§æ‰¿ï¼ˆ<a href="http://es6.ruanyifeng.com/#docs/class-extends" rel="external nofollow noopener noreferrer" target="_blank">ä¸æ‡‚çš„å¯ä»¥çœ‹é˜®ä¸€å³°çš„es6æ•™ç¨‹</a>ï¼‰</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomError</span> <span class="keyword">extends</span> <span class="title">Error</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> (code, data = null) &#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.body = data;</span><br><span class="line">    &#125;</span><br><span class="line">    getInfo()&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            code : <span class="keyword">this</span>.code,</span><br><span class="line">            body : <span class="keyword">this</span>.body,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = CustomError;</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰é”™è¯¯å‡½æ•°ï¼Œå¯ä»¥è‡ªå·±å¢åˆ å‚æ•°ã€‚</p><p>å¦‚æœæƒ³æ–¹ä¾¿ä½¿ç”¨ï¼Œä¸ç”¨æ¯æ¬¡å¯¼å…¥ï¼Œå¯ä»¥åœ¨æ¯æ¬¡è¯·æ±‚è¿›å…¥ååœ¨ä¸­é—´ä»¶ä¸­å¤„ç†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> CustomError = <span class="built_in">require</span>(<span class="string">'../utils/customError'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.custom  = &#123;</span><br><span class="line">        error : CustomError,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">await</span> next();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨é€»è¾‘å±‚å¯ä»¥è¿™æ ·ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!username || !password) &#123;</span><br><span class="line">  <span class="comment">// æƒ³ç»“æŸæœ¬æ¬¡è¯·æ±‚ï¼Œå¯ä»¥ç›´æ¥æŠ›å‡ºå³å¯</span></span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> ctx.custom.error(<span class="number">200</span>, &#123;<span class="attr">message</span> : <span class="string">'è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç '</span>&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶è¯·æ±‚éƒ½ç»“æŸäº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å¾—å¤„ç†koaï¼Œå› ä¸ºkoaä¸€æ—¦æ•è·é”™è¯¯åï¼Œä¼šè‡ªåŠ¨å¤„ç†æˆ <code>4xx</code> æˆ–è€… <code>5xx</code> çŠ¶æ€ç ï¼›</p><p>å½“ä½ çš„ç½‘ç«™å‡ºç°å¾ˆå¤šçš„ <code>4xx</code> å’Œ <code>5xx</code>ï¼Œå¯¹æœç´¢å¼•æ“ä¼˜åŒ–æ¥è¯´å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>æ‰€ä»¥ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æˆ‘ä»¬è‡ªå·±å¤„ç† koa çš„æ•è·ã€‚</p><p>ä½¿ç”¨ <code>next().catch()</code> æ¥æ•è·é”™è¯¯</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> next().catch(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">        ctx.status = err.code;</span><br><span class="line">        ctx.body = err.body;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ•è·åï¼Œæˆ‘ä»¬å°† <code>err</code> ä¸­çš„ <code>code</code> èµ‹å€¼ç»™ <code>ctx.status</code> ï¼Œæ”¹å˜ koa çš„å“åº”çŠ¶æ€ï¼ŒåŒç†ï¼Œå°† <code>err</code> ä¸­çš„éœ€è¦è¿”å›çš„æ•°æ®èµ‹å€¼ç»™ koa çš„è¿”å›å€¼</p><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å‰ç«¯æ”¶åˆ°ä¸€ä¸ª200çš„ç»“æœã€‚</p><h3 id="å®Œæˆ"><a href="#å®Œæˆ" class="headerlink" title="å®Œæˆ"></a>å®Œæˆ</h3><p>è¿™æ ·å°±å¯ä»¥æ‰‹åŠ¨ä¼˜é›…çš„ç»“æŸæ­¤æ¬¡è¯·æ±‚ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>NodeJS</category>
        <category>koa</category>
      </categories>
      <tags>
        <tag>koa</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo æ–‡ç« å›¾ç‰‡æ·»åŠ æ°´å°ï¼Œä¸ç”¨äº‘å¤„ç†</title>
    <url>/posts/72dc68b0/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Hexo æ–‡ç« å›¾ç‰‡æ·»åŠ æ°´å°ï¼Œä¸ç”¨äº‘å¤„ç†ï¼Œæœ¬åœ°æ¯æ¬¡æ„å»ºè¿›è¡Œå¤„ç†</p></blockquote><a id="more"></a><p>ç”±äºç½‘ä¸Šæ‰¾åˆ°çš„éƒ½æ˜¯å€Ÿç”¨ç¬¬ä¸‰æ–¹äº‘å¤„ç†æ·»åŠ æ°´å°ï¼Œä½†æ˜¯æˆ‘ä¸å¤ªæƒ³ç”¨ï¼Œæ‰€ä»¥è‡ªå·±å¼€å‘äº†ä¸€ä¸ªæ’ä»¶</p><p><a href="https://github.com/SpiritLing/hexo-images-watermark" rel="external nofollow noopener noreferrer" target="_blank">Hexo å›¾ç‰‡æ·»åŠ æ°´å°Githubåœ°å€</a></p><p>ç›®å‰æ’ä»¶å¯ä»¥ç›´æ¥åœ¨ <code>hexo</code> å®˜ç½‘ä¸Šæœç´¢åˆ°</p><p>ä¸‹é¢å†…å®¹éƒ½æ˜¯åœ¨ <code>Github</code> ä¸Šå¤åˆ¶è¿‡æ¥çš„ï¼Œæˆ‘çš„æ­£å¼ç‰ˆåšå®¢ç›®å‰æŒ‚è½½åœ¨æˆ‘çš„ <code>Github</code> ä»“åº“ <code>blog</code></p><img src="/posts/72dc68b0/5917f3d3862c9.png" title="æ¼”ç¤ºå›¾ç‰‡"><hr><p><a href="https://travis-ci.com/SpiritLing/hexo-images-watermark" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://travis-ci.com/SpiritLing/hexo-images-watermark.svg?branch=master" alt="Build Status"></a><a href="https://www.npmjs.com/package/hexo-images-watermark" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://img.shields.io/npm/v/hexo-images-watermark?label=npm%20version" alt="npm version"></a><a href="https://www.npmjs.com/package/hexo-images-watermark" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://img.shields.io/npm/dm/hexo-images-watermark?label=npm%20downloads" alt="npm package download"></a><a href="https://spdx.org/licenses/GPL-3.0-only.html" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://img.shields.io/npm/l/hexo-images-watermark" alt="NPM License"></a></p><p>ä¸€æ¬¾ç”¨äº Hexo é™æ€åšå®¢ç½‘ç«™ç”Ÿæˆæ—¶å¯¹å›¾ç‰‡æ·»åŠ æ°´å°ã€‚</p><p>ä¸å¯¹åŸå›¾äº§ç”Ÿä»»ä½•å½±å“ï¼Œåœ¨ç½‘ç«™é™æ€é¡µæ„å»ºè¿‡ç¨‹ä¸­å°†åŸå›¾è¯»å–ï¼Œè¾“å‡ºæ·»åŠ äº†æ°´å°çš„å›¾ç‰‡ã€‚</p><p>åœ¨æ„å»ºçš„é™æ€ç½‘ç«™ä¸­ä¸ä¼šå­˜åœ¨åŸå›¾ï¼Œåªå­˜åœ¨æ°´å°å›¾ç‰‡ã€‚</p><blockquote><p>åŸå§‹æ–‡ç« å›¾ç‰‡</p></blockquote><p><a href="https://github.com/SpiritLing/hexo-images-watermark/blob/master/static/origin_image.png" rel="external nofollow noopener noreferrer" target="_blank"><img src="https://github.com/SpiritLing/hexo-images-watermark/blob/master/static/origin_image.png" alt="åŸå›¾ï¼Œå¦‚æœå›¾ç‰‡ä¸æ˜¾ç¤ºè¯·å‰å¾€GithubæŸ¥çœ‹"></a></p><blockquote><p>æ°´å°å›¾ç‰‡</p></blockquote><p><img src="./static/change_image.png" alt="æ°´å°å›¾ï¼Œå¦‚æœå›¾ç‰‡ä¸æ˜¾ç¤ºè¯·å‰å¾€GithubæŸ¥çœ‹"></p><blockquote><p><strong>ä¸€å®šè¦é˜…è¯»æœ€åçš„æç¤ºäº‹é¡¹ï¼ŒåŒ…å«ç°æœ‰ç‰ˆæœ¬çš„æ”¯æŒæƒ…å†µå’Œå³å°†æ·»åŠ çš„åŠŸèƒ½</strong></p></blockquote><p>ä½¿ç”¨ <code>npm</code> å®‰è£…æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-images-watermark --save</span><br></pre></td></tr></table></figure><p>åœ¨ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code> ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">watermark:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">textEnable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">rotate:</span> <span class="number">-30</span></span><br><span class="line">    <span class="attr">gravity:</span> <span class="string">centre</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>hexo generate</code> è¿è¡Œæ—¶ä¼šè‡ªåŠ¨ä¸ºä½ çš„ <code>_post</code> ç›®å½•ä¸‹çš„å›¾ç‰‡æ·»åŠ æ°´å°ï¼Œæ–°çš„å›¾ç‰‡å°†ä¼šæ”¾åˆ° <code>public</code> ç›®å½•ä¸­å¯¹åº”çš„ä½ç½®ã€‚</p><h2 id="å¿…å¤‡é…ç½®å‚æ•°"><a href="#å¿…å¤‡é…ç½®å‚æ•°" class="headerlink" title="å¿…å¤‡é…ç½®å‚æ•°"></a>å¿…å¤‡é…ç½®å‚æ•°</h2><h3 id="enable"><a href="#enable" class="headerlink" title="enable"></a><code>enable</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šæ— <br><strong>è¯´æ˜</strong>ï¼š<code>true</code> å°†ä¼šæ‰§è¡Œå›¾ç‰‡æ·»åŠ æ°´å°ï¼Œ<code>false</code> å°†ä¼šä¸æ‰§è¡Œæ·»åŠ </p><h3 id="textEnable"><a href="#textEnable" class="headerlink" title="textEnable"></a><code>textEnable</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šfalse<br><strong>è¯´æ˜</strong>ï¼šæ˜¯å¦ä½¿ç”¨æ–‡æœ¬æ¥æ·»åŠ æ°´å°ï¼ˆâŒè­¦å‘Šï¼šç›®å‰ä¸æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡åŒæ—¶æ·»åŠ æ°´å°ï¼‰</p><h3 id="imageEnable"><a href="#imageEnable" class="headerlink" title="imageEnable"></a><code>imageEnable</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šfalse<br><strong>è¯´æ˜</strong>ï¼šæ˜¯å¦ä½¿ç”¨å›¾ç‰‡æ¥æ·»åŠ æ°´å°ï¼ˆâŒè­¦å‘Šï¼šç›®å‰ä¸æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡åŒæ—¶æ·»åŠ æ°´å°ï¼‰</p><h2 id="å…¶ä»–å‚æ•°"><a href="#å…¶ä»–å‚æ•°" class="headerlink" title="å…¶ä»–å‚æ•°"></a>å…¶ä»–å‚æ•°</h2><h3 id="text"><a href="#text" class="headerlink" title="text"></a><code>text</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„urlï¼Œä¸€æ—¦urlä¸å­˜åœ¨ç›´æ¥æ˜¾ç¤ºä½œè€…åå­—ï¼ˆSpiritLingï¼‰<br><strong>è¯´æ˜</strong>ï¼šå½“ä½ ä½¿ç”¨çš„æ–‡å­—è¿‡é•¿æ—¶ï¼Œä¸€æ—¦è½¬ä¸ºå›¾ç‰‡åå¤§äºå¾…åŠ æ°´å°çš„å›¾ç‰‡å°ºå¯¸ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯ã€‚</p><h3 id="fontPath"><a href="#fontPath" class="headerlink" title="fontPath"></a><code>fontPath</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šundefinedï¼Œä½¿ç”¨ <code>text-to-svg</code> è‡ªå¸¦å­—ä½“<br><strong>è¯´æ˜</strong>ï¼šè‡ªå·±åŠ è½½éœ€è¦çš„å­—ä½“ï¼Œæ”¯æŒå•ä¸ªå­—ä½“æ–‡ä»¶ï¼Œä¸åŒºåˆ†ä¸­è‹±æ–‡ï¼›å¦‚æœçº¯ä¸­æ–‡ï¼Œè¯·åªåŠ è½½ä¸­æ–‡å­—ä½“ï¼Œä¾‹ï¼šéœ€è¦åŠ è½½ <code>source/static/font/custom.ttf</code> å­—ä½“ç›´æ¥å°†å…¶å†™å…¥åˆ°é…ç½®æ–‡ä»¶ä¸­å³å¯</p><h3 id="color"><a href="#color" class="headerlink" title="color"></a><code>color</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šrgb(169,169,167)<br><strong>è¯´æ˜</strong>ï¼šé¢œè‰²å¯ä»¥ä½¿ç”¨ rgb,rgba,#xxxxxxä»¥åŠredåå­—å¼çš„ã€‚âš ï¸åªå¯¹textæœ‰æ•ˆ</p><h3 id="gravity"><a href="#gravity" class="headerlink" title="gravity"></a><code>gravity</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šsoutheast<br><strong>è¯´æ˜</strong>ï¼šè®¾ç½®æ°´å°ä½ç½®å¤„äºä»€ä¹ˆæ–¹å‘ï¼Œä»¥ <code>ä¸ŠåŒ—ä¸‹å—å·¦ä¸œå³è¥¿</code> æ¥ç¡®å®š</p><p>å‚æ•°å¯ç”¨å€¼ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>centre</td><td>ä¸­å¤®</td><td>å›¾ç‰‡æ­£ä¸­é—´</td></tr><tr><td>north</td><td>åŒ—</td><td>ä¸Šæ–¹ä¸­é—´</td></tr><tr><td>west</td><td>ä¸œ</td><td>å·¦è¾¹ä¸­é—´</td></tr><tr><td>south</td><td>å—</td><td>ä¸‹è¾¹ä¸­é—´</td></tr><tr><td>east</td><td>è¥¿</td><td>å³è¾¹ä¸­é—´</td></tr><tr><td>northwest</td><td>ä¸œåŒ—</td><td>å·¦ä¸Šè§’</td></tr><tr><td>southwest</td><td>ä¸œå—</td><td>å·¦ä¸‹è§’</td></tr><tr><td>southeast</td><td>è¥¿å—</td><td>å³ä¸‹è§’</td></tr><tr><td>northeast</td><td>è¥¿åŒ—</td><td>å³ä¸Šè§’</td></tr></tbody></table><h3 id="fontSize"><a href="#fontSize" class="headerlink" title="fontSize"></a><code>fontSize</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼š18<br><strong>è¯´æ˜</strong>ï¼šæ–‡æœ¬å­—ä½“å¤§å°ï¼Œâš ï¸åªå¯¹textæœ‰æ•ˆ</p><h3 id="watermarkImage"><a href="#watermarkImage" class="headerlink" title="watermarkImage"></a><code>watermarkImage</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼šwatermark.png<br><strong>è¯´æ˜</strong>ï¼šæ°´å°å›¾ç‰‡ï¼Œæ”¾ç½®åœ¨sourceæ–‡ä»¶æ ¹è·¯å¾„çš„å›¾ç‰‡åç§°ï¼›âš ï¸å¤§å°ä¸è¦è¶…è¿‡ä»»ä½•ä¸€å¼ æ–‡ç« ä¸­çš„å›¾ç‰‡ï¼Œå¦åˆ™ä¼šå‡ºé”™ï¼Œå¯ä»¥æ­é…ç¼©æ”¾è¿›è¡Œä½¿ç”¨</p><h3 id="width"><a href="#width" class="headerlink" title="width"></a><code>width</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼š50<br><strong>è¯´æ˜</strong>ï¼šå¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ã€‚âš ï¸åªå¯¹imageæœ‰æ•ˆ</p><h3 id="height"><a href="#height" class="headerlink" title="height"></a><code>height</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼š50<br><strong>è¯´æ˜</strong>ï¼šå¯¹å›¾ç‰‡è¿›è¡Œç¼©æ”¾ã€‚âš ï¸åªå¯¹imageæœ‰æ•ˆ</p><h3 id="rotate"><a href="#rotate" class="headerlink" title="rotate"></a><code>rotate</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼š0<br><strong>è¯´æ˜</strong>ï¼šæ—‹è½¬è§’åº¦ï¼Œå¦‚<code>45</code>ä»£è¡¨é€†æ—¶é’ˆ45åº¦ï¼Œ<code>-45</code>ä»£è¡¨é¡ºæ—¶é’ˆ45åº¦</p><h3 id="background"><a href="#background" class="headerlink" title="background"></a><code>background</code></h3><p><strong>é»˜è®¤å€¼</strong>ï¼štransparent<br><strong>è¯´æ˜</strong>ï¼šé…åˆtextå’Œrotateä½¿ç”¨ï¼ŒæŒ‡çš„æ˜¯æ–‡å­—è½¬æˆçš„å›¾ç‰‡ä¸€æ—¦æ—‹è½¬ä¼šå‡ºç°å¤šä½™ç©ºç™½ï¼Œè®¾ç½®è¿™äº›åœ°æ–¹çš„é¢œè‰²ï¼Œä¸€èˆ¬é€æ˜è‰²å³å¯</p><h2 id="ä½¿ç”¨æ³¨æ„äº‹é¡¹âš ï¸âš ï¸âš ï¸"><a href="#ä½¿ç”¨æ³¨æ„äº‹é¡¹âš ï¸âš ï¸âš ï¸" class="headerlink" title="ä½¿ç”¨æ³¨æ„äº‹é¡¹âš ï¸âš ï¸âš ï¸"></a>ä½¿ç”¨æ³¨æ„äº‹é¡¹âš ï¸âš ï¸âš ï¸</h2><ol><li>æ–‡å­—ä¸è¦è¿‡é•¿è¿‡å¤§ï¼Œæ°´å°å›¾ç‰‡ä¸è¦è¿‡å¤§ï¼ˆå¤ªå¤§å¯ä»¥ä½¿ç”¨ç¼©æ”¾ï¼Œâš ï¸ä½†æ˜¯ç¼©æ”¾æ˜¯å…¨å±€æ€§çš„ï¼‰ï¼Œå¦åˆ™éƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œç»ˆæ­¢ç”Ÿæˆé™æ€é¡µé¢</li><li>æš‚ä¸æ”¯æŒå›¾ç‰‡å’Œæ–‡å­—å…±åŒæ·»åŠ </li><li>ç›®å‰åªæ”¯æŒ <code>*.jpg</code>,<code>*.jpeg</code>ï¼Œ<code>*.png</code> ä¸¤ç§æ ¼å¼å›¾ç‰‡ï¼Œå¹¶ä¸”åªæ”¯æŒ<code>source/_posts</code>æ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯æ–‡ç« æœ¬åœ°å›¾ç‰‡ï¼›åŒæ—¶ä¹Ÿä¸æ”¯æŒè¿œç¨‹å›¾ç‰‡</li><li>æ°´å°å›¾ç‰‡ä¹Ÿä¸æ”¯æŒè¿œç¨‹å’Œésoucreæ ¹è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯åªæ”¯æŒ <code>*.jpg</code>,<code>*.jpeg</code>ï¼Œ<code>*.png</code> ä¸¤ç§æ ¼å¼å›¾ç‰‡</li><li>ä¸æ”¯æŒå¾ªç¯æ»¡å›¾æ·»åŠ æ°´å°</li><li>è¯·ä½¿ç”¨ <code>1.1.x</code> ä»¥ä¸Šç‰ˆæœ¬ï¼Œ <code>1.0.x</code> æ˜¯è¿›è¡ŒHexo apiç›¸å…³æµ‹è¯•æ—¶ä½¿ç”¨çš„ï¼Œç‰ˆæœ¬æ‚ä¹±æ— ç« ï¼Œä½¿ç”¨ <code>1.0.x</code> ç‰ˆæœ¬å‡ºç°ä»»ä½•é—®é¢˜ï¼Œæ¦‚ä¸ç†ä¼š</li></ol><h2 id="TODO-LIST"><a href="#TODO-LIST" class="headerlink" title="TODO LIST"></a>TODO LIST</h2><ul><li><input checked disabled type="checkbox"> æ–‡å­—æ°´å°<ul><li><input checked disabled type="checkbox"> è‡ªå®šä¹‰æ–‡å­—ï¼Œé¢œè‰²ï¼Œå¤§å°</li><li><input checked disabled type="checkbox"> è‡ªå®šä¹‰å­—ä½“ - 2019-12-24 Done</li><li><input disabled type="checkbox"> æ”¯æŒå¾ªç¯æ·»åŠ </li><li><input disabled type="checkbox"> è¶…é™å¤„ç†</li></ul></li><li><input checked disabled type="checkbox"> å›¾ç‰‡æ°´å°<ul><li><input checked disabled type="checkbox"> è‡ªå®šä¹‰æ°´å°å›¾ç‰‡</li><li><input disabled type="checkbox"> è¿œç¨‹æ°´å°å›¾ç‰‡</li><li><input disabled type="checkbox"> æ”¯æŒå¾ªç¯æ·»åŠ </li><li><input disabled type="checkbox"> è¶…é™å¤„ç†</li></ul></li><li><input checked disabled type="checkbox"> ä½ç½®<ul><li><input checked disabled type="checkbox"> å›ºå®šä½ç½®ï¼šä¹ä¸ªæ–¹ä½</li><li><input disabled type="checkbox"> è‡ªå®šä¹‰ topï¼Œleft</li></ul></li><li><input checked disabled type="checkbox"> æ—‹è½¬</li><li><input checked disabled type="checkbox"> ç¼©æ”¾ï¼ˆä»…é™å›¾ç‰‡ï¼‰</li><li><input disabled type="checkbox"> å…¶ä»–æ ¼å¼æ”¯æŒ</li></ul><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Hexo ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>images</tag>
        <tag>plugin</tag>
        <tag>watermark</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆäºŒï¼‰è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²</title>
    <url>/posts/f35d4de6/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆäºŒï¼‰è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²</p></blockquote><a id="more"></a><p><a href="/posts/b90941ba/">Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆä¸€ï¼‰Hexo ä»‹ç»</a><br><a href="/posts/f35d4de6/">Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆäºŒï¼‰è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²</a></p><p>æƒ³è¦è‡ªåŠ¨åŒ–æ„å»ºéœ€è¦ <code>.travis.yml</code> æ–‡ä»¶</p><p>æƒ³è¦ä¿å­˜ç‰ˆæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨å¯¹å…¶æ‰“æ ‡ç­¾ï¼Œéœ€è¦ä½¿ç”¨åˆ° <code>source/scripts/auto-versioning.js</code> æ–‡ä»¶æ¥è·å–ç‰ˆæœ¬å·</p><p>æƒ³è‡ªåŠ¨æ„å»ºDockeré•œåƒï¼Œéœ€è¦ <code>source/Dockerfile</code> å’Œ <code>source/config/nginx.conf</code> æ–‡ä»¶æ¥æ„å»ºDockeré•œåƒå’Œnginxçš„é…ç½®</p><p>è¿™å››ä¸ªä¸»è¦æ–‡ä»¶ä»£ç ç‰‡æ®µéƒ½åœ¨ä»¥ä¸‹åœ°å€ï¼š</p><ul><li><a href="https://gist.github.com/SpiritLing/306900cfe70f704343fefaef5bb26571" rel="external nofollow noopener noreferrer" target="_blank">gist ä»£ç ç‰‡æ®µ</a> ä¸€èˆ¬ä¼šè¢«é™åˆ¶è®¿é—®ï¼ŒåŸå› ä½ ä»¬æ‡‚å¾—</li><li><a href="https://gitee.com/SpiritLing/codes/ydpsxq4ahn2jk1fimbwoc82" rel="external nofollow noopener noreferrer" target="_blank">gitee ä»£ç ç‰‡æ®µ</a> å›½å†…ä»£ç æ‰˜ç®¡å¹³å°ç äº‘çš„ä»£ç ç‰‡æ®µ</li></ul><h2 id="Travis-ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º"><a href="#Travis-ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º" class="headerlink" title="Travis ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º"></a>Travis ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º</h2><p><a href="https://travis-ci.com/" rel="external nofollow noopener noreferrer" target="_blank">Travis</a> ç½‘ç«™æ˜¯ä¸€ä¸ªå¯¹å¼€æºé¡¹ç›®å…è´¹æä¾›è‡ªåŠ¨åŒ–æ„å»ºçš„ç½‘ç«™ã€‚</p><p>travis ç›®å‰åªæ”¯æŒ Github å¼€æºé¡¹ç›®ï¼Œå…¶ä»–æš‚ä¸æ”¯æŒï¼Œåœ¨ travis ä¸Šä½¿ç”¨githubç™»å½•ï¼Œå¯ä»¥ç›´æ¥è·å–ä½ è‡ªå·±çš„ä»“åº“</p><p>åœ¨ä»“åº“åˆ—è¡¨ä¸­ï¼Œæ¯ä¸ªä»“åº“åé¢æœ‰ä¸€ä¸ª <code>Trigger a build</code> æŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®å³å¯å¯¹è¿™ä¸ªä»“åº“è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºï¼Œå½“ç„¶å‰ææ˜¯ä½ çš„ä»“åº“æ ¹è·¯å¾„æœ‰ <code>.travis.yml</code> æ–‡ä»¶ã€‚</p><h3 id="travis-yml-æ–‡ä»¶åˆ†æ"><a href="#travis-yml-æ–‡ä»¶åˆ†æ" class="headerlink" title=".travis.yml æ–‡ä»¶åˆ†æ"></a>.travis.yml æ–‡ä»¶åˆ†æ</h3><h4 id="åŸºæœ¬ç¯å¢ƒ"><a href="#åŸºæœ¬ç¯å¢ƒ" class="headerlink" title="åŸºæœ¬ç¯å¢ƒ"></a>åŸºæœ¬ç¯å¢ƒ</h4><p>å¯¹äº <code>.travis.yml</code> æ–‡ä»¶å…·ä½“æ›´ç»†çš„è®²è§£å¯ä»¥ä¹‹é—´çœ‹<a href="https://docs.travis-ci.com/" rel="external nofollow noopener noreferrer" target="_blank">å®˜æ–¹æ–‡æ¡£</a>ï¼Œè¿™é‡Œåªè¯´æ¶‰åŠåˆ°çš„ä¸€äº›é—®é¢˜</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">docker</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">12</span></span><br></pre></td></tr></table></figure><p>å¯¹äºä¸Šé¢éƒ¨åˆ†ä»£ç æ¥è¯´ï¼š<br>language: å°±æ˜¯è¯´æŒ‡å®šä»€ä¹ˆè¯­è¨€æ¥å‡ºæ¥ï¼Œè¿™é‡Œé€‰æ‹©node_jsï¼Œåˆ™ä¼šåœ¨æ„å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨nodejsç¯å¢ƒã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ npm å’Œ node å‘½ä»¤ã€‚<br>services: æä¾›çš„æœåŠ¡ï¼Œè¿™é‡Œé€‰æ‹©dockerï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å°†ç¼–è¯‘åçš„é™æ€ç½‘ç«™æ–‡ä»¶æ‰“åŒ…æˆé•œåƒï¼Œæœ‰äº†è¿™ä¸ªå°±å¯ä»¥ç›´æ¥ä½¿ç”¨dockerå‘½ä»¤<br>node_jsï¼š æŒ‡å®šnodejsç‰ˆæœ¬</p><h4 id="æ„å»ºå·¥ä½œ"><a href="#æ„å»ºå·¥ä½œ" class="headerlink" title="æ„å»ºå·¥ä½œ"></a>æ„å»ºå·¥ä½œ</h4><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">include:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">stage:</span> <span class="string">xxx</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">"xxx"</span></span><br><span class="line">      <span class="attr">if:</span> <span class="string">branch</span> <span class="string">=</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>å»ºç«‹ä¸€ä¸ªå·¥ä½œï¼Œå®ƒåŒ…å«ä»¥ä¸‹é˜¶æ®µï¼Œå¯ä»¥åˆ†æˆå¾ˆå¤šé˜¶æ®µã€‚æ¯”å¦‚ï¼šinstallï¼Œbuildï¼Œdeployç­‰ç­‰é˜¶æ®µ<br>stage: é˜¶æ®µ<br>name: ä½ ä¸ºè¿™ä¸ªé˜¶æ®µèµ·çš„åå­—ï¼Œå¯æœ‰å¯æ— <br>if: æ˜¯å¦æŒ‡å®šé‚£äº›çš„åˆ†æ”¯å¯ä»¥æ‰§è¡Œï¼Œ.travis.yml åœ¨ä¸åŒåˆ†æ”¯ä½¿ç”¨åŒä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥è¿›è¡Œå„è‡ªåˆ†æ”¯èµ°å„è‡ªçš„æ„å»ºé˜¶æ®µï¼Œå…±åŒé˜¶æ®µå¯ä»¥æå‡ºæ¥ï¼Œå–æ¶ˆæ‰ifï¼Œç›®å‰æˆ‘çš„æ²¡æœ‰æå‡ºæ¥ï¼ŒåŸå› åœ¨äºæ¯ä¸ªé˜¶æ®µå’Œæ¯ä¸ªé˜¶æ®µå‡ ä¹æ²¡æœ‰ç›¸äº’è”ç³»ï¼Œå¯¼è‡´æˆ‘çš„éœ€æ±‚ä¸‹æ— æ³•æå–ä½¿ç”¨</p><p>æ¯ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„é»˜è®¤ install è„šæœ¬ï¼Œnodejsä¸º <code>npm install</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä¸æ‰§è¡Œinstallï¼Œæœ‰æ„å»ºé»˜è®¤è‡ªå·±æ‰§è¡Œ</p><p>installå’Œscriptéƒ½æ˜¯ç”±travisæä¾›çš„é’©å­ï¼Œåœ¨scriptæœŸé—´nodejsé»˜è®¤æ‰§è¡Œä¸º<code>npm test</code>ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œå†™äº†æ–°çš„è„šæœ¬ï¼Œæ‰€ä»¥ç›¸å½“äºæ›¿æ¢æ‰é»˜è®¤çš„æ‰§è¡Œè„šæœ¬</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">before_installï¼šinstall é˜¶æ®µä¹‹å‰æ‰§è¡Œ</span><br><span class="line">before_scriptï¼šscript é˜¶æ®µä¹‹å‰æ‰§è¡Œ</span><br><span class="line">after_failureï¼šscript é˜¶æ®µå¤±è´¥æ—¶æ‰§è¡Œ</span><br><span class="line">after_successï¼šscript é˜¶æ®µæˆåŠŸæ—¶æ‰§è¡Œ</span><br><span class="line">before_deployï¼šdeploy æ­¥éª¤ä¹‹å‰æ‰§è¡Œ</span><br><span class="line">after_deployï¼šdeploy æ­¥éª¤ä¹‹åæ‰§è¡Œ</span><br><span class="line">after_scriptï¼šscript é˜¶æ®µä¹‹åæ‰§è¡Œ</span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1. before_install</span><br><span class="line">2. install</span><br><span class="line">3. before_script</span><br><span class="line">4. script</span><br><span class="line">5. aftersuccess or afterfailure</span><br><span class="line">5. [OPTIONAL] before_deploy</span><br><span class="line">7. [OPTIONAL] deploy</span><br><span class="line">8. [OPTIONAL] after_deploy</span><br><span class="line">9. after_script</span><br></pre></td></tr></table></figure><h3 id="script-åˆ†æ"><a href="#script-åˆ†æ" class="headerlink" title="script åˆ†æ"></a>script åˆ†æ</h3><h4 id="ç‰ˆæœ¬å·è·å–"><a href="#ç‰ˆæœ¬å·è·å–" class="headerlink" title="ç‰ˆæœ¬å·è·å–"></a>ç‰ˆæœ¬å·è·å–</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">VERSION=$(node ./source/scripts/auto-versioning.js)</span><br></pre></td></tr></table></figure><p>ç†Ÿæ‚‰shellçš„åº”è¯¥ä¸é™Œç”Ÿï¼Œè¿™æ¡å‘½ä»¤å°±æ˜¯å°†nodeè¿è¡Œjsæ–‡ä»¶è¾“å‡ºçš„å†…å®¹èµ‹å€¼åˆ°ä¸´æ—¶å˜é‡ <code>VERSION</code> ä¸Šï¼Œå®é™…æŸ¥çœ‹è¿™ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯è·å–package.jsonä¸­versionçš„å€¼ï¼Œæ‰€ä»¥ä½ å¦‚æœè§‰å¾—è¿™ä¸ªé˜¶æ®µç»“æŸäº†ï¼Œéœ€è¦ä¿å­˜ä¸‹ï¼Œåˆ™åœ¨ä¸‹é˜¶æ®µå¼€å§‹çš„ç¬¬ä¸€æ¬¡å°†versionæ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬å·ï¼Œåˆ™å°±ä¼šç”Ÿæˆæ–°çš„tagï¼Œå¦‚æœä¸€ç›´ä¸ä¿®æ”¹ï¼Œåˆ™ä¼šæ¯æ¬¡æ„å»ºéƒ½ä¼šè¦†ç›–æ‰è¿œç¨‹ä»“åº“çš„æ—§tagã€‚</p><h4 id="è‡ªåŠ¨æ‰“Tag"><a href="#è‡ªåŠ¨æ‰“Tag" class="headerlink" title="è‡ªåŠ¨æ‰“Tag"></a>è‡ªåŠ¨æ‰“Tag</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git tag -a -f v$VERSION -m "Travis CI Auto Tag `date +"%Y-%m-%d %H:%M:%S"`"</span><br></pre></td></tr></table></figure><p>åˆ‡è®°ï¼Œæ ‡ç­¾ä¸€å®šè¦åœ¨æ·»åŠ é™æ€æ–‡ä»¶ï¼Œåˆ‡æ¢é™æ€æ–‡ä»¶åˆ†æ”¯ï¼Œpushé™æ€æ–‡ä»¶ä¹‹å‰ã€‚å‘½ä»¤æ„æ€æ˜¯å¼ºåˆ¶æ‰“ä¸€ä¸ªæ–°tagï¼Œæ— è®ºæ˜¯å¦å­˜åœ¨ï¼Œé…ç½®messageä¿¡æ¯ã€‚</p><h4 id="Tag-push-origin"><a href="#Tag-push-origin" class="headerlink" title="Tag push origin"></a>Tag push origin</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push -f https://$&#123;GITHUB_USERNAME&#125;:$&#123;GITHUB_PASSWD&#125;@github.com/SpiritLing/blog.git v$VERSION</span><br></pre></td></tr></table></figure><p>å¼ºåˆ¶push tag æ—¶ï¼Œè¿œç¨‹ä»“åº“ç”¨æˆ·åå’Œå¯†ç åˆ†åˆ«ä¸ºï¼š<code>GITHUB_USERNAME</code> å’Œ <code>GITHUB_PASSWD</code> ï¼Œè¿™ä¸ªåœ¨travisä»“åº“æ„å»ºè®¾ç½®ä¸­å¯ä»¥è®¾ç½®å˜é‡ï¼Œæœ‰ä¸ªé€‰é¡¹ï¼Œé»˜è®¤ä¸ºåŠ å¯†çŠ¶æ€ï¼Œæ„æ€åœ¨æ„å»ºæ—¥å¿—ä¸­ä¸æ˜¾ç¤ºï¼Œè¾¾åˆ°éšè—ä½ çš„æ•æ„Ÿä¿¡æ¯ï¼Œä¿æŠ¤è´¦æˆ·å®‰å…¨ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨æ­¤ä»“åº“æ„å»ºï¼Œä½†æ˜¯å¯ä»¥æ¨é€åˆ°ä»»ä½•ä¸€ä¸ªç½‘ç«™ä¸€ä¸ªä»“åº“ä¸­å»ï¼Œåªéœ€è¦åº”ç”¨å¯†ç ä¹Ÿå°±æ˜¯tokenï¼ˆæ¯ä¸ªç½‘ç«™å«æ³•å’Œè·å–éƒ½ä¸ç›¸åŒï¼‰ã€‚</p><h4 id="Docker-build"><a href="#Docker-build" class="headerlink" title="Docker build"></a>Docker build</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker login -u $&#123;DOCKER_USERNAME&#125; --password $&#123;DOCKER_PASSWD&#125;</span><br><span class="line">docker build -t $&#123;DOCKER_RPO&#125;:latest .</span><br><span class="line">docker push $&#123;DOCKER_RPO&#125;</span><br></pre></td></tr></table></figure><p>ç›®å‰æˆ‘åªåœ¨devåˆ†æ”¯æ„å»ºä¸­ç›´æ¥ä½¿ç”¨Dockerå‘½ä»¤æ¥è¿›è¡Œï¼ŒMasteråˆ†æ”¯æˆ‘æ˜¯é€šè¿‡Dockerç½‘ç«™è¿æ¥åˆ°githubä¸Šï¼Œä¸€æ—¦gh-pagesåˆ†æ”¯æ”¹å˜ï¼ŒDockerå®˜ç½‘ä¼šè‡ªåŠ¨æ„å»ºå“åº”çš„é•œåƒã€‚</p><p>é¦–å…ˆç¬¬ä¸€è¡Œæ˜¯dockerç™»å½•å‘½ä»¤ï¼Œä¸€èˆ¬ä¿é™©èµ·è§ï¼Œä¸æ”¯æŒç›´æ¥ä½¿ç”¨dockerç½‘ç«™å¯†ç ï¼Œè€Œæ˜¯ç”Ÿæˆtokenæ¥è¿›è¡Œç™»å½•ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œçš„ <code>DOCKER_PASSWD</code> å®é™…ä¸Šæ˜¯ä¸€ä¸ªtokenå€¼</p><p>ç¬¬äºŒè¡Œæ˜¯æ„å»ºé•œåƒ -t ä»£è¡¨æ‰“çš„æ ‡ç­¾ï¼›<code>DOCKER_RPO</code> ä»£è¡¨æ ‡ç­¾åï¼Œä¸€èˆ¬ä¸º <code>{Docker UserName}/{Docker Repository}</code> ï¼Œè¿™æ ·ä¸ç”¨åç»­pushæ—¶ï¼Œå†æ›´æ”¹æ ‡ç­¾ï¼›latestä»£è¡¨è¿™ä¸ªé•œåƒç‰ˆæœ¬ï¼Œä¸€èˆ¬Dockeré»˜è®¤éƒ½ä¸ºlatestï¼›<code>.</code> ä»£è¡¨æ„å»ºå½“å‰ç›®å½•</p><p>ç¬¬ä¸‰è¡Œæ˜¯pushé•œåƒåˆ°Dockerä»“åº“ä¸­å»ï¼Œä¸€èˆ¬å¦‚æœå‡ºç°é”™è¯¯ï¼Œè¯·ç¡®è®¤ä½ çš„ <code>DOCKER_RPO</code> æ˜¯å¦ç­‰äº <code>{Docker UserName}/{Docker Repository}</code>ï¼Œå¦‚æœä¸æ˜¯ç”¨æˆ·ååŠ ä»“åº“åï¼Œå°†æ— æ³•pushä¸Šå»ã€‚</p><p>å…¶ä½™è„šæœ¬å’Œä¸Šé¢ç±»ä¼¼ï¼Œä¸€èˆ¬ç†Ÿæ‚‰ä¸€ç‚¹linuxæ“ä½œå‘½ä»¤å’Œgitå‘½ä»¤åº”è¯¥éƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå…·ä½“å‚æ•°å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œæ¨èä¸€ä¸ª<a href="https://man.linuxde.net/" rel="external nofollow noopener noreferrer" target="_blank">Linuxå‘½ä»¤æŸ¥è¯¢ç½‘ç«™</a></p><h2 id="Docker-æ„å»ºé•œåƒ"><a href="#Docker-æ„å»ºé•œåƒ" class="headerlink" title="Docker æ„å»ºé•œåƒ"></a>Docker æ„å»ºé•œåƒ</h2><p>å…³äº<a href="https://www.kancloud.cn/spirit-ling/docker-study" rel="external nofollow noopener noreferrer" target="_blank">Dockerå­¦ä¹ </a></p><p>DockerçŸ¥è¯†å¯ä»¥æŸ¥çœ‹ä¸Šé¢çš„æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç‚¹å‡»ç«™ç‚¹æ¦‚è§ˆä¸­çš„Dockerå¯¼èˆª</p><h3 id="Dockerfile-åˆ†æ"><a href="#Dockerfile-åˆ†æ" class="headerlink" title="Dockerfile åˆ†æ"></a>Dockerfile åˆ†æ</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> nginx</span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> ./config/nginx.conf /etc/nginx/conf.d/default.conf</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /usr/share/nginx/html/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span> <span class="number">443</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">"nginx"</span>, <span class="string">"-g"</span>, <span class="string">"daemon off;"</span>]</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¸ºDockerfileæ–‡ä»¶å†…å®¹</p><ul><li>FROM: é€šè¿‡ä»€ä¹ˆé•œåƒæ„å»ºï¼Œè¿™é‡Œç›´æ¥é€‰æ‹©nginxï¼Œæ¯•ç«Ÿè¦ç›´æ¥å°†é™æ€æ–‡ä»¶å½“ç½‘ç«™è®¿é—®</li><li>COPY: å¤åˆ¶æ–‡ä»¶åˆ°ä»€ä¹ˆåœ°æ–¹å»ï¼Œè¿™é‡Œé¦–å…ˆå°† <code>config/nginx.conf</code> ç½‘ç«™é…ç½®æ–‡ä»¶å¤åˆ¶åˆ° <code>Nginx</code> æœåŠ¡é…ç½®ç›®å½•ï¼Œç›´æ¥è¦†ç›–æ‰é»˜è®¤çš„é…ç½®æ–‡ä»¶ <code>default.conf</code></li><li>COPY: ç¬¬äºŒä¸ªå¤åˆ¶ï¼Œå°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ° <code>Nginx</code> é™æ€ç½‘ç«™ç›®å½•ä¸‹ï¼Œå½“ç„¶é™æ€ç½‘ç«™ç›®å½•ä¹Ÿæ˜¯å¯ä»¥åœ¨ <code>nginx.conf</code> ä¸­é…ç½®çš„</li><li>EXPOSE 80 443: å¯¹å¤–æ”¾å¼€çš„ç«¯å£å·ï¼Œä¸€èˆ¬ <code>Nginx</code> æ”¾é€š 80 å’Œ 443 ç«¯å£</li><li>CMD [â€œnginxâ€, â€œ-gâ€, â€œdaemon off;â€]: CMDè¿è¡Œå‘½ä»¤ï¼Œä¸€ä¸ªDockerfileä¸­åªå…è®¸å‡ºç°ä¸€æ¬¡ï¼Œä»£è¡¨è¿è¡Œ nginx æœåŠ¡</li></ul><h3 id="Docker-éƒ¨ç½²é•œåƒ"><a href="#Docker-éƒ¨ç½²é•œåƒ" class="headerlink" title="Docker éƒ¨ç½²é•œåƒ"></a>Docker éƒ¨ç½²é•œåƒ</h3><p>æ„å»ºå®Œæ¯•å¹¶ä¸”æ¨é€åˆ°Dockeré•œåƒä»“åº“åï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> dev-blog-pagesé•œåƒéƒ¨ç½²ï¼Œä¸æ˜¯å¼€å‘ç‰ˆçš„åšå®¢ç½‘ç«™</span></span><br><span class="line">docker run \</span><br><span class="line">-u root \</span><br><span class="line">--name=dev-blog-pages \</span><br><span class="line">-d \</span><br><span class="line">--restart=on-failure:10 \</span><br><span class="line">-p 80:80 \</span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;Docker UserName&#125;/<span class="variable">$&#123;Docker Repository&#125;</span></span></span><br></pre></td></tr></table></figure><p>-p 80:80 ä»£è¡¨å¼€æ”¾çš„ç«¯å£ï¼Œç¬¬ä¸€ä¸ªä»£è¡¨å¯¹å¤–æ”¾å¼€çš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯å…¬ç½‘è®¿é—®ç«¯å£ï¼Œç¬¬äºŒä¸ª80ç«¯å£æŒ‡çš„æ˜¯ä½ çš„å®¹å™¨ç«¯å£ï¼Œç›¸å½“äºç»™å¤–å±‚ç³»ç»Ÿå’Œä½ çš„å®¹å™¨å»ºç«‹äº†ä¸€ä¸ªç«¯å£æ˜ å°„ã€‚</p><p>å…¶ä»–å…·ä½“å‘½ä»¤æ„æ€å¯ä»¥ç›´æ¥çœ‹æˆ‘ä¸Šé¢çš„Dockeræ–‡æ¡£ã€‚</p><h2 id="å…·ä½“æµç¨‹"><a href="#å…·ä½“æµç¨‹" class="headerlink" title="å…·ä½“æµç¨‹"></a>å…·ä½“æµç¨‹</h2><p>å•åˆ†æ”¯ï¼š</p><ol><li>é¦–å…ˆæœ¬åœ°masteråˆ†æ”¯å¼€å‘ï¼Œæ’°å†™åšå®¢ï¼Œå½“å‰version:0.0.3</li><li>æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“</li><li>è§¦å‘Travisè‡ªåŠ¨æ„å»º</li><li>é¦–å…ˆå…ˆå¼ºåˆ¶pushæ ‡ç­¾v0.0.3</li><li>é€šè¿‡å¤åˆ¶ï¼Œç§»åŠ¨ï¼Œåˆ é™¤ï¼Œå°†publicç§»åˆ°æœ€å¤–å±‚ï¼Œå…¨éƒ¨æ·»åŠ ï¼Œpushåˆ°gh-pagesåˆ†æ”¯ä¸Š</li><li>githubè‡ªåŠ¨å°†gh-pagesç”Ÿæˆæ–°çš„é™æ€ç½‘ç«™ï¼ŒDockeré€šè¿‡gh-pageså˜åŒ–æ¥æ„å»ºæ–°çš„é•œåƒ</li><li>æœ¬åœ°æ’°å†™ä¸‹ä¸€ä¸ªé˜¶æ®µ ç‰ˆæœ¬æ”¹ä¸º0.0.4ï¼Œå¯ä»¥å¤šæ¬¡æäº¤ï¼Œæœ€ç»ˆæ­¤é˜¶æ®µæ»¡æ„ä¸ºæ­¢ï¼Œæ¢æ–°ç‰ˆæœ¬å·ï¼Œç»§ç»­å³å¯</li></ol><p>åªéœ€è¦æœ¬åœ°å†™å¥½æ–‡ç« ï¼Œpushåˆ°ä»“åº“åï¼Œä»€ä¹ˆäº‹æƒ…ä¹Ÿä¸éœ€è¦ç®¡ï¼Œè¿‡ä¸ªå‡ åˆ†é’Ÿï¼Œä½ çš„åšå®¢ç½‘ç«™å°†ä¼šå‡ºç°æ–°çš„ç‰ˆæœ¬ã€‚</p><p>å¤šåˆ†æ”¯ï¼š</p><ul><li>masterï¼šå‘å¸ƒç‰ˆ åŸŸåï¼šblog.example.com</li><li>devï¼šå¼€å‘ç‰ˆ åŸŸåï¼šdev.example.com</li></ul><ol><li>æœ¬åœ°å§‹ç»ˆå¼€å‘devåˆ†æ”¯ï¼Œæ’°å†™åšå®¢ï¼Œå½“å‰ç‰ˆæœ¬0.0.3</li><li>æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“</li><li>è§¦å‘Travisè‡ªåŠ¨æ„å»º</li><li>é¦–å…ˆå…ˆå¼ºåˆ¶pushæ ‡ç­¾v0.0.3</li><li>é€šè¿‡å¤åˆ¶ï¼Œç§»åŠ¨ï¼Œåˆ é™¤ï¼Œå°†publicç§»åˆ°æœ€å¤–å±‚ï¼Œå…¨éƒ¨æ·»åŠ ï¼Œpushåˆ°dev-blogåˆ†æ”¯ä¸Š(è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯å›½å†…codingæ„å»ºé™æ€ç½‘ç«™ï¼Œè‡ªå®šä¹‰åŸŸåä¸ºï¼š<a href="https://dev.blog.spiritling.pub" target="_blank" rel="noopener">dev.blog.spiritling.pub</a>)</li><li>codingè®¾ç½®é™æ€ç½‘ç«™éƒ¨ç½²ä¼šè‡ªåŠ¨å°†dev-blogç”Ÿæˆæ–°çš„é™æ€ç½‘ç«™</li><li>é€šè¿‡dockerå‘½ä»¤æ„å»ºé•œåƒå¹¶æ¨é€</li><li>è¿™æ—¶å€™ä½ æƒ³ç»™åšå®¢ç½‘ç«™æ·»åŠ ä¸ªç™¾åº¦ç»Ÿè®¡ï¼Œç„¶åä¿®ä¿®æ”¹æ”¹ï¼Œå†æ¬¡ä¸Šä¼ </li><li>ç»§ç»­å‰é¢çš„è¿‡ç¨‹ï¼Œä¸€æ—¦ä½ è§‰å¾—æ›´æ”¹çš„å·®ä¸å¤šäº†ï¼Œå¯ä»¥å‘å¸ƒäº†</li><li>é‚£ä¹ˆç›´æ¥å°†devåˆå¹¶è‡³masteråˆ†æ”¯ï¼Œç„¶åéœ€è¦åå‘åˆå¹¶ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ <code>git merge -squash</code> å‘½ä»¤ï¼Œæ‰€ä»¥éœ€è¦åå‘ä¸€æ¬¡ï¼Œä¿è¯ä¸‹æ¬¡åˆå¹¶ä¸ä¼šå‡ºç°é—®é¢˜ã€‚</li><li>æ¥ä¸‹æ¥çš„æ­¥éª¤å°±æ˜¯è‡ªåŠ¨æ„å»ºè‡ªåŠ¨å‘å¸ƒã€‚</li><li>å¼€å§‹æ–°çš„æ—¶ï¼Œå°†versionæ”¹ä¸ºæ–°çš„ï¼Œç»§ç»­æ–°ä¸€è½®çš„ä½¿ç”¨</li></ol><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Hexo ç³»åˆ—</category>
        <category>Hexoé™æ€ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
        <tag>Auto CI</tag>
        <tag>Auto Deploy</tag>
        <tag>Github</tag>
        <tag>Pages</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆä¸€ï¼‰Hexo ä»‹ç»</title>
    <url>/posts/b90941ba/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆä¸€ï¼‰Hexo ä»‹ç»</p></blockquote><a id="more"></a><p><a href="/posts/b90941ba/">Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆä¸€ï¼‰Hexo ä»‹ç»</a><br><a href="/posts/f35d4de6/">Hexo é™æ€åšå®¢ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ï¼ˆäºŒï¼‰è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²</a></p><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>å¦‚æœä½ åªéœ€è¦åœ¨ä¸€ä¸ªåˆ†æ”¯å¼€å‘ï¼Œä¸€ä¸ªåˆ†æ”¯å‘å¸ƒï¼Œåˆ™åªéœ€è¦æœ¬åœ°å†™å¥½åç›´æ¥æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œç„¶åç­‰å¾…å‡ åˆ†é’Ÿåï¼Œç›´æ¥çœ‹ä½ çš„ç½‘ç«™å°±ä¼šå‘ç°å·²ç»æ›´æ–°ä¸Šå»äº†ã€‚</p><p>å¦‚æœä½ éœ€è¦å’Œæˆ‘ä¸€æ ·ä¸€ä¸ªå¼€å‘ç‰ˆä¸€ä¸ªå‘å¸ƒç‰ˆï¼Œé‚£ä¹ˆåœ¨è‡ªåŠ¨åŒ–æ„å»ºä¸­åªéœ€è¦å¤šä¸€ä¸ªæ‰‹åŠ¨å°† <code>dev</code> åˆå¹¶è‡³ <code>master</code> çš„æ­¥éª¤æ“ä½œï¼Œå…¶ä½™å’Œå•åˆ†æ”¯å¼€å‘ä¸€æ ·éƒ½æ˜¯è‡ªåŠ¨æ„å»ºè‡ªåŠ¨éƒ¨ç½²ã€‚</p><p>å¼€å‘æ¨èä½¿ç”¨ Github æ¥ä½¿ç”¨ï¼Œå› ä¸ºæ¥ä¸‹æ¥çš„è‡ªåŠ¨åŒ–æ„å»ºçš„ç½‘ç«™ä¸€èˆ¬å¯¹ Github æ”¯æŒè¾ƒå¥½ï¼Œè¿˜æœ‰å°±æ˜¯å›½å†…å›½å¤–éƒ½å¯ä»¥è®¿é—® Githubï¼Œå¹¶ä¸”é€Ÿåº¦è¿˜ç®—å¯ä»¥ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘çš„åšå®¢ç›¸å…³ç½‘ç«™ï¼Œå¦‚æœéœ€è¦å¯¹æºç åŠ å¯†ï¼Œå¯ä»¥å°† Masteæºç  å’Œ Master Pages åˆ†æ”¯åˆ†åˆ«å­˜æ”¾åœ¨ç§æœ‰ä»“åº“å’Œå…¬å¼€ä»“åº“</p><table><thead><tr><th>åç§°</th><th>åœ°å€</th></tr></thead><tbody><tr><td>Master æºç </td><td><a href="https://github.com/SpiritLing/blog" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/SpiritLing/blog</a></td></tr><tr><td>Dev æºç </td><td><a href="https://github.com/SpiritLing/blog/tree/dev" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/SpiritLing/blog/tree/dev</a></td></tr><tr><td>Master Pages</td><td><a href="https://github.com/SpiritLing/blog/tree/gh-pages" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/SpiritLing/blog/tree/gh-pages</a></td></tr><tr><td>Dev Pages</td><td><a href="https://spiritling.coding.net/p/dev/d/dev/git/tree/dev-blog" rel="external nofollow noopener noreferrer" target="_blank">https://spiritling.coding.net/p/dev/d/dev/git/tree/dev-blog</a></td></tr></tbody></table><h2 id="å¼€å§‹å‰çš„å·¥ä½œ"><a href="#å¼€å§‹å‰çš„å·¥ä½œ" class="headerlink" title="å¼€å§‹å‰çš„å·¥ä½œ"></a>å¼€å§‹å‰çš„å·¥ä½œ</h2><h3 id="ç¯å¢ƒå’Œè´¦å·"><a href="#ç¯å¢ƒå’Œè´¦å·" class="headerlink" title="ç¯å¢ƒå’Œè´¦å·"></a>ç¯å¢ƒå’Œè´¦å·</h3><p>é¦–å…ˆéœ€è¦å‡†å¤‡ç¯å¢ƒ</p><ul><li>Nodejs</li><li>ä¸€æ¬¾ç¼–è¾‘å™¨-Vscode</li><li>Github è´¦å·</li><li>Coding è´¦å·ï¼ˆå•åˆ†æ”¯å¯ä»¥ä¸ç”¨ï¼Œå¦‚æœåšå®¢ä¸»è¦é¢å¯¹çš„æ˜¯å›½å†…ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥å½“é™æ€ç½‘ç«™ç«™ç‚¹ï¼‰</li></ul><h3 id="æœ¬åœ°å¼€å‘å®‰è£…"><a href="#æœ¬åœ°å¼€å‘å®‰è£…" class="headerlink" title="æœ¬åœ°å¼€å‘å®‰è£…"></a>æœ¬åœ°å¼€å‘å®‰è£…</h3><p>é¦–å…ˆå…¨å±€å®‰è£… Hexo</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ Hexo åˆ›å»ºä¸€ä¸ªé¡¹ç›®</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init hexo-blog</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>ä¹‹åå¤§æ¦‚ç›®å½•å¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure><h2 id="å…³è”-Github-ä»“åº“"><a href="#å…³è”-Github-ä»“åº“" class="headerlink" title="å…³è” Github ä»“åº“"></a>å…³è” Github ä»“åº“</h2><p>åˆ›å»ºä»“åº“æ—¶ï¼Œä¸è¦é€‰æ‹©åˆå§‹åŒ–æ–‡ä»¶ï¼Œå¦‚æœé€‰äº†ï¼Œå°±éœ€è¦å°†ä»“åº“å…‹éš†ä¸‹æ¥ï¼Œåœ¨å°† Hexo ç”Ÿæˆçš„ç›®å½•å†…çš„å†…å®¹è¿ç§»è¿‡å»</p><p>ä¸é€‰æ‹©åˆå§‹åŒ–æ–‡ä»¶æ—¶ï¼Œåœ¨ä»“åº“é¦–é¡µä¼šæœ‰æç¤ºå¦‚ä½•æ·»åŠ å·²æœ‰çš„æœ¬åœ°ä»“åº“ã€‚</p><p>é¦–å…ˆè¿›å…¥<code>hexo-blog</code>ç›®å½•ä¸‹<br>é€æ­¥è¿è¡Œä¸‹é¢å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git add -A</span><br><span class="line">git commit -m "first commit"</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œå·²ä¿®æ”¹çš„æ–‡ä»¶åï¼ˆåˆ‡è®°ä¸è¦æŠŠnode_modulesåŠ å…¥è¿›å»ï¼‰ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ hexo åˆ›å»ºçš„åˆå§‹åŒ–é¡¹ç›®éƒ½å«æœ‰ <code>.gitignore</code> æ–‡ä»¶ï¼Œå…¶ä¸­è‡ªåŠ¨åŒ…å« <code>node_modules</code></p><p>æ¥ä¸‹æ¥éœ€è¦æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ï¼Œæœ‰ä¸¤ç§åè®®ï¼Œä¸€ç§httpä¸€ç§git</p><p>ä½¿ç”¨httpåè®®ä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œéœ€è¦è¿›è¡Œ GitHub è´¦å·ç™»å½•ï¼Œä»¥åä½¿ç”¨ http å°±ä¸ä¼šå†æ¬¡å¼¹å‡º</p><p>ä½¿ç”¨gitåè®®éœ€è¦å…ˆåœ¨è´¦æˆ·ä¸­æ·»åŠ æœ¬åœ°ç§é’¥ï¼Œæ‰èƒ½å¤Ÿä¸‹è½½ä¸‹æ¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin git@github.com:&#123;Your Name&#125;/&#123;Your repository&#125;.git</span><br><span class="line">git remote add origin https://github.com/&#123;Your Name&#125;/&#123;Your repository&#125;.git</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°†å…¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå¹¶å’Œè¿œç¨‹ä»“åº“ä¿æŒè¿æ¥ï¼ˆ-uï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>æ¨é€æˆåŠŸåï¼Œä½ çš„æœ¬åœ°å’Œè¿œç¨‹å°±ä¼šæ„å»ºèµ·å…³è”ã€‚</p><h2 id="Hexo-æ–‡ä»¶è¯´æ˜"><a href="#Hexo-æ–‡ä»¶è¯´æ˜" class="headerlink" title="Hexo æ–‡ä»¶è¯´æ˜"></a>Hexo æ–‡ä»¶è¯´æ˜</h2><h3 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h3><p>ç½‘ç«™çš„ <a href="https://hexo.io/zh-cn/docs/configuration" rel="external nofollow noopener noreferrer" target="_blank">å®˜æ–¹é…ç½®</a> ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚</p><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>åšè¿‡nodejsé¡¹ç›®å’Œå‰ç«¯æ„å»ºçš„å·¥ä½œçš„ï¼Œåº”è¯¥å¯¹å…¶ä¸é™Œç”Ÿ</p><h3 id="scaffolds-æ–‡ä»¶å¤¹"><a href="#scaffolds-æ–‡ä»¶å¤¹" class="headerlink" title="scaffolds æ–‡ä»¶å¤¹"></a>scaffolds æ–‡ä»¶å¤¹</h3><p><a href="https://hexo.io/zh-cn/docs/writing" rel="external nofollow noopener noreferrer" target="_blank">å®˜æ–¹æ¨¡ç‰ˆ</a> æ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚</p><p>Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„æ–‡ç« æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚</p><h3 id="source-æ–‡ä»¶å¤¹"><a href="#source-æ–‡ä»¶å¤¹" class="headerlink" title="source æ–‡ä»¶å¤¹"></a>source æ–‡ä»¶å¤¹</h3><p>èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚</p><h3 id="themes"><a href="#themes" class="headerlink" title="themes"></a>themes</h3><p><a href="https://hexo.io/zh-cn/docs/themes" rel="external nofollow noopener noreferrer" target="_blank">ä¸»é¢˜</a> æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</p><h2 id="ç”Ÿæˆé™æ€ç½‘ç«™å’Œå…¶ä»–"><a href="#ç”Ÿæˆé™æ€ç½‘ç«™å’Œå…¶ä»–" class="headerlink" title="ç”Ÿæˆé™æ€ç½‘ç«™å’Œå…¶ä»–"></a>ç”Ÿæˆé™æ€ç½‘ç«™å’Œå…¶ä»–</h2><p>ä½¿ç”¨Hexoå†…ç½®çš„å°±å¯ä»¥ç”Ÿæˆé™æ€ç½‘ç«™ï¼Œé™æ€ç½‘ç«™æ”¾ç½®åœ¨ public æ–‡ä»¶å¤¹ä¸‹ï¼Œå…¶ä»–é…ç½®ï¼Œæ¯”å¦‚ Nextä¸»é¢˜ï¼Œgoogleåˆ†æï¼Œç™¾åº¦é€šçŸ¥ï¼Œgitalkè¯„è®ºï¼Œç‰ˆæƒå£°æ˜ç­‰ç­‰ï¼Œåœ¨æ­¤æ¬¡ä¸åœ¨è¿›ä¸€æ­¥è¯¦ç»†è¯´æ˜ã€‚</p><h2 id="è‡ªåŠ¨åŒ–æ„å»ºç½‘ç«™"><a href="#è‡ªåŠ¨åŒ–æ„å»ºç½‘ç«™" class="headerlink" title="è‡ªåŠ¨åŒ–æ„å»ºç½‘ç«™"></a>è‡ªåŠ¨åŒ–æ„å»ºç½‘ç«™</h2><h3 id="Travis-ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º"><a href="#Travis-ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º" class="headerlink" title="Travis ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º"></a>Travis ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»º</h3><p><a href="https://travis-ci.com/" rel="external nofollow noopener noreferrer" target="_blank">Travis</a> ç½‘ç«™æ˜¯ä¸€ä¸ªå¯¹å¼€æºé¡¹ç›®å…è´¹æä¾›è‡ªåŠ¨åŒ–æ„å»ºçš„ç½‘ç«™ã€‚</p><p>travis ç›®å‰åªæ”¯æŒ Github å¼€æºé¡¹ç›®ï¼Œå…¶ä»–æš‚ä¸æ”¯æŒï¼Œåœ¨ travis ä¸Šä½¿ç”¨githubç™»å½•ï¼Œå¯ä»¥ç›´æ¥è·å–ä½ è‡ªå·±çš„ä»“åº“</p><p>åœ¨ä»“åº“åˆ—è¡¨ä¸­ï¼Œæ¯ä¸ªä»“åº“åé¢æœ‰ä¸€ä¸ª <code>Trigger a build</code> æŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®å³å¯å¯¹è¿™ä¸ªä»“åº“è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºï¼Œå½“ç„¶å‰ææ˜¯ä½ çš„ä»“åº“æ ¹è·¯å¾„æœ‰ <code>.travis.yml</code> æ–‡ä»¶ã€‚</p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Hexo ç³»åˆ—</category>
        <category>Hexoé™æ€ç½‘ç«™è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ç³»åˆ—</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
        <tag>Auto CI</tag>
        <tag>Auto Deploy</tag>
        <tag>Github</tag>
        <tag>Pages</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack 4.x åˆçº§å­¦ä¹ è®°å½•</title>
    <url>/posts/26369b4c/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>webpack 4.x åˆçº§å­¦ä¹ è®°å½•</p></blockquote><a id="more"></a><h2 id="webpack-4-x-å®‰è£…"><a href="#webpack-4-x-å®‰è£…" class="headerlink" title="webpack 4.x å®‰è£…"></a>webpack 4.x å®‰è£…</h2><ol><li>é¦–å…ˆéœ€è¦åœ¨å…¨å±€ä¸­å®‰è£…</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install webpack -g</span><br><span class="line">npm install webpack-cli -g  // ä¸webpack 3.x çš„åŒºåˆ«</span><br></pre></td></tr></table></figure><ol start="2"><li>æ¥ä¸‹æ¥æ‰“å¼€æ–°çš„æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºpackage.json</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ– <code>package.json</code> æ–‡ä»¶ã€‚</p><ol start="3"><li>å±€éƒ¨å®‰è£…</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install webpack --save</span><br><span class="line">npm install webpack-cli --save</span><br></pre></td></tr></table></figure><h3 id="webpack-4-x-åŸºæœ¬æ‰“åŒ…ç¼–è¯‘"><a href="#webpack-4-x-åŸºæœ¬æ‰“åŒ…ç¼–è¯‘" class="headerlink" title="webpack 4.x åŸºæœ¬æ‰“åŒ…ç¼–è¯‘"></a>webpack 4.x åŸºæœ¬æ‰“åŒ…ç¼–è¯‘</h3><ol><li>webpack 3.x ç¼–è¯‘</li></ol><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">webpack a.js b.js</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># &#123;extry file&#125;å‡ºå¡«å†™å…¥å£æ–‡ä»¶çš„è·¯å¾„ï¼Œæœ¬æ–‡ä¸­å°±æ˜¯ä¸Šè¿°main.jsçš„è·¯å¾„ï¼Œ</span></span><br><span class="line"><span class="comment"># &#123;destination for bundled file&#125;å¤„å¡«å†™æ‰“åŒ…æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„</span></span><br><span class="line"><span class="comment"># å¡«å†™è·¯å¾„çš„æ—¶å€™ä¸ç”¨æ·»åŠ &#123;&#125;</span></span><br><span class="line">webpack &#123;entry file&#125; &#123;destination <span class="keyword">for</span> bundled file&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯4ç‰ˆæœ¬ä¹‹å‰çš„ä½¿ç”¨æ–¹å¼ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼åœ¨4ç‰ˆæœ¬ä¸­å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œ4ç‰ˆæœ¬æœ‰è‡ªå·±çš„æ–°çš„æ–¹å¼</p><ol start="2"><li>webpack 4.x é»˜è®¤æ‰“åŒ…ç¼–è¯‘</li></ol><p>ä¸ºä»€ä¹ˆä¸Šé¢è¦å†™é»˜è®¤æ‰“åŒ…ç¼–è¯‘ï¼Œæ˜¯å› ä¸ºwebpackå¯ä»¥è‡ªå®šä¹‰æ‰“åŒ…ç¼–è¯‘é…ç½®ï¼Œæˆ‘ä»¬é¦–å…ˆè¯´ä¸‹é»˜è®¤çš„æ‰“åŒ…ç¼–è¯‘ã€‚</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">entry: &quot;/src/index.js&quot;  // é»˜è®¤å…¥å£æ–‡ä»¶</span><br><span class="line">output: &quot;/dist/main.js&quot;  // é»˜è®¤è¾“å…¥æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è·¯å¾„åŠæ–‡ä»¶ä¸­ï¼Œ<code>src</code> å’Œ <code>index.js</code> éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»åˆ›å»ºï¼Œåœ¨ <code>index.js</code> ä¸­å†™å¥½jsä»£ç å³å¯ï¼Œå…¶ä½™çš„ <code>dist</code> å’Œ <code>main.js</code> éƒ½æ˜¯ç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¹¶ä¸”å½“ä½ å†ä¸€æ¬¡ç¼–è¯‘æ—¶ï¼Œä¼šè‡ªåŠ¨çš„åœ¨ <code>dist</code> ä¸­è¦†ç›–åŒåæ–‡ä»¶ã€‚</p><p>è€Œwebpack 4.x çš„ç¼–è¯‘å‘½ä»¤ä¹Ÿå‘ç”Ÿå˜åŒ–äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œåˆ†ä¸ºå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">webpack --mode development</span><br><span class="line">webpack --mode production</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å‘½ä»¤åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ã€‚</p><p>é…ç½® <code>package.json</code> æ–‡ä»¶</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack --mode development"</span>,</span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --mode production"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>npm ruin dev</code> å’Œ <code>npm run build</code> è¿›è¡Œæ‰§è¡Œå‘½ä»¤</p><h2 id="webpack-é…ç½®"><a href="#webpack-é…ç½®" class="headerlink" title="webpack é…ç½®"></a>webpack é…ç½®</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><blockquote><p>æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(static module bundler)ã€‚åœ¨ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾(dependency graph)ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚</p></blockquote><p>ä» webpack 4.0.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå¯ä»¥ä¸ç”¨é€šè¿‡å¼•å…¥ä¸€ä¸ªé…ç½®æ–‡ä»¶æ‰“åŒ…é¡¹ç›®ã€‚ç„¶è€Œï¼Œwebpack ä»ç„¶è¿˜æ˜¯ é«˜åº¦å¯é…ç½®çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¾ˆå¥½çš„æ»¡è¶³éœ€æ±‚ã€‚</p><p>webpack çš„æ ¸å¿ƒæ¦‚å¿µï¼š</p><ol><li>å…¥å£ï¼ˆentryï¼‰</li><li>è¾“å‡ºï¼ˆoutputï¼‰</li><li>loader</li><li>æ’ä»¶ï¼ˆpluginsï¼‰</li></ol><p>æˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>webpack.config.js</code> çš„æ–‡ä»¶ï¼Œä½¿ç”¨ Commonjs è§„èŒƒæ¥è¿›è¡Œä¹¦å†™ã€‚</p><h4 id="å…¥å£ï¼ˆentryï¼‰"><a href="#å…¥å£ï¼ˆentryï¼‰" class="headerlink" title="å…¥å£ï¼ˆentryï¼‰"></a>å…¥å£ï¼ˆentryï¼‰</h4><p>å…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚è¿›å…¥å…¥å£èµ·ç‚¹åï¼Œwebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨ webpack é…ç½®ä¸­é…ç½® <code>entry</code> å±æ€§ï¼Œæ¥æŒ‡å®šä¸€ä¸ªå…¥å£èµ·ç‚¹ï¼ˆæˆ–å¤šä¸ªå…¥å£èµ·ç‚¹ï¼‰ã€‚é»˜è®¤å€¼ä¸º <code>./src</code> ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">"./src/index.js"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>entry</code> å±æ€§çš„å•ä¸ªå…¥å£è¯­æ³•ï¼Œæ˜¯ä¸‹é¢çš„ç®€å†™ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: <span class="string">"./src/index.js"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>å½“ä½ å‘ <code>entry</code> ä¼ å…¥ä¸€ä¸ªæ•°ç»„æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå‘ <code>entry</code> å±æ€§ä¼ å…¥ã€Œæ–‡ä»¶è·¯å¾„(file path)æ•°ç»„ã€å°†åˆ›å»ºâ€œå¤šä¸ªä¸»å…¥å£(multi-main entry)â€ã€‚åœ¨ä½ æƒ³è¦å¤šä¸ªä¾èµ–æ–‡ä»¶ä¸€èµ·æ³¨å…¥ï¼Œå¹¶ä¸”å°†å®ƒä»¬çš„ä¾èµ–å¯¼å‘(graph)åˆ°ä¸€ä¸ªâ€œchunkâ€æ—¶ï¼Œä¼ å…¥æ•°ç»„çš„æ–¹å¼å°±å¾ˆæœ‰ç”¨ã€‚</p></blockquote><p>å¤šä¸ªå…¥å£æ–‡ä»¶å¤„ç†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: <span class="string">"./src/index.js"</span>,</span><br><span class="line">    app: <span class="string">'./src/app.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>æ ¹æ®ç»éªŒï¼šæ¯ä¸ª HTML æ–‡æ¡£åªä½¿ç”¨ä¸€ä¸ªå…¥å£èµ·ç‚¹ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šä¸ªï¼Œä½†æ˜¯æ¨èä¸€ä¸ªä½¿ç”¨ä¸€ä¸ª</p></blockquote><p><a href="https://www.webpackjs.com/concepts/entry-points/" rel="external nofollow noopener noreferrer" target="_blank">äº†è§£æ›´å¤š</a></p><h4 id="è¾“å‡ºï¼ˆoutputï¼‰"><a href="#è¾“å‡ºï¼ˆoutputï¼‰" class="headerlink" title="è¾“å‡ºï¼ˆoutputï¼‰"></a>è¾“å‡ºï¼ˆoutputï¼‰</h4><p><code>output</code> å±æ€§å‘Šè¯‰ <code>webpack</code> åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ <code>bundles</code>ï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸º <code>./dist</code>ã€‚åŸºæœ¬ä¸Šï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºç»“æ„ï¼Œéƒ½ä¼šè¢«ç¼–è¯‘åˆ°ä½ æŒ‡å®šçš„è¾“å‡ºè·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨é…ç½®ä¸­æŒ‡å®šä¸€ä¸ª <code>output</code> å­—æ®µï¼Œæ¥é…ç½®è¿™äº›å¤„ç†è¿‡ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">"./src/index.js"</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¸Šé¢çš„ä½ç½®æ–‡ä»¶åéƒ½æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå¯ä»¥è‡ªå®šä¹‰é…ç½®ã€‚</p><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>output.filename</code> å’Œ <code>output.path</code> å±æ€§ï¼Œæ¥å‘Šè¯‰ <code>webpack bundle</code> çš„åç§°ï¼Œä»¥åŠæˆ‘ä»¬æƒ³è¦ bundle ç”Ÿæˆ(emit)åˆ°å“ªé‡Œ</p><p><a href="https://www.webpackjs.com/concepts/output/" rel="external nofollow noopener noreferrer" target="_blank">äº†è§£æ›´å¤š</a></p><h4 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h4><p>â€˜<br>loader è®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ï¼ˆwebpack è‡ªèº«åªç†è§£ JavaScriptï¼‰ã€‚loader å¯ä»¥å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œç„¶åä½ å°±å¯ä»¥åˆ©ç”¨ webpack çš„æ‰“åŒ…èƒ½åŠ›ï¼Œå¯¹å®ƒä»¬è¿›è¡Œå¤„ç†ã€‚</p><p>æœ¬è´¨ä¸Šï¼Œwebpack loader å°†æ‰€æœ‰ç±»å‹çš„æ–‡ä»¶ï¼Œè½¬æ¢ä¸ºåº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾ï¼ˆå’Œæœ€ç»ˆçš„ bundleï¼‰å¯ä»¥ç›´æ¥å¼•ç”¨çš„æ¨¡å—ã€‚</p><blockquote><p>æ³¨æ„ï¼Œloader èƒ½å¤Ÿ <code>import</code> å¯¼å…¥ä»»ä½•ç±»å‹çš„æ¨¡å—ï¼ˆä¾‹å¦‚ .css æ–‡ä»¶ï¼‰ï¼Œè¿™æ˜¯ webpack ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œå…¶ä»–æ‰“åŒ…ç¨‹åºæˆ–ä»»åŠ¡æ‰§è¡Œå™¨çš„å¯èƒ½å¹¶ä¸æ”¯æŒã€‚æˆ‘ä»¬è®¤ä¸ºè¿™ç§è¯­è¨€æ‰©å±•æ˜¯æœ‰å¾ˆå¿…è¦çš„ï¼Œå› ä¸ºè¿™å¯ä»¥ä½¿å¼€å‘äººå‘˜åˆ›å»ºå‡ºæ›´å‡†ç¡®çš„ä¾èµ–å…³ç³»å›¾ã€‚</p></blockquote><p>åœ¨æ›´é«˜å±‚é¢ï¼Œåœ¨ webpack çš„é…ç½®ä¸­ loader æœ‰ä¸¤ä¸ªç›®æ ‡ï¼š</p><ol><li><code>test</code> å±æ€§ï¼Œç”¨äºæ ‡è¯†å‡ºåº”è¯¥è¢«å¯¹åº”çš„ loader è¿›è¡Œè½¬æ¢çš„æŸä¸ªæˆ–æŸäº›æ–‡ä»¶ã€‚</li><li><code>use</code> å±æ€§ï¼Œè¡¨ç¤ºè¿›è¡Œè½¬æ¢æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å“ªä¸ª loaderã€‚</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  entry: <span class="string">"./src/index.js"</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>),</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.txt$/</span>, <span class="attr">use</span>: <span class="string">'raw-loader'</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šé…ç½®ä¸­ï¼Œå¯¹ä¸€ä¸ªå•ç‹¬çš„ module å¯¹è±¡å®šä¹‰äº† rules å±æ€§ï¼Œé‡Œé¢åŒ…å«ä¸¤ä¸ªå¿…é¡»å±æ€§ï¼štest å’Œ useã€‚è¿™å‘Šè¯‰ webpack ç¼–è¯‘å™¨(compiler) å¦‚ä¸‹ä¿¡æ¯ï¼š</p><blockquote><p>â€œå˜¿ï¼Œwebpack ç¼–è¯‘å™¨ï¼Œå½“ä½ ç¢°åˆ°ã€Œåœ¨ require()/import è¯­å¥ä¸­è¢«è§£æä¸º â€˜.txtâ€™ çš„è·¯å¾„ã€æ—¶ï¼Œåœ¨ä½ å¯¹å®ƒæ‰“åŒ…ä¹‹å‰ï¼Œå…ˆä½¿ç”¨ raw-loader è½¬æ¢ä¸€ä¸‹ã€‚â€</p></blockquote><p><a href="https://www.webpackjs.com/concepts/loaders/" rel="external nofollow noopener noreferrer" target="_blank">äº†è§£æ›´å¤š</a></p><h4 id="æ’ä»¶ï¼ˆpluginsï¼‰"><a href="#æ’ä»¶ï¼ˆpluginsï¼‰" class="headerlink" title="æ’ä»¶ï¼ˆpluginsï¼‰"></a>æ’ä»¶ï¼ˆpluginsï¼‰</h4><p>loader è¢«ç”¨äºè½¬æ¢æŸäº›ç±»å‹çš„æ¨¡å—ï¼Œè€Œæ’ä»¶åˆ™å¯ä»¥ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ï¼Œä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚</p><p>æƒ³è¦ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œä½ åªéœ€è¦ <code>require()</code> å®ƒï¼Œç„¶åæŠŠå®ƒæ·»åŠ åˆ° <code>plugins</code> æ•°ç»„ä¸­ã€‚å¤šæ•°æ’ä»¶å¯ä»¥é€šè¿‡é€‰é¡¹(option)è‡ªå®šä¹‰ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­å› ä¸ºä¸åŒç›®çš„è€Œå¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ’ä»¶ï¼Œè¿™æ—¶éœ€è¦é€šè¿‡ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ¥åˆ›å»ºå®ƒçš„ä¸€ä¸ªå®ä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>); <span class="comment">// é€šè¿‡ npm å®‰è£…</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>); <span class="comment">// ç”¨äºè®¿é—®å†…ç½®æ’ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.txt$/</span>, <span class="attr">use</span>: <span class="string">'raw-loader'</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;<span class="attr">template</span>: <span class="string">'./src/index.html'</span>&#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure><p>webpack æä¾›è®¸å¤šå¼€ç®±å¯ç”¨çš„æ’ä»¶ï¼æŸ¥é˜…<a href="https://www.webpackjs.com/plugins/" rel="external nofollow noopener noreferrer" target="_blank">æ’ä»¶åˆ—è¡¨</a>è·å–æ›´å¤šä¿¡æ¯ã€‚</p><p>åœ¨ webpack é…ç½®ä¸­ä½¿ç”¨æ’ä»¶æ˜¯ç®€å•ç›´æ¥çš„ï¼Œç„¶è€Œä¹Ÿæœ‰å¾ˆå¤šå€¼å¾—æˆ‘ä»¬è¿›ä¸€æ­¥æ¢è®¨çš„ç”¨ä¾‹ã€‚</p><p><a href="https://www.webpackjs.com/concepts/plugins/" rel="external nofollow noopener noreferrer" target="_blank">äº†è§£æ›´å¤š</a></p><h2 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h2><p>æœ¬åœ°æœåŠ¡å™¨</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install webpack-dev-server -S</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>å¯ä»¥æ„å»ºä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨è¿›è¡Œå¯åŠ¨æµ‹è¯•</p><h3 id="é…ç½®webpack-config-js"><a href="#é…ç½®webpack-config-js" class="headerlink" title="é…ç½®webpack.config.js"></a>é…ç½®webpack.config.js</h3><p>webpack.config.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    contentBase: path.join(__dirname, <span class="string">"/dist"</span>),  <span class="comment">//å¯åŠ¨è·¯å¾„</span></span><br><span class="line">    port: <span class="number">9001</span>,  <span class="comment">// ç«¯å£å·</span></span><br><span class="line">    hot: <span class="literal">true</span>,  <span class="comment">// çƒ­æ›´æ–°</span></span><br><span class="line">    inline:<span class="literal">true</span>  <span class="comment">// å†…è”æ¨¡å¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶åœ¨ä½¿ç”¨ä¸Šé¢ <code>hot</code> çƒ­æ›´æ–°æ—¶éœ€è¦å¼€å¯ä¸€ä¸ªæ’ä»¶ <code>HotModuleReplacementPlugin</code> æ­¤æ’ä»¶å±äºå†…ç½®æ’ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>new webpack.HotModuleReplacementPlugin()</code> æ¥è¿›è¡Œå¯ç”¨</p><p>ä»¥ä¸Šä½¿ <code>webpack-dev-server</code> çš„åŸºæœ¬å‚æ•°ç”¨æ³•ï¼Œå…·ä½“çš„å¯ä»¥æŸ¥çœ‹<a href="https://www.webpackjs.com/configuration/dev-server/" rel="external nofollow noopener noreferrer" target="_blank">æ­¤å¤„</a></p><h3 id="é…ç½®package-json"><a href="#é…ç½®package-json" class="headerlink" title="é…ç½®package.json"></a>é…ç½®package.json</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"webpack-dev-server --open"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>npm start</code> å¼€å¯å¯åŠ¨å‘½ä»¤</p><h2 id="webpack-loaderå¤„ç†"><a href="#webpack-loaderå¤„ç†" class="headerlink" title="webpack loaderå¤„ç†"></a>webpack loaderå¤„ç†</h2><p>loader ï¼š åŠ è½½ç¨‹åº</p><p>loader ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚loader å¯ä»¥ä½¿ä½ åœ¨ import æˆ–â€åŠ è½½â€æ¨¡å—æ—¶é¢„å¤„ç†æ–‡ä»¶ã€‚å› æ­¤ï¼Œloader ç±»ä¼¼äºå…¶ä»–æ„å»ºå·¥å…·ä¸­â€œä»»åŠ¡(task)â€ï¼Œå¹¶æä¾›äº†å¤„ç†å‰ç«¯æ„å»ºæ­¥éª¤çš„å¼ºå¤§æ–¹æ³•ã€‚loader å¯ä»¥å°†æ–‡ä»¶ä»ä¸åŒçš„è¯­è¨€ï¼ˆå¦‚ TypeScriptï¼‰è½¬æ¢ä¸º JavaScriptï¼Œæˆ–å°†å†…è”å›¾åƒè½¬æ¢ä¸º data URLã€‚loader ç”šè‡³å…è®¸ä½ ç›´æ¥åœ¨ JavaScript æ¨¡å—ä¸­ import CSSæ–‡ä»¶ï¼</p><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install css-loader style-loader -S</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>å½“æ–°å»ºæ–‡ä»¶ <code>*.css</code> æ–‡ä»¶æ—¶è¿›è¡Œcssæ–‡ä»¶å¤„ç†</p><p>webpack.config.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>:&#123;</span><br><span class="line">    rules:[</span><br><span class="line">        &#123;</span><br><span class="line">            test:<span class="regexp">/\.css$/</span>,</span><br><span class="line">            use:[<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å…¶ä¸­éœ€è¦æ³¨æ„çš„å°±æ˜¯ <code>style-loader</code> åœ¨ <code>css-loader</code> ä¹‹å‰ã€‚</p><p>å½“ css æœ‰ <code>background-image: url(&#39;./1.jpg&#39;)</code> æœ‰å›¾ç‰‡æ’å…¥è¿›æ¥æ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>file-loader</code> æ¥è¿›è¡Œå¤„ç†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>:&#123;</span><br><span class="line">    rules:[</span><br><span class="line">        &#123;</span><br><span class="line">            test:<span class="regexp">/\.css$/</span>,</span><br><span class="line">            use:[<span class="string">'style-loader'</span>,<span class="string">'css-loader'</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            test:<span class="regexp">/\.(jpg|png|jpeg)$/</span>,</span><br><span class="line">            use:[<span class="string">'file-loader'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾ç½®å›¾ç‰‡ä¿å­˜åœ°æ–¹åŠæ˜¯å¦ä½¿ç”¨base64è¿›è¡Œå¤„ç†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.(jpg|png|jpeg)$/</span>,</span><br><span class="line">    use:<span class="string">'file-loader?limit=1024&amp;name=./images/[hash:8].[name].[ext]'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HTMLçš„imgæ ‡è®°å¤„ç†"><a href="#HTMLçš„imgæ ‡è®°å¤„ç†" class="headerlink" title="HTMLçš„imgæ ‡è®°å¤„ç†"></a>HTMLçš„imgæ ‡è®°å¤„ç†</h3><h4 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install html-withimg-loader -S</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test:/\.html$/,</span><br><span class="line">    use:["html-withimg-loader"]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CSS-æ‰“åŒ…åˆ†ç¦»"><a href="#CSS-æ‰“åŒ…åˆ†ç¦»" class="headerlink" title="CSS æ‰“åŒ…åˆ†ç¦»"></a>CSS æ‰“åŒ…åˆ†ç¦»</h3><h4 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install extract-text-webpack-plugin@next -S</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-2"><a href="#é…ç½®-2" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> ExtractTextPlugin=<span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’ä»¶</span></span><br><span class="line"><span class="keyword">new</span> ExtractTextPlugin(<span class="string">'./css/[name].css'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// rules</span></span><br><span class="line">&#123;</span><br><span class="line">    test:<span class="regexp">/\.css$/</span>,</span><br><span class="line">    use:ExtractTextPlugin.extract(&#123;</span><br><span class="line">        fallback:<span class="string">"style-loader"</span>,</span><br><span class="line">        use:[&#123;</span><br><span class="line">            loader:<span class="string">"css-loader"</span>,</span><br><span class="line">            options:&#123;</span><br><span class="line">                <span class="comment">// å‹ç¼©</span></span><br><span class="line">                minimize:<span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="comment">// æ·»åŠ å…¬å…±è·¯å¾„</span></span><br><span class="line">        publicPath:<span class="string">"../"</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="webpack-æ’ä»¶"><a href="#webpack-æ’ä»¶" class="headerlink" title="webpack æ’ä»¶"></a>webpack æ’ä»¶</h2><p>æ’ä»¶æ˜¯ webpack çš„æ”¯æŸ±åŠŸèƒ½ã€‚webpack è‡ªèº«ä¹Ÿæ˜¯æ„å»ºäºï¼Œä½ åœ¨ webpack é…ç½®ä¸­ç”¨åˆ°çš„ç›¸åŒçš„æ’ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼</p><p>æ’ä»¶ç›®çš„åœ¨äºè§£å†³ loader æ— æ³•å®ç°çš„å…¶ä»–äº‹ã€‚</p><h3 id="å‰–æ"><a href="#å‰–æ" class="headerlink" title="å‰–æ"></a>å‰–æ</h3><p>webpack æ’ä»¶æ˜¯ä¸€ä¸ªå…·æœ‰ apply å±æ€§çš„ JavaScript å¯¹è±¡ã€‚apply å±æ€§ä¼šè¢« webpack compiler è°ƒç”¨ï¼Œå¹¶ä¸” compiler å¯¹è±¡å¯åœ¨æ•´ä¸ªç¼–è¯‘ç”Ÿå‘½å‘¨æœŸè®¿é—®ã€‚</p><p><strong>ConsoleLogOnBuildWebpackPlugin.js</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pluginName = <span class="string">'ConsoleLogOnBuildWebpackPlugin'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConsoleLogOnBuildWebpackPlugin</span> </span>&#123;</span><br><span class="line">    apply(compiler) &#123;</span><br><span class="line">        compiler.hooks.run.tap(pluginName, compilation =&gt; &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"webpack æ„å»ºè¿‡ç¨‹å¼€å§‹ï¼"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>compiler hook çš„ tap æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåº”è¯¥æ˜¯é©¼å³°å¼å‘½åçš„æ’ä»¶åç§°ã€‚å»ºè®®ä¸ºæ­¤ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ï¼Œä»¥ä¾¿å®ƒå¯ä»¥åœ¨æ‰€æœ‰ hook ä¸­å¤ç”¨ã€‚</p><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>ç”±äºæ’ä»¶å¯ä»¥æºå¸¦å‚æ•°/é€‰é¡¹ï¼Œä½ å¿…é¡»åœ¨ webpack é…ç½®ä¸­ï¼Œå‘ <code>plugins</code> å±æ€§ä¼ å…¥ <code>new</code> å®ä¾‹ã€‚</p><p>æ ¹æ®ä½ çš„ webpack ç”¨æ³•ï¼Œè¿™é‡Œæœ‰å¤šç§æ–¹å¼ä½¿ç”¨æ’ä»¶ã€‚</p><h3 id="é…ç½®-3"><a href="#é…ç½®-3" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>webpack.config.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>); <span class="comment">//é€šè¿‡ npm å®‰è£…</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>); <span class="comment">//è®¿é—®å†…ç½®çš„æ’ä»¶</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  entry: <span class="string">'./path/to/my/entry/file.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'my-first-webpack.bundle.js'</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(js|jsx)$/</span>,</span><br><span class="line">        use: <span class="string">'babel-loader'</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;<span class="attr">template</span>: <span class="string">'./src/index.html'</span>&#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¸Šé¢çš„ <code>HtmlWebpackPlugin</code> æ’ä»¶åªä½¿ç”¨äº†åŸºæœ¬çš„åŠŸèƒ½ï¼Œæ›´å¤šçš„å‚æ•°å¯ä»¥å»githubä¸ŠæŸ¥çœ‹ã€‚</p><h2 id="webpack-babel"><a href="#webpack-babel" class="headerlink" title="webpack babel"></a>webpack babel</h2><h3 id="å®‰è£…-4"><a href="#å®‰è£…-4" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>æ ¸å¿ƒ<br>babel-core</p><p>åŠŸèƒ½<br>babel-loader<br>babel-preset-env<br>babel-preset-react</p><h4 id="babel-loader-7-x-ç‰ˆæœ¬å®‰è£…"><a href="#babel-loader-7-x-ç‰ˆæœ¬å®‰è£…" class="headerlink" title="babel-loader 7.x ç‰ˆæœ¬å®‰è£…"></a>babel-loader 7.x ç‰ˆæœ¬å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install babel-core babel-loader@7 babel-preset-env babel-preset-react --save</span><br></pre></td></tr></table></figure><p>å®‰è£…çš„ <code>babel-loader</code> æ˜¯7.xç‰ˆæœ¬ï¼Œ8.xç‰ˆæœ¬ç›®å‰ä¼šå‡ºç°æŠ¥é”™ï¼Œå…·ä½“å¦‚ä½•è§£å†³è¿˜æ²¡æœ‰äº†è§£æ¸…æ¥šï¼Œæ‰€ä»¥å®‰è£… <code>babel-loader</code> æ—¶éœ€è¦å†™æˆè¿™æ ·çš„ <code>babel-loader@7</code></p><h4 id="babel-loader-8-x-ç‰ˆæœ¬å®‰è£…"><a href="#babel-loader-8-x-ç‰ˆæœ¬å®‰è£…" class="headerlink" title="babel-loader 8.x ç‰ˆæœ¬å®‰è£…"></a>babel-loader 8.x ç‰ˆæœ¬å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install -D babel-loader @babel/core @babel/preset-env @babel/preset-react -S</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸º <code>babel-loader 8.x</code> ç‰ˆæœ¬å®‰è£…ï¼Œéœ€è¦åŒ¹é…ä¸‹é¢çš„ 8.x é…ç½®</p><h3 id="é…ç½®-4"><a href="#é…ç½®-4" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><h4 id="babel-loader-7-x-ç‰ˆæœ¬é…ç½®"><a href="#babel-loader-7-x-ç‰ˆæœ¬é…ç½®" class="headerlink" title="babel-loader 7.x ç‰ˆæœ¬é…ç½®"></a>babel-loader 7.x ç‰ˆæœ¬é…ç½®</h4><p>ç¬¬ä¸€ç§ å…¨åœ¨ <code>webpack.config.js</code> ä¸­é…ç½®</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test:<span class="regexp">/\.(jsx|js)$/</span>,</span><br><span class="line">        use:&#123;</span><br><span class="line">            loader:<span class="string">'babel-loader'</span>,</span><br><span class="line">            options:&#123;</span><br><span class="line">                presets:[<span class="string">'env'</span>,<span class="string">'react'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ’é™¤node_modules æ–‡ä»¶</span></span><br><span class="line">        exclude:<span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ æ–°å»º <code>.babelrc</code> æ–‡ä»¶ ï¼ˆæ¨èä½¿ç”¨ç¬¬äºŒç§ï¼‰</p><p>webpack.config.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test:<span class="regexp">/\.(jsx|js)$/</span>,</span><br><span class="line">        use:&#123;</span><br><span class="line">            loader:<span class="string">'babel-loader'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ’é™¤node_,modules æ–‡ä»¶</span></span><br><span class="line">        exclude:<span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>.baelrc</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        &quot;env&quot;,</span><br><span class="line">        &quot;react&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="babel-loader-8-x-ç‰ˆæœ¬é…ç½®"><a href="#babel-loader-8-x-ç‰ˆæœ¬é…ç½®" class="headerlink" title="babel-loader 8.x ç‰ˆæœ¬é…ç½®"></a>babel-loader 8.x ç‰ˆæœ¬é…ç½®</h4><p>ç¬¬ä¸€ç§ å…¨åœ¨ <code>webpack.config.js</code> ä¸­é…ç½®</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test:<span class="regexp">/\.(jsx|js)$/</span>,</span><br><span class="line">        use:&#123;</span><br><span class="line">            loader:<span class="string">'babel-loader'</span>,</span><br><span class="line">            options:&#123;</span><br><span class="line">                presets:[<span class="string">'"@babel/preset-env'</span>,<span class="string">'"@babel/preset-react'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ’é™¤node_modules æ–‡ä»¶</span></span><br><span class="line">        exclude:<span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§ æ–°å»º <code>.babelrc</code> æ–‡ä»¶ ï¼ˆæ¨èä½¿ç”¨ç¬¬äºŒç§ï¼‰</p><p>webpack.config.js</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">rules:[</span><br><span class="line">    &#123;</span><br><span class="line">        test:<span class="regexp">/\.(jsx|js)$/</span>,</span><br><span class="line">        use:&#123;</span><br><span class="line">            loader:<span class="string">'babel-loader'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ’é™¤node_,modules æ–‡ä»¶</span></span><br><span class="line">        exclude:<span class="regexp">/node_modules/</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>.baelrc</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;: [</span><br><span class="line">        &quot;&quot;@babel/preset-env&quot;,</span><br><span class="line">        &quot;&quot;@babel/preset-react&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="webpack-å¼•å…¥ç¬¬ä¸‰æ–¹åº“"><a href="#webpack-å¼•å…¥ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="webpack å¼•å…¥ç¬¬ä¸‰æ–¹åº“"></a>webpack å¼•å…¥ç¬¬ä¸‰æ–¹åº“</h2><h3 id="å®‰è£…-5"><a href="#å®‰è£…-5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cnpm install jquery -S</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>åœ¨webpack 3.x ä¸­éœ€è¦å¤§é‡é…ç½®ï¼Œä½†æ˜¯åœ¨webpackä¸­åˆ™å°‘äº†å¾ˆå¤š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> $ = <span class="built_in">require</span>(<span class="string">"jquery"</span>);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"body"</span>).html(<span class="string">"&lt;p&gt;æˆ‘æ˜¯ç”±JQueryå†™å‡ºæ¥çš„&lt;/p&gt;"</span>)</span><br></pre></td></tr></table></figure><p>æ¬¢è¿åˆ° <a href="https://www.kancloud.cn/spirit-ling/blog" rel="external nofollow noopener noreferrer" target="_blank">çœ‹äº‘é˜…è¯»</a></p><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>Webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript åˆ›å»ºå¯¹è±¡å’Œç»§æ‰¿</title>
    <url>/posts/5c3d9c03/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>JavaScript åˆ›å»ºå¯¹è±¡å’Œç»§æ‰¿</p></blockquote><a id="more"></a><h2 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h2><p>JSä¸­å¯ä»¥æœ‰è®¸å¤šè®¾è®¡æ¨¡å¼ï¼Œåœ¨è¿™äº›ä¸­æ¨èä½¿ç”¨ç»„åˆæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ï¼›<br>å› ä¸ºä¸å¤ªå–„äºå†™æ–‡ç« ï¼Œæ‰€ä»¥ä¸‹é¢ç®€åŒ–æ–‡å­—å™è¿°ï¼Œç›´æ¥çœ‹ä»£ç </p><h3 id="å·¥å‚æ¨¡å¼"><a href="#å·¥å‚æ¨¡å¼" class="headerlink" title="å·¥å‚æ¨¡å¼"></a>å·¥å‚æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj=&#123;&#125;</span><br><span class="line">    obj.name=name;</span><br><span class="line">    obj.age=age;</span><br><span class="line">    obj.sayName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ„é€ å‡½æ•°æ¨¡å¼"><a href="#æ„é€ å‡½æ•°æ¨¡å¼" class="headerlink" title="æ„é€ å‡½æ•°æ¨¡å¼"></a>æ„é€ å‡½æ•°æ¨¡å¼</h3><p>æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬å°†å‡½æ•°åèµ·ä¸ºå¤§å†™å­—æ¯å¼€å¤´</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">    <span class="keyword">this</span>.age=age;</span><br><span class="line">    <span class="keyword">this</span>.sayName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a=<span class="keyword">new</span> Person(<span class="string">"å¼ ä¸‰"</span>,<span class="number">29</span>);</span><br><span class="line"><span class="keyword">var</span> b=<span class="keyword">new</span> Person(<span class="string">"æå››"</span>,<span class="number">22</span>);</span><br><span class="line"></span><br><span class="line">a.sayName();</span><br><span class="line">b.sayName();</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°å¯ä»¥é€šè¿‡ <code>new</code> å…³é”®å­—æ¥è¿›è¡Œå¤„ç†ï¼Œä½¿å…¶å®ä¾‹åŒ–ï¼Œæ¯ä¸ªéƒ½æœ‰ç‹¬æœ‰æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç§æœ‰å˜é‡</p><h3 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.name = <span class="string">"Li Si"</span>;</span><br><span class="line">Person.prototype.age = <span class="number">21</span>;</span><br><span class="line">Person.prototype.sayName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1=<span class="keyword">new</span> Person();</span><br><span class="line">person1.sayName(); <span class="comment">//"Li Si"</span></span><br><span class="line"><span class="keyword">var</span> person2=<span class="keyword">new</span> Person();</span><br><span class="line">person2.sayName(); <span class="comment">//"Li Si"</span></span><br></pre></td></tr></table></figure><p>åŸå‹æ¨¡å¼æ‰€æœ‰çš„éƒ½å…±ç”¨åŒä¸€ä¸ªæ•°æ®ï¼Œç›¸å½“äºå…¬æœ‰å˜é‡</p><h3 id="ç»„åˆæ¨¡å¼ï¼šæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ç»“åˆ"><a href="#ç»„åˆæ¨¡å¼ï¼šæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ç»“åˆ" class="headerlink" title="ç»„åˆæ¨¡å¼ï¼šæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ç»“åˆ"></a>ç»„åˆæ¨¡å¼ï¼šæ„é€ å‡½æ•°å’ŒåŸå‹æ¨¡å¼ç»“åˆ</h3><p>é€šè¿‡ä¸Šé¢ä¸¤ä¸ªä¾‹å­ï¼Œä¸¤ä¸ªéƒ½æœ‰ç‹¬æœ‰çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»„åˆä¸¤è€…äº†æ¥è¿›è¡Œå¤„ç†ï¼Œä¸€èˆ¬æ¨èä½¿ç”¨ç»„åˆæ¨¡å¼</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">    <span class="keyword">this</span>.age=age;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1=<span class="keyword">new</span> Person(<span class="string">"å¼ ä¸‰"</span>);</span><br><span class="line">person1.sayName(); <span class="comment">//"å¼ ä¸‰"</span></span><br><span class="line"><span class="keyword">var</span> person2=<span class="keyword">new</span> Person(<span class="string">"æå››"</span>);</span><br><span class="line">person2.sayName(); <span class="comment">//"æå››"</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å„è‡ªç»è¿‡å®ä¾‹åŒ–åï¼Œéƒ½æœ‰è‡ªå·±çš„ç‹¬æœ‰æ•°æ®ï¼Œä½†æ˜¯å´æœ‰ç€å…¬å…±æ–¹æ³•ï¼›</p><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><p>ES5 ç»§æ‰¿æœ‰è®¸å¤šä¸­æ–¹å¼ï¼Œæˆ‘ä»¬è¿™é‡Œåªè¯´æ™®é€šå¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼</p><h3 id="åŸå‹é“¾èµ‹å€¼ç»§æ‰¿"><a href="#åŸå‹é“¾èµ‹å€¼ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾èµ‹å€¼ç»§æ‰¿"></a>åŸå‹é“¾èµ‹å€¼ç»§æ‰¿</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">father</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">father.prototype.sayName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sub</span>(<span class="params">age</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age=age;</span><br><span class="line">&#125;</span><br><span class="line">sub.prototype=<span class="keyword">new</span> father();</span><br><span class="line">sub.prototype.sayAge=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å°±æ˜¯å…¸å‹çš„åŸå‹é“¾èµ‹å€¼ç»§æ‰¿ï¼Œä½†æ˜¯è¿™ä¸ªç»§æ‰¿æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œåœ¨ç»§æ‰¿æ—¶éœ€è¦ <code>new</code> å…³é”®å­—è¿›è¡Œå¤„ç†ã€‚</p><h3 id="æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="æ„é€ å‡½æ•°ç»§æ‰¿"></a>æ„é€ å‡½æ•°ç»§æ‰¿</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">father</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name=name;</span><br><span class="line">    <span class="keyword">this</span>.age=<span class="number">22</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">father.prototype.sayName=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sub</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	  father.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s=<span class="keyword">new</span> sub(<span class="string">"a"</span>)</span><br><span class="line">&gt; s</span><br><span class="line">&gt; sub &#123;<span class="attr">name</span>: <span class="string">"a"</span>, <span class="attr">age</span>: <span class="number">22</span>&#125;</span><br><span class="line">    age: <span class="number">22</span></span><br><span class="line">    name: <span class="string">"a"</span></span><br><span class="line">    __proto__:</span><br><span class="line">    <span class="keyword">constructor</span>: Æ’ sub()</span><br><span class="line">    __proto__: Object</span><br></pre></td></tr></table></figure><p>æ„é€ å‡½æ•°ç»§æ‰¿æœ€ååœ¨è¾“å‡ºä¸­ä¼šå‘ç°å¹¶æ²¡æœ‰ çˆ¶çº§çš„æ–¹æ³• ï¼Œä½†æ˜¯å¯ä»¥å°†æ•°æ®ä¼ åˆ°çˆ¶çº§ï¼Œä¸åŸå‹é“¾ç»§æ‰¿äº’è¡¥ï¼Œæ‰€ä»¥è¡ç”Ÿå‡ºç»„åˆç»§æ‰¿çš„æ–¹å¼</p><h3 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.className = <span class="string">"Father"</span></span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sub</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    Father.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»§æ‰¿åŸå‹</span></span><br><span class="line">Sub.prototype = <span class="keyword">new</span> Father();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s=<span class="keyword">new</span> Sub(<span class="string">"å¼ ä¸‰"</span>,<span class="number">12</span>);</span><br></pre></td></tr></table></figure><p>ä¸ä»…ä¼šç»§æ‰¿æ„é€ å‡½æ•°ä¸­çš„å±æ€§ï¼Œä¹Ÿä¼šå¤åˆ¶çˆ¶ç±»åŸå‹é“¾ä¸­çš„å±æ€§</p><p>ä½†æ˜¯åœ¨ <code>Sub.prototype = new Father();</code> ä¹‹å</p><p>Sub çš„åŸå‹å˜æˆè¿™æ ·çš„äº†</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&gt; Sub.prototype</span><br><span class="line">&gt; &#123;<span class="attr">name</span>: <span class="literal">undefined</span>, <span class="attr">className</span>: <span class="string">"person"</span>&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´Subçš„åŸå‹ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªnameå±æ€§ï¼Œè€Œä¹‹ååˆ›å»º s æ—¶ä¼ ç»™æ„é€ çš„å‡½æ•°çš„nameåˆ™æ˜¯é€šè¿‡thisé‡æ–°å®šä¹‰äº†ä¸€ä¸ªnameå±æ€§ï¼Œç›¸å½“äºåªæ˜¯è¦†ç›–æ‰äº†åŸå‹çš„nameå±æ€§ï¼ˆåŸå‹ä¸­çš„nameä¾ç„¶è¿˜åœ¨ï¼‰ï¼Œè¿™æ ·å¾ˆä¸ä¼˜é›…ã€‚</p><h3 id="å¯„ç”Ÿç»„åˆç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆç»§æ‰¿</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.className = <span class="string">"Father"</span></span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sub</span>(<span class="params">name,age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age=age;</span><br><span class="line">    Father.call(<span class="keyword">this</span>, name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨æ„æ­¤å¤„</span></span><br><span class="line">Sub.prototype=<span class="built_in">Object</span>.create(Father.prototype)</span><br><span class="line"></span><br><span class="line">Sub.prototype.sayAge=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨åˆ°äº† <code>Object.creat(obj)</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå¯¹ä¼ å…¥çš„objå¯¹è±¡è¿›è¡Œæµ…æ‹·è´ã€‚å’Œä¸Šé¢ç»„åˆç»§æ‰¿çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ï¼šå°†çˆ¶ç±»çš„åŸå‹å¤åˆ¶ç»™äº†å­ç±»åŸå‹ã€‚è¿™ç§åšæ³•å¾ˆæ¸…æ™°ï¼š</p><ol><li>æ„é€ å‡½æ•°ä¸­ç»§æ‰¿çˆ¶ç±»å±æ€§ï¼æ–¹æ³•ï¼Œå¹¶åˆå§‹åŒ–çˆ¶ç±»ã€‚</li><li>å­ç±»åŸå‹å’Œçˆ¶ç±»åŸå‹å»ºç«‹è”ç³»ã€‚</li></ol><p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯constructorå±æ€§ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&gt; Father.prototype.constructor</span><br><span class="line">&lt; Father(name)&#123;</span><br><span class="line">   <span class="keyword">this</span>.name=name;</span><br><span class="line">   <span class="keyword">this</span>.className=<span class="string">"Father"</span> </span><br><span class="line"> &#125;</span><br><span class="line">&gt; Sub.prototype.constructor</span><br><span class="line">&lt; Father(name)&#123;</span><br><span class="line">   <span class="keyword">this</span>.name=name; </span><br><span class="line">   <span class="keyword">this</span>.className=<span class="string">"Father"</span> </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>constructoræ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒFatherå’ŒSubå®ä¾‹çš„constructoræŒ‡å‘éƒ½æ˜¯Fatherï¼Œå½“ç„¶ï¼Œè¿™å¹¶ä¸ä¼šæ”¹å˜instanceofçš„ç»“æœï¼Œä½†æ˜¯å¯¹äºéœ€è¦ç”¨åˆ°construcorçš„åœºæ™¯ï¼Œå°±ä¼šæœ‰é—®é¢˜ã€‚æ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬ä¼šåŠ ä¸Šè¿™ä¹ˆä¸€å¥ï¼š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Sub.prototype.constructor = Sub</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Object</tag>
        <tag>Inheritance</tag>
      </tags>
  </entry>
  <entry>
    <title>Node-RSA éå¯¹ç§°åŠ å¯†ä½¿ç”¨</title>
    <url>/posts/dd3fce82/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Node-RSA éå¯¹ç§°åŠ å¯†ä½¿ç”¨</p></blockquote><a id="more"></a><h2 id="å…³äºéå¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#å…³äºéå¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="å…³äºéå¯¹ç§°åŠ å¯†ç®—æ³•"></a>å…³äºéå¯¹ç§°åŠ å¯†ç®—æ³•</h2><p><a href="https://www.zhihu.com/question/33645891" rel="external nofollow noopener noreferrer" target="_blank">å¦‚ä½•ç”¨é€šä¿—æ˜“æ‡‚çš„è¯æ¥è§£é‡Šéå¯¹ç§°åŠ å¯†?</a></p><h2 id="NodeæœåŠ¡ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#NodeæœåŠ¡ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="NodeæœåŠ¡ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•"></a>NodeæœåŠ¡ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•</h2><ol><li>é¦–å…ˆå¼•å…¥ <code>node-rsa</code> åŒ…</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install node-rsa --save</span><br></pre></td></tr></table></figure><ol start="2"><li>ç”Ÿæˆç§é’¥å’Œå…¬é’¥</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> key = <span class="keyword">new</span> NodeRSA(&#123; <span class="attr">b</span>: <span class="number">512</span> &#125;);</span><br><span class="line"><span class="keyword">const</span> publicKey = key.exportKey(<span class="string">'public'</span>);</span><br><span class="line"><span class="keyword">const</span> privateKey = key.exportKey();</span><br></pre></td></tr></table></figure><ol start="3"><li>è·å–ç§é’¥å’Œå…¬é’¥</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> publicKey = key.exportKey(<span class="string">'public'</span>);</span><br><span class="line"><span class="keyword">const</span> privateKey = key.exportKey(<span class="string">'private'</span>);</span><br></pre></td></tr></table></figure><ol start="4"><li>å…¬é’¥åŠ å¯†ç§é’¥è§£å¯† â€” ç”¨äºåŠ è§£å¯†</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> encryptPublic = key.encrypt(data, <span class="string">'base64'</span>, <span class="string">'utf8'</span>);</span><br><span class="line"><span class="keyword">const</span> decryptPrivate = key.decrypt(encryptPublic, <span class="string">'json'</span>);</span><br></pre></td></tr></table></figure><ul><li><code>data</code> å°±æ˜¯éœ€è¦åŠ å¯†çš„æ˜æ–‡æ•°æ®ï¼Œå¯ä»¥æ˜¯ <code>string</code>, <code>Buffer</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>Array/Object</code>ï¼Œ<code>Array/Object</code> é¦–å…ˆä¼šè‡ªåŠ¨ç¼–ç æˆ <code>json</code> å­—ç¬¦ä¸²</li><li><code>base64</code> å°±æ˜¯éœ€è¦åŠ å¯†çš„ç»“æœä»¥ä»€ä¹ˆæ ¼å¼æ˜¾ç¤ºï¼Œè¿™é‡Œé€‰æ‹©ä»¥<code>base64</code>æ˜¾ç¤ºï¼Œé»˜è®¤ä¸ºï¼šbuffer</li><li><code>utf8</code> æ•°æ®æºæ˜¯ä»€ä¹ˆç¼–ç æ ¼å¼</li><li><code>json</code> è§£å¯†ä¹‹åä»¥ä»€ä¹ˆæ ¼å¼å‡ºç°ï¼Œè¿™é‡Œé€‰æ‹©<code>json</code>æ ¼å¼</li></ul><ol start="5"><li>ç§é’¥åŠ å¯†å…¬é’¥è§£å¯† â€” ç”¨äºç­¾å</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> encryptPrivate = key.encryptPrivate(data, <span class="string">'base64'</span>, <span class="string">'utf8'</span>);</span><br><span class="line"><span class="keyword">const</span> decryptPublic = key.decryptPublic(encryptPrivate, <span class="string">'json'</span>);</span><br></pre></td></tr></table></figure><ul><li><code>data</code> å°±æ˜¯éœ€è¦åŠ å¯†çš„æ˜æ–‡æ•°æ®ï¼Œå¯ä»¥æ˜¯ <code>string</code>, <code>Buffer</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>Array/Object</code>ï¼Œ<code>Array/Object</code> é¦–å…ˆä¼šè‡ªåŠ¨ç¼–ç æˆ <code>json</code> å­—ç¬¦ä¸²</li><li><code>base64</code> å°±æ˜¯éœ€è¦åŠ å¯†çš„ç»“æœä»¥ä»€ä¹ˆæ ¼å¼æ˜¾ç¤ºï¼Œè¿™é‡Œé€‰æ‹©ä»¥<code>base64</code>æ˜¾ç¤ºï¼Œé»˜è®¤ä¸ºï¼šbuffer</li><li><code>utf8</code> æ•°æ®æºæ˜¯ä»€ä¹ˆç¼–ç æ ¼å¼</li><li><code>json</code> è§£å¯†ä¹‹åä»¥ä»€ä¹ˆæ ¼å¼å‡ºç°ï¼Œè¿™é‡Œé€‰æ‹©<code>json</code>æ ¼å¼</li></ul><ol start="6"><li>è¿”å›ç»“æœ</li></ol><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ctx.body = &#123; privateKey, publicKey, <span class="attr">publicData</span>: data, encryptPublic, decryptPrivate, encryptPrivate, decryptPublic &#125;;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä¸‹é¢ä¸å­˜åœ¨ä»£ç å—æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæ˜¯å¦å¯ä»¥è®¿é—® github çš„ <a href="https://gist.github.com/" rel="external nofollow noopener noreferrer" target="_blank">gist</a> ï¼Œæ— æ³•è®¿é—® gist æ—¶ï¼Œå¯ä»¥ç‚¹å‡»æ­¤å¤„è®¿é—® <a href="https://gitee.com/SpiritLing/codes/drqb6zw90onvkghlmfxts73" rel="external nofollow noopener noreferrer" target="_blank">gitee</a> çš„ä»£ç å—</p></blockquote><script src="https://gist.github.com/SpiritLing/3503dc24df084d8d007d470973c4d721.js"></script><!-- rebuild by neat -->]]></content>
      <categories>
        <category>NodeJS</category>
        <category>RSA</category>
      </categories>
      <tags>
        <tag>RSA</tag>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos7 å®‰è£…éœ€è¦çš„è½¯ä»¶ç¯å¢ƒ</title>
    <url>/posts/7bba76b6/</url>
    <content><![CDATA[<!-- build time:Tue Jul 21 2020 18:53:48 GMT+0800 (China Standard Time) --><blockquote class="blockquote-center"><p>Centos7 å®‰è£…éœ€è¦çš„è½¯ä»¶ç¯å¢ƒï¼ˆmysql, nodejs, nginx, jdk, Jenkins, Gitï¼‰</p></blockquote><a id="more"></a><h2 id="Mysql-å®‰è£…"><a href="#Mysql-å®‰è£…" class="headerlink" title="Mysql å®‰è£…"></a>Mysql å®‰è£…</h2><h3 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h3><ol><li>ä¸‹è½½å¹¶å®‰è£… MySQL å®˜æ–¹çš„ Yum Repository</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</span><br></pre></td></tr></table></figure><ol start="2"><li>Yum å®‰è£…æº</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install mysql57-community-release-el7-10.noarch.rpm</span><br></pre></td></tr></table></figure><ol start="3"><li>å®‰è£… Mysql</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure><ol start="4"><li>è®¾ç½®å¼€æœº Mysql</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> mysqld.service</span><br></pre></td></tr></table></figure><p>5 å¯åŠ¨ Mysql</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure><h3 id="Mysql-è®¾ç½®"><a href="#Mysql-è®¾ç½®" class="headerlink" title="Mysql è®¾ç½®"></a>Mysql è®¾ç½®</h3><ol><li>è®¿é—® Mysql ä¹‹å‰éœ€è¦å…ˆæŸ¥çœ‹é»˜è®¤å¯†ç </li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep <span class="string">"password"</span> /var/<span class="built_in">log</span>/mysqld.log</span><br></pre></td></tr></table></figure><ol start="2"><li>ç™»å½• Mysql</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥åˆšæ‰æŸ¥åˆ°çš„å¯†ç ï¼Œå¯†ç ä¸å¯è§éšè—æ˜¾ç¤ºã€‚</p><ol start="3"><li>ä¿®æ”¹å¯†ç ç­–ç•¥</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&gt; show VARIABLES like <span class="string">"%password%"</span></span><br><span class="line">+---------------------------------------+---------+</span><br><span class="line">| Variable_name                         | Value   |</span><br><span class="line">|---------------------------------------+---------|</span><br><span class="line">| default_password_lifetime             | 0       |</span><br><span class="line">| disconnect_on_expired_password        | ON      |</span><br><span class="line">| log_builtin_as_identified_by_password | OFF     |</span><br><span class="line">| mysql_native_password_proxy_users     | OFF     |</span><br><span class="line">| old_passwords                         | 0       |</span><br><span class="line">| report_password                       |         |</span><br><span class="line">| sha256_password_proxy_users           | OFF     |</span><br><span class="line">| validate_password_dictionary_file     |         |</span><br><span class="line">| validate_password_length              | 8       |</span><br><span class="line">| validate_password_mixed_case_count    | 1       |</span><br><span class="line">| validate_password_number_count        | 1       |</span><br><span class="line">| validate_password_policy              | MEDIUM  |</span><br><span class="line">| validate_password_special_char_count  | 1       |</span><br><span class="line">+---------------------------------------+---------+</span><br></pre></td></tr></table></figure><p>ä»‹ç»å‡ ä¸ªä¸»è¦çš„çš„å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>validate_password_number_count</td><td>å‚æ•°æ˜¯å¯†ç ä¸­è‡³å°‘å«æœ‰çš„æ•°å­—ä¸ªæ•°ï¼Œå½“å¯†ç ç­–ç•¥æ˜¯ MEDIUM æˆ–ä»¥ä¸Šæ—¶ç”Ÿæ•ˆã€‚</td></tr><tr><td>validate_password_special_char_count</td><td>å‚æ•°æ˜¯å¯†ç ä¸­éè‹±æ–‡æ•°å­—ç­‰ç‰¹æ®Šå­—ç¬¦çš„ä¸ªæ•°ï¼Œå½“å¯†ç ç­–ç•¥æ˜¯ MEDIUM æˆ–ä»¥ä¸Šæ—¶ç”Ÿæ•ˆã€‚</td></tr><tr><td>validate_password_mixed_case_count</td><td>å‚æ•°æ˜¯å¯†ç ä¸­è‹±æ–‡å­—ç¬¦å¤§å°å†™çš„ä¸ªæ•°ï¼Œå½“å¯†ç ç­–ç•¥æ˜¯ MEDIUM æˆ–ä»¥ä¸Šæ—¶ç”Ÿæ•ˆã€‚</td></tr><tr><td>validate_password_length</td><td>å‚æ•°æ˜¯å¯†ç çš„é•¿åº¦ï¼Œè¿™ä¸ªå‚æ•°ç”±ä¸‹é¢çš„å…¬å¼ç”Ÿæˆã€‚</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ›´æ”¹å¯†ç é•¿åº¦</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_length=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ”¹æ•°å­—ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_number_count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ”¹å¤§å°å†™å­—æ¯ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_mixed_case_count=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ”¹ç‰¹æ®Šå­—ç¬¦ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password_special_char_count=<span class="number">0</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¿®æ”¹å¯†ç </li></ol><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'Your New Pssword'</span>;</span><br></pre></td></tr></table></figure><ol start="5"><li>å¼€å¯è¿œç¨‹è®¿é—®</li></ol><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> *.* <span class="keyword">to</span> <span class="string">'root'</span>@<span class="string">'You IP or ALL %'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'Your Password'</span> <span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>;</span><br><span class="line"><span class="comment"># åˆ·æ–°æƒé™</span></span><br><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>;</span><br></pre></td></tr></table></figure><ol start="6"><li>é…ç½®é»˜è®¤å­—ç¬¦</li></ol><p>åœ¨ <code>my.cnf</code>ï¼ˆ<code>/etc/my.cnf</code>ï¼‰ æˆ–è€… <code>my.ini</code> æ–‡ä»¶ä¸­</p><p>åœ¨ <code>my.cnf</code> é…ç½®ä¸­æ’å…¥ä¸‹é¢è¯­å¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure><p>ä¸€å®šè¦åœ¨ <code>[mysqld]</code> ä¹‹å‰æ’å…¥è¿™ä¸¤å¥ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ä¸‹é¢æŠ¥é”™</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql: [ERROR] unknown variable <span class="string">'datadir=/var/lib/mysql'</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦åŸå› å°±æ˜¯<code>[client]</code>çš„é…ç½®ä¿¡æ¯ï¼Œæ”¾åœ¨äº†<code>[mysqld]</code>é…ç½®ä¿¡æ¯çš„ä¸­é—´ï¼Œå¯¼è‡´å…¶ä»–<code>[mysqld]</code>çš„é…ç½®éƒ½å½’åœ¨<code>[client]</code>ä¸‹ã€‚</p><p>åœ¨ <code>socket</code> ä¹‹åæ’å…¥ä¸‹é¢ä¸¤è¡Œ</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_general_ci</span><br></pre></td></tr></table></figure><ol start="7"><li>äº‹åŠ¡éš”ç¦»ï¼ˆå¯é€‰ï¼š<code>confluence å®‰è£…éœ€è¦è®¾ç½®</code>ï¼‰</li></ol><p><a href="https://www.cnblogs.com/shihaiming/p/11044740.html" rel="external nofollow noopener noreferrer" target="_blank">Mysql å››ç§äº‹åŠ¡éš”ç¦»</a></p><p>åœ¨ <code>my.cnf</code> æˆ–è€… <code>my.ini</code> æ–‡ä»¶ä¸­</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">transaction_isolation = READ-COMMITTED</span><br></pre></td></tr></table></figure><blockquote class="blockquote-center">åšå®Œä¸Šé¢çš„å¯ä»¥é‡å¯ä¸‹MysqlæœåŠ¡ã€‚</blockquote><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-rpm-å®‰è£…-JDK"><a href="#ä½¿ç”¨-rpm-å®‰è£…-JDK" class="headerlink" title="ä½¿ç”¨ rpm å®‰è£… JDK"></a>ä½¿ç”¨ <code>rpm</code> å®‰è£… <code>JDK</code></h2><h3 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h3><p>å…ˆé€šè¿‡<a href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" rel="external nofollow noopener noreferrer" target="_blank">å®˜ç½‘</a>ä¸‹è½½å¦‚ä¸‹å›¾æ ‡æ³¨çš„çº¢è‰²æ–‡ä»¶</p><img src="/posts/7bba76b6/20190802195857.png" title="jdkä¸‹è½½"><p>ç°åœ¨ä¸‹è½½ jdk éœ€è¦ç™»å½• oracle è´¦æˆ·æ‰å¯ä»¥ä¸‹è½½</p><p>åœ¨æ­¤ç‰¹åˆ«è´¡çŒ®ä¸€ä¸ªè´¦å·å¯†ç ï¼Œåƒä¸‡ä¸è¦ä¿®æ”¹å¯†ç </p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">usernameï¼šoracle@spiritling.uu.me</span><br><span class="line">passwordï¼šNkzKx!5fsx5Tj4@</span><br></pre></td></tr></table></figure><h3 id="ä¼ è¾“"><a href="#ä¼ è¾“" class="headerlink" title="ä¼ è¾“"></a>ä¼ è¾“</h3><p>å°†ä¸‹è½½çš„æ–‡ä»¶é€šè¿‡<a href="https://filezilla-project.org/" rel="external nofollow noopener noreferrer" target="_blank">FileZilla</a>è½¯ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ä½¿ç”¨ <code>rpm</code> å‘½ä»¤å®‰è£…</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rpm -ivh jdk-8u152-linux-x64.rpm</span><br></pre></td></tr></table></figure><img src="/posts/7bba76b6/20190802200348.png" title="jdkä¸‹è½½"><h2 id="Nginx-ä¸‹è½½å®‰è£…"><a href="#Nginx-ä¸‹è½½å®‰è£…" class="headerlink" title="Nginx ä¸‹è½½å®‰è£…"></a>Nginx ä¸‹è½½å®‰è£…</h2><h3 id="æ·»åŠ -yum-æº"><a href="#æ·»åŠ -yum-æº" class="headerlink" title="æ·»åŠ  yum æº"></a>æ·»åŠ  <code>yum</code> æº</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œ <code>yum</code> æºä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤æŸ¥çœ‹</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum repolist</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><h3 id="é…ç½®æœåŠ¡"><a href="#é…ç½®æœåŠ¡" class="headerlink" title="é…ç½®æœåŠ¡"></a>é…ç½®æœåŠ¡</h3><p>è®¾ç½®å¼€æœºå¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">service nginx start</span><br></pre></td></tr></table></figure><h3 id="nginx-å‘½ä»¤"><a href="#nginx-å‘½ä»¤" class="headerlink" title="nginx å‘½ä»¤"></a>nginx å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nginx # æ‰“å¼€ nginx</span><br><span class="line">nginx -t # æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯</span><br><span class="line">nginx -s reopen # é‡å¯Nginx</span><br><span class="line">nginx -s reload # é‡æ–°åŠ è½½Nginxé…ç½®æ–‡ä»¶ï¼Œç„¶åä»¥ä¼˜é›…çš„æ–¹å¼é‡å¯Nginx</span><br><span class="line">nginx -s stop # å¼ºåˆ¶åœæ­¢NginxæœåŠ¡</span><br><span class="line">nginx -s quit # ä¼˜é›…åœ°åœæ­¢NginxæœåŠ¡ï¼ˆå³å¤„ç†å®Œæ‰€æœ‰è¯·æ±‚åå†åœæ­¢æœåŠ¡ï¼‰</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">nginx [-?hvVtq][-s signal] [-c filename][-p prefix] [-g directives]</span><br><span class="line"></span><br><span class="line">-?,-hÂ  Â  Â  Â  Â  Â : æ‰“å¼€å¸®åŠ©ä¿¡æ¯</span><br><span class="line">-vÂ  Â  Â  Â  Â  Â  Â  : æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º</span><br><span class="line">-VÂ  Â  Â  Â  Â  Â  Â  : æ˜¾ç¤ºç‰ˆæœ¬å’Œé…ç½®é€‰é¡¹ä¿¡æ¯ï¼Œç„¶åé€€å‡º</span><br><span class="line">-tÂ  Â  Â  Â  Â  Â  Â  : æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œç„¶åé€€å‡º</span><br><span class="line">-qÂ  Â  Â  Â  Â  Â  Â  : åœ¨æ£€æµ‹é…ç½®æ–‡ä»¶æœŸé—´å±è”½éé”™è¯¯ä¿¡æ¯</span><br><span class="line">-s signalÂ  Â  Â  Â : ç»™ä¸€ä¸ª nginx ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼šstopï¼ˆå¼ºåˆ¶åœæ­¢ï¼‰, quitï¼ˆä¼˜é›…é€€å‡ºï¼‰, reopenï¼ˆé‡å¯ï¼‰, reloadï¼ˆé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼‰</span><br><span class="line">-p prefixÂ  Â  Â  Â : è®¾ç½®å‰ç¼€è·¯å¾„ï¼ˆé»˜è®¤æ˜¯ï¼š/usr/share/nginx/ï¼‰</span><br><span class="line">-c filenameÂ  Â  Â : è®¾ç½®é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤æ˜¯ï¼š/etc/nginx/nginx.confï¼‰</span><br><span class="line">-g directivesÂ  Â : è®¾ç½®é…ç½®æ–‡ä»¶å¤–çš„å…¨å±€æŒ‡ä»¤</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-NodeJS"><a href="#å®‰è£…-NodeJS" class="headerlink" title="å®‰è£… NodeJS"></a>å®‰è£… NodeJS</h2><h3 id="é€šè¿‡-yum-å®‰è£…-nodejs"><a href="#é€šè¿‡-yum-å®‰è£…-nodejs" class="headerlink" title="é€šè¿‡ yum å®‰è£… nodejs"></a>é€šè¿‡ <code>yum</code> å®‰è£… nodejs</h3><h4 id="æ›´æ–°-nodejs-å„ç§ç‰ˆæœ¬-yum-æº"><a href="#æ›´æ–°-nodejs-å„ç§ç‰ˆæœ¬-yum-æº" class="headerlink" title="æ›´æ–° nodejs å„ç§ç‰ˆæœ¬ yum æº"></a>æ›´æ–° nodejs å„ç§ç‰ˆæœ¬ <code>yum</code> æº</h4><ul><li>Nodejs v10.x å®‰è£…å‘½ä»¤</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl --silent --location https://rpm.nodesource.com/setup_10.x | bash -</span><br></pre></td></tr></table></figure><ul><li>Nodejs v8.x å®‰è£…å‘½ä»¤</li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ curl --silent --location https://rpm.nodesource.com/setup_8.x | bash -</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç‰ˆæœ¬å¦‚ä¸Šæ‰€ç¤º</p><h4 id="ç›´æ¥å®‰è£…"><a href="#ç›´æ¥å®‰è£…" class="headerlink" title="ç›´æ¥å®‰è£…"></a>ç›´æ¥å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install nodejs -y</span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡å‹ç¼©åŒ…å®‰è£…"><a href="#é€šè¿‡å‹ç¼©åŒ…å®‰è£…" class="headerlink" title="é€šè¿‡å‹ç¼©åŒ…å®‰è£…"></a>é€šè¿‡å‹ç¼©åŒ…å®‰è£…</h3><p>é¦–å…ˆéœ€è¦å»å®˜ç½‘ä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…</p><p>é€‰æ‹©å…¨éƒ¨é•œåƒ &gt; é˜¿é‡Œäº‘é•œåƒ</p><p>æ‰¾åˆ° <code>node-v12.10.0-linux-x64.tar.gz</code> å½¢ä¼¼è¿™ä¸ªæ–‡ä»¶åï¼Œå…·ä½“ç‰ˆæœ¬å·ä¼šå‘ç”Ÿå˜åŒ–</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://npm.taobao.org/mirrors/node/v12.10.0/node-v12.10.0-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®Œæ¯•åè§£å‹åˆ°æŒ‡å®šç›®å½•</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tar xf node-v12.10.0-linux-x64.tar.gz -C /usr/<span class="built_in">local</span>/</span><br></pre></td></tr></table></figure><p>é‡å‘½åæ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/</span><br><span class="line">mv node-v12.10.0-linux-x64/ nodejs</span><br></pre></td></tr></table></figure><p>è®¾ç½®å…¨å±€å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/nodejs/bin/node /usr/<span class="built_in">local</span>/bin</span><br><span class="line"></span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/nodejs/bin/npm /usr/<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†</p><h2 id="Jenkins-å®‰è£…"><a href="#Jenkins-å®‰è£…" class="headerlink" title="Jenkins å®‰è£…"></a>Jenkins å®‰è£…</h2><h3 id="å®˜æ–¹å®‰è£…"><a href="#å®˜æ–¹å®‰è£…" class="headerlink" title="å®˜æ–¹å®‰è£…"></a>å®˜æ–¹å®‰è£…</h3><p><a href="https://pkg.jenkins.io/redhat/" rel="external nofollow noopener noreferrer" target="_blank">å®˜æ–¹é“¾æ¥ RPM å®‰è£…</a></p><p>åœ¨æ­£å¼å®‰è£…ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…å¥½ <code>java</code> ç¯å¢ƒ</p><p>å®‰è£…æº</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo</span><br></pre></td></tr></table></figure><p>å¯¼å…¥ key</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key</span><br></pre></td></tr></table></figure><p>å®‰è£… <code>jenkins</code></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install jenkins</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç«¯å£</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/jenkins</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ° <code>JENKINS_PORT=&quot;8080&quot;</code> ä¿®æ”¹ä¸º <code>JENKINS_PORT=&quot;ä½ éœ€è¦çš„ç«¯å£&quot;</code></p><p>å¦‚æœä½ éœ€è¦åœ¨è‡ªåŠ¨åŒ–æ„å»ºä¸­è¿è¡Œ <code>root</code> æƒé™çš„ shell ï¼Œé‚£ä¹ˆè¿˜éœ€è¦ä¿®æ”¹ä¸Šé¢æ–‡ä»¶ä¸­</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">JENKINS_USER=&quot;root&quot;</span><br></pre></td></tr></table></figure><p>è¿›è¡Œé‡å¯æœåŠ¡</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">systemctl restart jenkins.service</span><br></pre></td></tr></table></figure><p>å¯åŠ¨è®¿é—®åï¼Œæç¤ºä» <code>/var/lib/jenkins/secrets/initialAdminPassword</code> è·å–å¯†ç </p><p>ç™»å½•åè¿›è¡Œå…¶ä»–æ“ä½œ</p><p>å½“ä½¿ç”¨ http è®¿é—®æ—¶ï¼Œæ’ä»¶æŒ‰è£…æ—¶ä¼šå‡ºç°ä¸€äº›å¤±è´¥ï¼Œæ‰€ä»¥éœ€è¦å…ˆè¿›å…¥ä»¥ä¸‹é“¾æ¥</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">HOST/pluginManager/advanced</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æœ€åº•ä¸‹çš„å‡çº§ç«™ç‚¹</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http://updates.jenkins.io/update-center.json</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å›½å†…æ¸…åæº</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…æ’ä»¶ï¼Œæ·»åŠ ç®¡ç†å‘˜å³å¯ä½¿ç”¨</p><h3 id="Docker-é•œåƒå®‰è£…"><a href="#Docker-é•œåƒå®‰è£…" class="headerlink" title="Docker é•œåƒå®‰è£…"></a>Docker é•œåƒå®‰è£…</h3><p>ç›´æ¥çœ‹<a href="https://jenkins.io/zh/doc/book/installing/#docker" rel="external nofollow noopener noreferrer" target="_blank">å®˜ç½‘å®‰è£…</a>ï¼Œéœ€è¦åŸºæœ¬çš„ Docker æ“ä½œçŸ¥è¯†ã€‚</p><h2 id="Git-å®‰è£…æ–°ç‰ˆ"><a href="#Git-å®‰è£…æ–°ç‰ˆ" class="headerlink" title="Git å®‰è£…æ–°ç‰ˆ"></a>Git å®‰è£…æ–°ç‰ˆ</h2><h3 id="ä¸‹è½½ç¼–è¾‘å·¥å…·"><a href="#ä¸‹è½½ç¼–è¾‘å·¥å…·" class="headerlink" title="ä¸‹è½½ç¼–è¾‘å·¥å…·"></a>ä¸‹è½½ç¼–è¾‘å·¥å…·</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y groupinstall &quot;Development Tools&quot;</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½ä¾èµ–åŒ…"><a href="#ä¸‹è½½ä¾èµ–åŒ…" class="headerlink" title="ä¸‹è½½ä¾èµ–åŒ…"></a>ä¸‹è½½ä¾èµ–åŒ…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum -y install zlib-devel perl-ExtUtils-MakeMaker asciidoc xmlto openssl-devel</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è‡ªå¸¦çš„-git"><a href="#åˆ é™¤è‡ªå¸¦çš„-git" class="headerlink" title="åˆ é™¤è‡ªå¸¦çš„ git"></a>åˆ é™¤è‡ªå¸¦çš„ git</h3><p>å®‰è£…ä¾èµ–æ—¶ï¼Œyum è‡ªåŠ¨å®‰è£…äº† Gitï¼Œéœ€è¦å¸è½½æ—§ç‰ˆæœ¬ Gitï¼Œå‘½ä»¤ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">yum remove git</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½-git-æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç "><a href="#ä¸‹è½½-git-æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç " class="headerlink" title="ä¸‹è½½ git æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç "></a>ä¸‹è½½ <code>git</code> æœ€æ–°ç‰ˆæœ¬çš„æºä»£ç </h3><h4 id="å»-GitHub-ç½‘ç«™ç›´æ¥ä¸‹è½½å‘å¸ƒç‰ˆ"><a href="#å»-GitHub-ç½‘ç«™ç›´æ¥ä¸‹è½½å‘å¸ƒç‰ˆ" class="headerlink" title="å» GitHub ç½‘ç«™ç›´æ¥ä¸‹è½½å‘å¸ƒç‰ˆ"></a>å» GitHub ç½‘ç«™ç›´æ¥ä¸‹è½½å‘å¸ƒç‰ˆ</h4><p><a href="https://github.com/git/git/releases" rel="external nofollow noopener noreferrer" target="_blank">Github Release ç‰ˆæœ¬</a></p><p><a href="https://gitee.com/SpiritLing/git/releases" rel="external nofollow noopener noreferrer" target="_blank">Gitee Release ç‰ˆæœ¬</a></p><p>å½“ç„¶åœ¨å›½å†…ä¸‹è½½ github çš„å‘å¸ƒç‰ˆå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥å¯ä»¥æ¨èå»å®˜ç½‘ä¸‹è½½</p><h4 id="å®˜ç½‘ä¸‹è½½"><a href="#å®˜ç½‘ä¸‹è½½" class="headerlink" title="å®˜ç½‘ä¸‹è½½"></a>å®˜ç½‘ä¸‹è½½</h4><p><a href="https://git-scm.com/" rel="external nofollow noopener noreferrer" target="_blank">git å®˜ç½‘</a> ç‚¹å‡» <code>Downloads</code> ï¼Œè¿›å…¥ä¸‹è½½é¡µé¢</p><p>ç‚¹å‡» <code>Linux/Unix</code> ä¸‹è½½ Linux ç‰ˆæœ¬çš„ git</p><p>æ‹‰åˆ°æœ€ä¸‹æ–¹ï¼Œç‚¹å‡»<a href="https://mirrors.edge.kernel.org/pub/software/scm/git/" rel="external nofollow noopener noreferrer" target="_blank">download a tarball</a> è°ƒè½¬åˆ° git å‹ç¼©åŒ…å‹åœ¨é¡µé¢ï¼Œé€‰æ‹©ä½ éœ€è¦çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½</p><h3 id="è§£å‹-git-å‹ç¼©åŒ…"><a href="#è§£å‹-git-å‹ç¼©åŒ…" class="headerlink" title="è§£å‹ git å‹ç¼©åŒ…"></a>è§£å‹ git å‹ç¼©åŒ…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">tar -zxvf git-2.30.0.tar.gz</span><br></pre></td></tr></table></figure><h3 id="è¿›å…¥-git-ç›®å½•ï¼Œé…ç½®å®‰è£…è·¯å¾„"><a href="#è¿›å…¥-git-ç›®å½•ï¼Œé…ç½®å®‰è£…è·¯å¾„" class="headerlink" title="è¿›å…¥ git ç›®å½•ï¼Œé…ç½®å®‰è£…è·¯å¾„"></a>è¿›å…¥ git ç›®å½•ï¼Œé…ç½®å®‰è£…è·¯å¾„</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd git-2.13.3</span><br><span class="line"># make configure  åªåœ¨æºç å®‰è£…æƒ…å†µä¸‹ä½¿ç”¨ï¼Œreleaseç‰ˆæœ¬ä¸‹</span><br><span class="line">./configure --prefix=/usr/local/git</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="é…ç½®å…¨å±€è·¯å¾„"><a href="#é…ç½®å…¨å±€è·¯å¾„" class="headerlink" title="é…ç½®å…¨å±€è·¯å¾„"></a>é…ç½®å…¨å±€è·¯å¾„</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export PATH=&quot;/usr/local/git/bin:$PATH&quot;</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹-git-ç‰ˆæœ¬"><a href="#æŸ¥çœ‹-git-ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ git ç‰ˆæœ¬"></a>æŸ¥çœ‹ git ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è½¯è¿æ¥"><a href="#é…ç½®è½¯è¿æ¥" class="headerlink" title="é…ç½®è½¯è¿æ¥"></a>é…ç½®è½¯è¿æ¥</h3><p>åœ¨æœ‰äº›ç³»ç»Ÿæˆ–è€…è½¯ä»¶ä¸­æœ‰å¯èƒ½ä¼šä½¿ç”¨ git é»˜è®¤åœ°å€ï¼Œæ‰€ä»¥ä¸Šé¢çš„é…ç½®ä¹Ÿè®¸æœ‰å¯èƒ½æ— æ³•è®¿é—®åˆ° git å‘½ä»¤ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ è½¯è¿æ¥ï¼Œæ·»åŠ åˆ°ä½ æ‰€éœ€è¦çš„åœ°æ–¹</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ln -s /usr/local/git/bin/git /usr/bin/git</span><br></pre></td></tr></table></figure><p>å‰æ–¹æ˜¯è‡ªå·±å®‰è£…çš„ä½ç½®ï¼Œåé¢æ˜¯éœ€è¦è½¯è¿æ¥åˆ°éœ€è¦çš„ä½ç½®ã€‚</p><p>è‡³äºåŠ ä¸åŠ  <code>-s</code> ï¼Œå¯ä»¥çœ‹è¿™é‡Œ <a href="https://man.linuxde.net/ln" rel="external nofollow noopener noreferrer" target="_blank">Linux Ln å‘½ä»¤</a></p><blockquote class="blockquote-center"><p>åªè®°å½•è‡ªå·±æ›¾ç»ä½¿ç”¨è¿‡çš„æ–¹å¼ï¼Œå¦‚æœæœ‰å…¶ä»–æ›´å¥½çš„ï¼Œæ¬¢è¿ç•™è¨€!</p></blockquote><h2 id="å®‰è£…-Docker"><a href="#å®‰è£…-Docker" class="headerlink" title="å®‰è£… Docker"></a>å®‰è£… Docker</h2><blockquote><p>è­¦å‘Šï¼šåˆ‡å‹¿åœ¨æ²¡æœ‰é…ç½® Docker YUM æºçš„æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨ yum å‘½ä»¤å®‰è£… Docker.</p></blockquote><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><h4 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h4><p>Docker CE æ”¯æŒ 64 ä½ç‰ˆæœ¬ CentOS 7ï¼Œå¹¶ä¸”è¦æ±‚å†…æ ¸ç‰ˆæœ¬ä¸ä½äº 3.10ã€‚ CentOS 7 æ»¡è¶³æœ€ä½å†…æ ¸çš„è¦æ±‚ï¼Œä½†ç”±äºå†…æ ¸ç‰ˆæœ¬æ¯”è¾ƒä½ï¼Œéƒ¨åˆ†åŠŸèƒ½ï¼ˆå¦‚ <code>overlay2</code> å­˜å‚¨å±‚é©±åŠ¨ï¼‰æ— æ³•ä½¿ç”¨ï¼Œå¹¶ä¸”éƒ¨åˆ†åŠŸèƒ½å¯èƒ½ä¸å¤ªç¨³å®šã€‚</p><h4 id="å¸è½½æ—§ç‰ˆæœ¬"><a href="#å¸è½½æ—§ç‰ˆæœ¬" class="headerlink" title="å¸è½½æ—§ç‰ˆæœ¬"></a>å¸è½½æ—§ç‰ˆæœ¬</h4><p>æ—§ç‰ˆæœ¬çš„ Docker ç§°ä¸º <code>docker</code> æˆ–è€… <code>docker-engine</code>ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¸è½½æ—§ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">                docker-client \</span><br><span class="line">                docker-client-latest \</span><br><span class="line">                docker-common \</span><br><span class="line">                docker-latest \</span><br><span class="line">                docker-latest-logrotate \</span><br><span class="line">                docker-logrotate \</span><br><span class="line">                docker-selinux \</span><br><span class="line">                docker-engine-selinux \</span><br><span class="line">                docker-engine</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-yum-å®‰è£…"><a href="#ä½¿ç”¨-yum-å®‰è£…" class="headerlink" title="ä½¿ç”¨ yum å®‰è£…"></a>ä½¿ç”¨ yum å®‰è£…</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum install -y yum-utils \</span><br><span class="line">        device-mapper-persistent-data \</span><br><span class="line">        lvm2</span><br></pre></td></tr></table></figure><p>é‰´äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨å›½å†…æºï¼Œå®˜æ–¹æºè¯·åœ¨æ³¨é‡Šä¸­æŸ¥çœ‹ã€‚</p><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ·»åŠ  <code>yum</code> è½¯ä»¶æºï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum-config-manager \</span><br><span class="line">  --add-repo \</span><br><span class="line">  https://mirrors.ustc.edu.cn/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>å®˜æ–¹æº</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo yum-config-manager \</span><br><span class="line">  --add-repo \</span><br><span class="line">  https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æµ‹è¯•ç‰ˆæœ¬çš„ Docker CE è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum-config-manager --<span class="built_in">enable</span> docker-ce-test</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æ¯æ—¥æ„å»ºç‰ˆæœ¬çš„ Docker CE è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum-config-manager --<span class="built_in">enable</span> docker-ce-nightly</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…-Docker-CE"><a href="#å®‰è£…-Docker-CE" class="headerlink" title="å®‰è£… Docker CE"></a>å®‰è£… Docker CE</h4><blockquote><p>åœ¨ centos8 ä¸­éœ€è¦åœ¨å®‰è£… <code>docker-ce</code> ä¹‹å‰å®‰è£…ä¾èµ–</p></blockquote><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm</span><br></pre></td></tr></table></figure><p>æ›´æ–° <code>yum</code> è½¯ä»¶æºç¼“å­˜ï¼Œå¹¶å®‰è£… <code>docker-ce</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum install -y docker-ce</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"><a href="#ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…" class="headerlink" title="ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…"></a>ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…</h3><p>åœ¨æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒä¸­ Docker å®˜æ–¹ä¸ºäº†ç®€åŒ–å®‰è£…æµç¨‹ï¼Œæä¾›äº†ä¸€å¥—ä¾¿æ·çš„å®‰è£…è„šæœ¬ï¼ŒCentOS ç³»ç»Ÿä¸Šå¯ä»¥ä½¿ç”¨è¿™å¥—è„šæœ¬å®‰è£…ï¼Œå¦å¤–å¯ä»¥é€šè¿‡ <code>--mirror</code> é€‰é¡¹ä½¿ç”¨å›½å†…æºè¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -fsSL get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh --mirror Aliyun</span><br><span class="line"><span class="comment"># $ sudo sh get-docker.sh --mirror AzureChinaCloud</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œè„šæœ¬å°±ä¼šè‡ªåŠ¨çš„å°†ä¸€åˆ‡å‡†å¤‡å·¥ä½œåšå¥½ï¼Œå¹¶ä¸”æŠŠ Docker CE çš„ç¨³å®š(stable)ç‰ˆæœ¬å®‰è£…åœ¨ç³»ç»Ÿä¸­ã€‚</p><h3 id="å¯åŠ¨-Docker-CE"><a href="#å¯åŠ¨-Docker-CE" class="headerlink" title="å¯åŠ¨ Docker CE"></a>å¯åŠ¨ Docker CE</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> docker</span><br><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure><h3 id="å»ºç«‹-docker-ç”¨æˆ·ç»„"><a href="#å»ºç«‹-docker-ç”¨æˆ·ç»„" class="headerlink" title="å»ºç«‹ docker ç”¨æˆ·ç»„"></a>å»ºç«‹ docker ç”¨æˆ·ç»„</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>docker</code> å‘½ä»¤ä¼šä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Unix_domain_socket" rel="external nofollow noopener noreferrer" target="_blank">Unix socket</a> ä¸ Docker å¼•æ“é€šè®¯ã€‚è€Œåªæœ‰ <code>root</code> ç”¨æˆ·å’Œ <code>docker</code> ç»„çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—® Docker å¼•æ“çš„ Unix socketã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸€èˆ¬ Linux ç³»ç»Ÿä¸Šä¸ä¼šç›´æ¥ä½¿ç”¨ <code>root</code> ç”¨æˆ·ã€‚å› æ­¤ï¼Œæ›´å¥½åœ°åšæ³•æ˜¯å°†éœ€è¦ä½¿ç”¨ <code>docker</code> çš„ç”¨æˆ·åŠ å…¥ <code>docker</code> ç”¨æˆ·ç»„ã€‚</p><p>å»ºç«‹ <code>docker</code> ç»„ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo groupadd docker</span><br></pre></td></tr></table></figure><p>å°†å½“å‰ç”¨æˆ·åŠ å…¥ <code>docker</code> ç»„ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure><p>é€€å‡ºå½“å‰ç»ˆç«¯å¹¶é‡æ–°ç™»å½•ï¼Œè¿›è¡Œå¦‚ä¸‹æµ‹è¯•ã€‚</p><h3 id="æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®"><a href="#æµ‹è¯•-Docker-æ˜¯å¦å®‰è£…æ­£ç¡®" class="headerlink" title="æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®"></a>æµ‹è¯• Docker æ˜¯å¦å®‰è£…æ­£ç¡®</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ docker run hello-world</span><br><span class="line"></span><br><span class="line">Unable to find image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">d1725b59e92d: Pull complete</span><br><span class="line">Digest: sha256:0add3ace90ecb4adbf7777e9aacf18357296e799f81cabc9fde470971e499788</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure><p>è‹¥èƒ½æ­£å¸¸è¾“å‡ºä»¥ä¸Šä¿¡æ¯ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p><h3 id="é•œåƒåŠ é€Ÿ"><a href="#é•œåƒåŠ é€Ÿ" class="headerlink" title="é•œåƒåŠ é€Ÿ"></a>é•œåƒåŠ é€Ÿ</h3><p>å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°æ‹‰å– Docker é•œåƒååˆ†ç¼“æ…¢ï¼Œå¯ä»¥é…ç½® Docker <a href="#é…ç½®é•œåƒåŠ é€Ÿ">å›½å†…é•œåƒåŠ é€Ÿ</a>ã€‚</p><h3 id="æ·»åŠ å†…æ ¸å‚æ•°"><a href="#æ·»åŠ å†…æ ¸å‚æ•°" class="headerlink" title="æ·»åŠ å†…æ ¸å‚æ•°"></a>æ·»åŠ å†…æ ¸å‚æ•°</h3><p>å¦‚æœåœ¨ CentOS ä½¿ç”¨ Docker CE çœ‹åˆ°ä¸‹é¢çš„è¿™äº›è­¦å‘Šä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">WARNING: bridge-nf-call-iptables is disabled</span><br><span class="line">WARNING: bridge-nf-call-ip6tables is disabled</span><br></pre></td></tr></table></figure><p>è¯·æ·»åŠ å†…æ ¸é…ç½®å‚æ•°ä»¥å¯ç”¨è¿™äº›åŠŸèƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo tee -a /etc/sysctl.conf &lt;&lt;-EOF</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°åŠ è½½ <code>sysctl.conf</code> å³å¯</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://docs.docker.com/install/linux/docker-ce/centos/" rel="external nofollow noopener noreferrer" target="_blank">Docker å®˜æ–¹ CentOS å®‰è£…æ–‡æ¡£</a>ã€‚</li></ul><h3 id="é…ç½®é•œåƒåŠ é€Ÿ"><a href="#é…ç½®é•œåƒåŠ é€Ÿ" class="headerlink" title="é…ç½®é•œåƒåŠ é€Ÿ"></a>é…ç½®é•œåƒåŠ é€Ÿ</h3><p>å›½å†…ä» Docker Hub æ‹‰å–é•œåƒæœ‰æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Œæ­¤æ—¶å¯ä»¥é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚å›½å†…å¾ˆå¤šäº‘æœåŠ¡å•†éƒ½æä¾›äº†å›½å†…åŠ é€Ÿå™¨æœåŠ¡ï¼Œä¾‹å¦‚ï¼š</p><ul><li><a href="https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy" rel="external nofollow noopener noreferrer" target="_blank">Azure ä¸­å›½é•œåƒ <code>https://dockerhub.azk8s.cn</code></a></li><li><a href="https://cr.console.aliyun.com/cn-hangzhou/mirrors" rel="external nofollow noopener noreferrer" target="_blank">é˜¿é‡Œäº‘åŠ é€Ÿå™¨(éœ€ç™»å½•è´¦å·è·å–)</a></li><li><a href="https://kirk-enterprise.github.io/hub-docs/#/user-guide/mirror" rel="external nofollow noopener noreferrer" target="_blank">ä¸ƒç‰›äº‘åŠ é€Ÿå™¨ <code>https://reg-mirror.qiniu.com</code></a></li></ul><blockquote><p>ç”±äºé•œåƒæœåŠ¡å¯èƒ½å‡ºç°å®•æœºï¼Œå»ºè®®åŒæ—¶é…ç½®å¤šä¸ªé•œåƒã€‚</p><p>å›½å†…å„å¤§äº‘æœåŠ¡å•†å‡æä¾›äº† Docker é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå»ºè®®æ ¹æ®è¿è¡Œ Docker çš„äº‘å¹³å°é€‰æ‹©å¯¹åº”çš„é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå…·ä½“è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p></blockquote><p>æœ¬èŠ‚æˆ‘ä»¬ä»¥ Azure ä¸­å›½é•œåƒ <code>https://dockerhub.azk8s.cn</code> ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p><h4 id="Ubuntu-16-04-ã€Debian-8-ã€CentOS-7"><a href="#Ubuntu-16-04-ã€Debian-8-ã€CentOS-7" class="headerlink" title="Ubuntu 16.04+ã€Debian 8+ã€CentOS 7"></a>Ubuntu 16.04+ã€Debian 8+ã€CentOS 7</h4><p>å¯¹äºä½¿ç”¨ <a href="https://www.freedesktop.org/wiki/Software/systemd/" rel="external nofollow noopener noreferrer" target="_blank">systemd</a> çš„ç³»ç»Ÿï¼Œè¯·åœ¨ <code>/etc/docker/daemon.json</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">        <span class="string">"https://dockerhub.azk8s.cn"</span>,</span><br><span class="line">        <span class="string">"https://reg-mirror.qiniu.com"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œä¸€å®šè¦ä¿è¯è¯¥æ–‡ä»¶ç¬¦åˆ json è§„èŒƒï¼Œå¦åˆ™ Docker å°†ä¸èƒ½å¯åŠ¨ã€‚</p></blockquote><p>ä¹‹åé‡æ–°å¯åŠ¨æœåŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl restart docker</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ‚¨ä¹‹å‰æŸ¥çœ‹æ—§æ•™ç¨‹ï¼Œä¿®æ”¹äº† <code>docker.service</code> æ–‡ä»¶å†…å®¹ï¼Œè¯·å»æ‰æ‚¨æ·»åŠ çš„å†…å®¹ï¼ˆ<code>--registry-mirror=https://dockerhub.azk8s.cn</code>ï¼‰ã€‚</p></blockquote><h4 id="Windows-10"><a href="#Windows-10" class="headerlink" title="Windows 10"></a>Windows 10</h4><p>å¯¹äºä½¿ç”¨ <code>Windows 10</code> çš„ç”¨æˆ·ï¼Œåœ¨ä»»åŠ¡æ æ‰˜ç›˜ Docker å›¾æ ‡å†…å³é”®èœå•é€‰æ‹© <code>Settings</code>ï¼Œæ‰“å¼€é…ç½®çª—å£ååœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© <code>Docker Engine</code>ï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ï¼Œä¹‹åç‚¹å‡» <code>Apply &amp; Restart</code> ä¿å­˜å Docker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">        <span class="string">"https://dockerhub.azk8s.cn"</span>,</span><br><span class="line">        <span class="string">"https://reg-mirror.qiniu.com"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h4><p>å¯¹äºä½¿ç”¨ macOS çš„ç”¨æˆ·ï¼Œåœ¨ä»»åŠ¡æ ç‚¹å‡» Docker Desktop åº”ç”¨å›¾æ ‡ -&gt; <code>Perferences</code>ï¼Œåœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© <code>Docker Engine</code>ï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ã€‚ä¿®æ”¹å®Œæˆä¹‹åï¼Œç‚¹å‡» <code>Apply &amp; Restart</code> æŒ‰é’®ï¼ŒDocker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"registry-mirrors"</span>: [</span><br><span class="line">        <span class="string">"https://dockerhub.azk8s.cn"</span>,</span><br><span class="line">        <span class="string">"https://reg-mirror.qiniu.com"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ"></a>æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ</h4><p>æ‰§è¡Œ <code>$ docker info</code>ï¼Œå¦‚æœä»ç»“æœä¸­çœ‹åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Registry Mirrors:</span><br><span class="line"> https://dockerhub.azk8s.cn/</span><br></pre></td></tr></table></figure><!-- rebuild by neat -->]]></content>
      <categories>
        <category>Linuxç¯å¢ƒå®‰è£…</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>Jenkins</tag>
        <tag>Centos</tag>
        <tag>Mysql</tag>
        <tag>Nodejs</tag>
        <tag>Nginx</tag>
        <tag>Java</tag>
      </tags>
  </entry>
</search>
